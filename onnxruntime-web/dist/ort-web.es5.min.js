/*!
* ONNX Runtime Web v1.15.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("onnxruntime-common"));else if("function"==typeof define&&define.amd)define([],e);else{var n="object"==typeof exports?e(require("onnxruntime-common")):e(t.ort);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(function(__WEBPACK_EXTERNAL_MODULE__1670__){return function(){var __webpack_modules__={5716:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.onnxjsBackend=void 0;var i=n(6027),a=n(1723),s=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=new i.Session(e),"string"!=typeof t?[3,2]:[4,n.loadModel(t)];case 1:return r.sent(),[3,4];case 2:return[4,n.loadModel(t)];case 3:r.sent(),r.label=4;case 4:return[2,new a.OnnxjsSessionHandler(n)]}}))}))},t}();e.onnxjsBackend=new s},2818:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.wasmBackend=e.initializeFlags=void 0;var i=n(1670),a=n(5381),s=n(9544),u=n(6640);e.initializeFlags=function(){if(("number"!=typeof i.env.wasm.initTimeout||i.env.wasm.initTimeout<0)&&(i.env.wasm.initTimeout=0),"boolean"!=typeof i.env.wasm.simd&&(i.env.wasm.simd=!0),"boolean"!=typeof i.env.wasm.proxy&&(i.env.wasm.proxy=!1),"number"!=typeof i.env.wasm.numThreads||!Number.isInteger(i.env.wasm.numThreads)||i.env.wasm.numThreads<=0){var t="undefined"==typeof navigator?(0,a.cpus)().length:navigator.hardwareConcurrency;i.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}};var c=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return(0,e.initializeFlags)(),[4,(0,s.initWasm)()];case 1:return t.sent(),[2]}}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,(n=new u.OnnxruntimeWebAssemblySessionHandler).loadModel(t,e)];case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))},t}();e.wasmBackend=new c},1057:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(1670),e);var i=n(1670),a=n(5716).onnxjsBackend;(0,i.registerBackend)("webgl",a,-10);var s=n(2818).wasmBackend;(0,i.registerBackend)("webgpu",s,5),(0,i.registerBackend)("cpu",s,10),(0,i.registerBackend)("wasm",s,10),(0,i.registerBackend)("xnnpack",s,9),(0,i.registerBackend)("webnn",s,9)},4910:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},6874:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;var o=n(1446),i=n(1287),a=n(9240),s=n(7273),u=i.onnxruntime.experimental.fbs,c=function(){function t(e){var n,i;if(this._attributes=new Map,null!=e){try{for(var a=r(e),s=a.next();!s.done;s=a.next()){var c=s.value;c instanceof o.onnx.AttributeProto?this._attributes.set(c.name,[t.getValue(c),t.getType(c)]):c instanceof u.Attribute&&this._attributes.set(c.name(),[t.getValue(c),t.getType(c)])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}return t.prototype.set=function(t,e,n){this._attributes.set(t,[n,e])},t.prototype.delete=function(t){this._attributes.delete(t)},t.prototype.getFloat=function(t,e){return this.get(t,"float",e)},t.prototype.getInt=function(t,e){return this.get(t,"int",e)},t.prototype.getString=function(t,e){return this.get(t,"string",e)},t.prototype.getTensor=function(t,e){return this.get(t,"tensor",e)},t.prototype.getFloats=function(t,e){return this.get(t,"floats",e)},t.prototype.getInts=function(t,e){return this.get(t,"ints",e)},t.prototype.getStrings=function(t,e){return this.get(t,"strings",e)},t.prototype.getTensors=function(t,e){return this.get(t,"tensors",e)},t.prototype.get=function(t,e,n){var r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: ".concat(t))}if(r[1]!==e)throw new Error("type mismatch: expected ".concat(e," but got ").concat(r[1]));return r[0]},t.getType=function(t){var e=t instanceof o.onnx.AttributeProto?t.type:t.type();switch(e){case o.onnx.AttributeProto.AttributeType.FLOAT:return"float";case o.onnx.AttributeProto.AttributeType.INT:return"int";case o.onnx.AttributeProto.AttributeType.STRING:return"string";case o.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case o.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case o.onnx.AttributeProto.AttributeType.INTS:return"ints";case o.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case o.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(o.onnx.AttributeProto.AttributeType[e]))}},t.getValue=function(t){var e=t instanceof o.onnx.AttributeProto?t.type:t.type();if(e===o.onnx.AttributeProto.AttributeType.GRAPH||e===o.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(t);if(e===o.onnx.AttributeProto.AttributeType.INT&&s.LongUtil.isLong(n))return s.LongUtil.longToNumber(n);if(e===o.onnx.AttributeProto.AttributeType.INTS){for(var r=n,i=new Array(r.length),c=0;c<r.length;c++){var l=r[c];i[c]=s.LongUtil.longToNumber(l)}return i}if(e===o.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof o.onnx.AttributeProto?a.Tensor.fromProto(n):a.Tensor.fromOrtTensor(n);if(e===o.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof o.onnx.AttributeProto)return n.map((function(t){return a.Tensor.fromProto(t)}));if(t instanceof u.Attribute)return n.map((function(t){return a.Tensor.fromOrtTensor(t)}))}if(e===o.onnx.AttributeProto.AttributeType.STRING&&t instanceof o.onnx.AttributeProto){var f=n;return(0,s.decodeUtf8String)(f)}return e===o.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof o.onnx.AttributeProto?n.map(s.decodeUtf8String):n},t.getValueNoCheck=function(t){return t instanceof o.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)},t.getValueNoCheckFromOnnxFormat=function(t){switch(t.type){case o.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case o.onnx.AttributeProto.AttributeType.INT:return t.i;case o.onnx.AttributeProto.AttributeType.STRING:return t.s;case o.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case o.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case o.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case o.onnx.AttributeProto.AttributeType.INTS:return t.ints;case o.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case o.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case o.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: ".concat(o.onnx.AttributeProto.AttributeType[t.type]))}},t.getValueNoCheckFromOrtFormat=function(t){switch(t.type()){case u.AttributeType.FLOAT:return t.f();case u.AttributeType.INT:return t.i();case u.AttributeType.STRING:return t.s();case u.AttributeType.TENSOR:return t.t();case u.AttributeType.GRAPH:return t.g();case u.AttributeType.FLOATS:return t.floatsArray();case u.AttributeType.INTS:for(var e=[],n=0;n<t.intsLength();n++)e.push(t.ints(n));return e;case u.AttributeType.STRINGS:var r=[];for(n=0;n<t.stringsLength();n++)r.push(t.strings(n));return r;case u.AttributeType.TENSORS:var o=[];for(n=0;n<t.tensorsLength();n++)o.push(t.tensors(n));return o;default:throw new Error("unsupported attribute type: ".concat(u.AttributeType[t.type()]))}},t}();e.Attribute=c},1975:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;var a=n(4418),s=new Map;function u(t){return r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return void 0!==(n=e.backend)[t]&&(a=n[t],"initialize"in(u=a)&&"function"==typeof u.initialize&&"createSessionHandler"in u&&"function"==typeof u.createSessionHandler&&"dispose"in u&&"function"==typeof u.dispose)?(r=n[t],"object"==typeof(i=r.initialize())&&"then"in i?[4,i]:[3,2]):[3,3];case 1:i=o.sent(),o.label=2;case 2:if(i)return s.set(t,r),[2,r];o.label=3;case 3:return[2,void 0]}var a,u}))}))}e.backend={webgl:new a.WebGLBackend},e.resolveBackend=function t(e){return r(this,void 0,void 0,(function(){var n,r,a,c,l,f,p,d,h;return o(this,(function(o){switch(o.label){case 0:return e?[3,1]:[2,t(["webgl"])];case 1:n="string"==typeof e?[e]:e,o.label=2;case 2:o.trys.push([2,7,8,9]),r=i(n),a=r.next(),o.label=3;case 3:return a.done?[3,6]:(c=a.value,(l=s.get(c))?[2,l]:[4,u(c)]);case 4:if(f=o.sent())return[2,f];o.label=5;case 5:return a=r.next(),[3,3];case 6:return[3,9];case 7:return p=o.sent(),d={error:p},[3,9];case 8:try{a&&!a.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},4418:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;var r=n(1670),o=n(1315),i=n(2171),a=n(3389),s=function(){function t(){}return Object.defineProperty(t.prototype,"contextId",{get:function(){return r.env.webgl.contextId},set:function(t){r.env.webgl.contextId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matmulMaxBatchSize",{get:function(){return r.env.webgl.matmulMaxBatchSize},set:function(t){r.env.webgl.matmulMaxBatchSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureCacheMode",{get:function(){return r.env.webgl.textureCacheMode},set:function(t){r.env.webgl.textureCacheMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pack",{get:function(){return r.env.webgl.pack},set:function(t){r.env.webgl.pack=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"async",{get:function(){return r.env.webgl.async},set:function(t){r.env.webgl.async=t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){try{return this.glContext=(0,a.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),o.Logger.setWithEnv(r.env),o.Logger.verbose("WebGLBackend","Created WebGLContext: ".concat(typeof this.glContext," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0}catch(t){return o.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(t)),!1}},t.prototype.createSessionHandler=function(t){return new i.WebGLSessionHandler(this,t)},t.prototype.dispose=function(){this.glContext.dispose()},t}();e.WebGLBackend=s},6859:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;var s=n(7273),u=n(1997),c=n(6757),l=n(7618),f=n(432),p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return i(i(i(i(i(i(i({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())},e.prototype.getCustomTypes=function(){return{}},e.prototype.offsetToCoords=function(){return{offsetToCoords:new u.GlslLibRoutine("\n      vec2 ".concat("offsetToCoords","(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      "))}},e.prototype.coordsToOffset=function(){return{coordsToOffset:new u.GlslLibRoutine("\n      int ".concat("coordsToOffset","(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      "))}},e.prototype.getOutputSamplingSnippet=function(){var t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)},e.prototype.getPackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputPacked1DCoords(e,n);break;case 2:r[o]=this.getOutputPacked2DCoords(e,n);break;case 3:r[o]=this.getOutputPacked3DCoords(e,n);break;default:r[o]=this.getOutputPackedNDCoords(e,n)}var i=(0,c.getGlsl)(this.context.glContext.version),a="\n      void setOutput(vec4 val) {\n        ".concat(i.output," = val;\n      }\n    ");return r.floatTextureSetRGBA=new u.GlslLibRoutine(a),r},e.prototype.getUnpackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[o]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[o]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[o]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[o]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[o]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error("Unsupported output dimensionality: ".concat(e.length))}var i=(0,c.getGlsl)(this.context.glContext.version),a="\n        void setOutput(float val) {\n          ".concat(i.output," = vec4(val, 0, 0, 0);\n        }\n    ");return r.floatTextureSetR=new u.GlslLibRoutine(a),r},e.prototype.getOutputScalarCoords=function(){return new u.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")},e.prototype.getOutputPacked1DCoords=function(t,e){var n=e,r="";return 1===n[0]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(n[1],".0);\n          }\n        "),new u.GlslLibRoutine(r)):1===n[1]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(n[0],".0);\n          }\n        "),new u.GlslLibRoutine(r)):(r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(n[0],", ").concat(n[1],"));\n          return 2 * (resTexRC.y * ").concat(n[0]," + resTexRC.x);\n        }\n      "),new u.GlslLibRoutine(r))},e.prototype.getOutputPacked2DCoords=function(t,e){var n="";if(s.ArrayUtil.arraysEqual(t,e))return n="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(e[0],", ").concat(e[1],"));\n        }\n      "),new u.GlslLibRoutine(n);var r=e,o=Math.ceil(t[1]/2);return n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(r[0],", ").concat(r[1],"));\n\n          int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(o,") * 2;\n          int c = 2 * (index / ").concat(o,");\n\n          return ivec2(r, c);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputPacked3DCoords=function(t,e){var n=[e[0],e[1]],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2),i="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          int b = index / ").concat(o,";\n          index -= b * ").concat(o,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(r,") * 2;\n          int c = 2 * (index / ").concat(r,");\n\n          return ivec3(b, r, c);\n        }\n      ");return new u.GlslLibRoutine(i)},e.prototype.getOutputPackedNDCoords=function(t,e){for(var n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),i=o,a="",s="b, r, c",c=2;c<t.length-1;c++)i*=t[t.length-c-1],a="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+a,s="b".concat(c,", ")+s;var l="\n      ivec".concat(t.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n        ").concat(a,"\n\n        int b = index / ").concat(o,";\n        index -= b * ").concat(o,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(r,") * 2;\n        int c = 2 * (index / ").concat(r,");\n\n        return ivec").concat(t.length,"(").concat(s,");\n      }\n    ");return new u.GlslLibRoutine(l)},e.prototype.getOutputUnpacked1DCoords=function(t,e){var n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          return resTexRC.y * ").concat(e[0]," + resTexRC.x;\n        }\n      ");return new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked2DCoords=function(t,e){var n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          int r = index / ").concat(t[1],";\n          int c = index - r * ").concat(t[1],";\n          return ivec2(r, c);\n        }\n      ");return new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked3DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];var a=["r","c","d"],s=o.map((function(t,e){var n="int ".concat(a[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec3(r, c, d);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked4DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];var a=["r","c","d","d2"],s=o.map((function(t,e){var n="int ".concat(a[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked5DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];var a=["r","c","d","d2","d3"],s=o.map((function(t,e){var n="int ".concat(a[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked6DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];var a=["r","c","d","d2","d3","d4"],s=o.map((function(t,e){var n="int ".concat(a[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n         int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n         ").concat(s,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new u.GlslLibRoutine(n)},e.prototype.getCommonUtilFuncs=function(){var t={},e="uvFromFlat";t[e]=new u.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),t[e="packedUVfrom1D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom2D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom3D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";var n=(0,c.getGlsl)(this.context.glContext.version);return t[e]=new u.GlslLibRoutine("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(n.texture2D,"(textureSampler, uv).r;\n        }")),t},e.prototype.getInputsSamplingSnippets=function(){var t=this,e={},n=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((function(r,o){var i=t.context.inputTextureLayouts[o],a=(0,f.generateShaderFuncNameFromInputSamplerName)(r);i.isPacked?e[a]=t.getPackedSamplerFromInput(a,r,i):e[a]=t.getUnpackedSamplerFromInput(a,r,i);var s=(0,f.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(r);i.unpackedShape.length<=n.unpackedShape.length&&(i.isPacked?e[s]=t.getPackedSamplerAtOutputCoords(s,i,n,r):e[s]=t.getUnpackedSamplerAtOutputCoords(s,i,n,r))})),e},e.prototype.getPackedSamplerAtOutputCoords=function(t,e,n,r){var o,i=e.unpackedShape,a=n.unpackedShape,c=r,l=(0,f.generateShaderFuncNameFromInputSamplerName)(c),p=i.length,d=a.length,h=s.BroadcastUtil.getBroadcastDims(i,a),g=(0,f.getCoordsDataType)(d),y=d-p,b=(0,f.getGlChannels)();o=0===p?"":d<2&&h.length>=1?"coords = 0;":h.map((function(t){return"coords.".concat(b[t+y]," = 0;")})).join("\n");var m;m=d<2&&p>0?"coords":i.map((function(t,e){return"coords.".concat(b[e+y])})).join(", ");var v="return outputValue;",w=1===s.ShapeUtil.size(i),_=1===s.ShapeUtil.size(a);if(1!==p||w||_){if(w&&!_)v=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(h.length){var x=p-2,T=p-1;h.indexOf(x)>-1&&h.indexOf(T)>-1?v="return vec4(outputValue.x);":h.indexOf(x)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(T)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";var S="\n        int lastDim = coords.".concat(b[d-1],";\n        coords.").concat(b[d-1]," = coords.").concat(b[d-2],";\n        coords.").concat(b[d-2]," = lastDim;\n      "),A="\n      vec4 ".concat(t,"() {\n        ").concat(g," coords = getOutputCoords();\n        ").concat(S,"\n        ").concat(o,"\n        vec4 outputValue = ").concat(l,"(").concat(m,");\n        ").concat(v,"\n      }\n    ");return new u.GlslLibRoutine(A,["coordinates.getOutputCoords"])},e.prototype.getUnpackedSamplerAtOutputCoords=function(t,e,n,r){var o=[n.width,n.height],i=[e.width,e.height],a=e.unpackedShape.length,c=n.unpackedShape.length,l=e.unpackedShape,p=n.unpackedShape,d=(0,f.generateShaderFuncNameFromInputSamplerName)(r);if(a===c&&s.ArrayUtil.arraysEqual(i,o)){var h="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(r,", TexCoords);\n          }\n        ");return new u.GlslLibRoutine(h,["coordinates.sampleTexture"])}var g,y=(0,f.getCoordsDataType)(c),b=s.BroadcastUtil.getBroadcastDims(l,p),m=c-a,v=(0,f.getGlChannels)();g=0===a?"":c<2&&b.length>=1?"coords = 0;":b.map((function(t){return"coords.".concat(v[t+m]," = 0;")})).join("\n");var w;w=c<2&&a>0?"coords":e.unpackedShape.map((function(t,e){return"coords.".concat(v[e+m])})).join(", ");var _="\n        float ".concat(t,"() {\n          ").concat(y," coords = getOutputCoords();\n          ").concat(g,"\n          return ").concat(d,"(").concat(w,");\n        }\n      ");return new u.GlslLibRoutine(_,["coordinates.getOutputCoords"])},e.prototype.getPackedSamplerFromInput=function(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}},e.prototype.getUnpackedSamplerFromInput=function(t,e,n){var r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error("Unsupported dimension ".concat(r.length,"-D"))}},e.prototype.getPackedSamplerScalar=function(t,e){var n=(0,c.getGlsl)(this.context.glContext.version),r="\n          vec4 ".concat(t,"() {\n            return ").concat(n.texture2D,"(").concat(e,", halfCR);\n          }\n        ");return new u.GlslLibRoutine(r)},e.prototype.getPackedSampler1D=function(t,e,n){var r=[n.width,n.height],o=[r[1],r[0]],i=(0,c.getGlsl)(this.context.glContext.version),a="vec4 ".concat(t,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(a,["coordinates.packedUVfrom1D"])},e.prototype.getPackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],i=(0,c.getGlsl)(this.context.glContext.version),a=o[0],l=o[1];if(null!=o&&s.ArrayUtil.arraysEqual(r,o)){var f="vec4 ".concat(t,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(a,".0);\n        return ").concat(i.texture2D,"(").concat(e,", uv);\n      }");return new u.GlslLibRoutine(f)}var p=o,d=Math.ceil(r[1]/2),h="vec4 ".concat(t,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(p[1],", ").concat(p[0],", ").concat(d,", row, col);\n      return ").concat(i.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(h,["coordinates.packedUVfrom2D"])},e.prototype.getPackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],i=[o[0],o[1]],a=(0,c.getGlsl)(this.context.glContext.version);if(1===r[0]){var s=r.slice(1),l=(0,f.squeezeInputShape)(r,s),p=JSON.parse(JSON.stringify(n));p.unpackedShape=l;var d=this.getPackedSamplerFromInput(t,e,p),h="".concat(d.routineBody,"\n      vec4 ").concat(t,"(int b, int row, int col) {\n        return ").concat(t,"(").concat((0,f.getSqueezedParams)(["b","row","col"],[1,2]),");\n      } ");return new u.GlslLibRoutine(h,d.dependencies)}var g=i[0],y=i[1],b=Math.ceil(r[2]/2),m=b*Math.ceil(r[1]/2),v="vec4 ".concat(t,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(y,", ").concat(g,", ").concat(m,", ").concat(b,", b, row, col);\n      return ").concat(a.texture2D,"(").concat(e,", uv);}");return new u.GlslLibRoutine(v,["coordinates.packedUVfrom3D"])},e.prototype.getPackedSamplerND=function(t,e,n){for(var r=n.unpackedShape,o=r.length,i=[n.width,n.height],a=(0,c.getGlsl)(this.context.glContext.version),s=[i[0],i[1]],l=s[1],f=s[0],p=Math.ceil(r[o-1]/2),d=p*Math.ceil(r[o-2]/2),h="int b, int row, int col",g="b * ".concat(d," + (row / 2) * ").concat(p," + (col / 2)"),y=2;y<o-1;y++)h="int b".concat(y,", ")+h,d*=r[o-y-1],g="b".concat(y," * ").concat(d," + ")+g;var b="vec4 ".concat(t,"(").concat(h,") {\n      int index = ").concat(g,";\n      int texR = index / ").concat(f,";\n      int texC = index - texR * ").concat(f,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(b)},e.prototype.getUnpackedSamplerScalar=function(t,e,n){var r=a([n.width,n.height],2),o=r[0],i=r[1];if(1===o&&1===i){var s="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(e,", halfCR);\n          }\n        ");return new u.GlslLibRoutine(s,["coordinates.sampleTexture"])}var c="\n        float ".concat(t,"() {\n          int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(o,", ").concat(i,");\n          vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", offset_").concat(e,");\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler1D=function(t,e,n){var r=n.width,o=n.height;if(1===o&&1===r){var i="\n        float ".concat(t,"(int index) {\n          return sampleTexture(").concat(e,", halfCR);\n        }\n      ");return new u.GlslLibRoutine(i,["coordinates.sampleTexture"])}if(1===o){var a="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(r,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(a,["coordinates.sampleTexture"])}if(1===r){var s="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(o,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(s,["coordinates.sampleTexture"])}var c="\n        float ".concat(t,"(int index) {\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.height,n.width];if(null!=o&&s.ArrayUtil.arraysEqual(r,o)){var i=o[1],a=o[0],c="\n          float ".concat(t,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(i,".0, ").concat(a,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(c,["coordinates.sampleTexture"])}var p=(0,l.squeezeShape)(r),d=p.newShape,h=p.keptDims,g=d;if(g.length<r.length){var y=(0,f.squeezeInputShape)(r,g),b=JSON.parse(JSON.stringify(n));b.unpackedShape=y;var m="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,b).routineBody,"\n          float ").concat(t,"(int row, int col) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["col","row"],h),");\n          }\n        ");return new u.GlslLibRoutine(m,["coordinates.sampleTexture"])}var v=o[1],w=o[0];if(1===w){var _="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(v,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(v,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(_,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===v){var x="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(v,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(w,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}var T="\n        float ".concat(t,"(int row, int col) {\n          int index = col * ").concat(r[1]," + row;\n          vec2 uv = uvFromFlat(").concat(v,", ").concat(w,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=r[1]*r[2],i=r[2],a=(0,l.squeezeShape)(r),s=a.newShape,c=a.keptDims,p=s;if(p.length<r.length){var d=(0,f.squeezeInputShape)(r,p),h=JSON.parse(JSON.stringify(n));h.unpackedShape=d;var g=this.getUnpackedSamplerFromInput(t,e,h),y=c.reverse(),b="\n          ".concat(g.routineBody,"\n          float ").concat(t,"(int batch, int row, int col) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["batch","col","row"],y),");\n          }\n        ");return new u.GlslLibRoutine(b,g.dependencies)}var m=n.width,v=n.height,w="\n          float ".concat(t,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(o," + col * ").concat(i," + row;\n            vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n      ");return new u.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler4D=function(t,e,n){var r=n.unpackedShape,o=r[3],i=r[2]*o,a=r[1]*i,s=n.width,c=n.height,l="\n        float ".concat(t,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(a," + col * ").concat(i," +\n              depth2 * ").concat(o," + depth;\n          vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(l,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler5D=function(t,e,n){var r=n.unpackedShape,o=r[4],i=r[3]*o,a=r[2]*i,s=r[1]*a,c=(0,l.squeezeShape)(r),p=c.newShape,d=c.keptDims;if(p.length<r.length){var h=(0,f.squeezeInputShape)(r,p),g=JSON.parse(JSON.stringify(n));g.unpackedShape=h;var y="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,g).routineBody,"\n          float ").concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["row","col","depth","depth2","depth3"],d),");\n          }\n        ");return new u.GlslLibRoutine(y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var b=n.width,m=n.height,v="\n        float ".concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(s," + col * ").concat(a," + depth * ").concat(i," +\n          depth3 * ").concat(o," + depth2;\n          vec2 uv = uvFromFlat(").concat(b,", ").concat(m,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])},e.prototype.getUnpackedSampler6D=function(t,e,n){var r=n.unpackedShape,o=r[5],i=r[4]*o,a=r[3]*i,s=r[2]*a,c=r[1]*s,p=(0,l.squeezeShape)(r),d=p.newShape,h=p.keptDims;if(d.length<r.length){var g=(0,f.squeezeInputShape)(r,d),y=JSON.parse(JSON.stringify(n));y.unpackedShape=g;var b="\n            ".concat(this.getUnpackedSamplerFromInput(t,e,y).routineBody,"\n            float ").concat(t,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(t,"(").concat((0,f.getSqueezedParams)(["row","col","depth","depth2","depth3","depth4"],h),");\n            }\n          ");return new u.GlslLibRoutine(b,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var m=n.width,v=n.height,w="\n          float ".concat(t,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(c," + col * ").concat(s," + depth * ").concat(a," +\n            depth2 * ").concat(i," + depth3 * ").concat(o," + depth4;\n            vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.toVec=function(){for(var t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,o=t.height,i=[],a=0;a<e-1;++a)i.push("\n        c[".concat(a,"] = offset / ").concat(n[a],";")),i.push("\n        offset -= c[".concat(a,"] * ").concat(n[a],";"));i.push("\n        c[".concat(e-1,"] = offset;"));var s="\n      void toVec(vec2 texCoords, out int c[".concat(e,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(r,", ").concat(o,");\n        ").concat(i.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(e,"]) {\n        ").concat(i.join(""),"\n      }\n    ");return{toVec:new u.GlslLibRoutine(s,["coordinates.coordsToOffset"])}},e.prototype.valueFrom=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){var o=t.context.inputTextureLayouts[r],i=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,a="_".concat(n);e[a]=new u.GlslLibRoutine(t.getValueFromSingle(n,i,o.width,o.height,!1),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),e[a+="_T"]=new u.GlslLibRoutine(t.getValueFromSingle(n,i,o.width,o.height,!0),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),e},e.prototype.getValueFromSingle=function(t,e,n,r,o){var i="_".concat(t);o&&(i+="_T");var a=(0,c.getGlsl)(this.context.glContext.version);return"\n        float ".concat(i,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset").concat(i,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          float value = getColorAsFloat(").concat(a.texture2D,"(").concat(t,", coords));\n          return value;\n        }\n        ")},e.prototype.getPackedValueFrom=function(t,e,n,r,o){var i="_".concat(t,"_Pack");o&&(i+="_T");var a=(0,c.getGlsl)(this.context.glContext.version);return"\n        vec4 ".concat(i,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset_").concat(t,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          return ").concat(a.texture2D,"(").concat(t,", coords);\n        }\n        ")},e}(u.GlslLib);e.CoordsGlslLib=p},1997:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional";e.GlslContext=function(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r};e.GlslLib=function(t){this.context=t};e.GlslLibRoutine=function(t,e){this.routineBody=t,this.dependencies=e};var r=function(){function t(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}return t.prototype.addDependency=function(t){t&&this.dependencies.push(t)},t}();e.GlslLibRoutineNode=r;var o=function(){function t(){}return t.returnOrderedNodes=function(t){if(!t||0===t.length)return[];if(1===t.length)return t;var e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r},t.createOrderedNodes=function(t,e,n,r){for(var o=0;o<t.length;++o)this.dfsTraverse(t[o],e,n,r)},t.dfsTraverse=function(t,e,n,r){if(t&&!n.has(t.name)){if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);var o=t.dependencies;if(o&&o.length>0)for(var i=0;i<o.length;++i)this.dfsTraverse(o[i],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}},t}();e.TopologicalSortGlslRoutines=o},1371:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;var a=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return i(i({},this.encodeFloat32()),this.decodeFloat32())},e.prototype.getCustomTypes=function(){return{}},e.prototype.encodeFloat32=function(){return{encode:new a.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},e.prototype.decodeFloat32=function(){return{decode:new a.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},e.prototype.encodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new a.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(t,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))}},e.prototype.decodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new a.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(t,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))}},e.isLittleEndian=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},e}(a.GlslLib);e.EncodingGlslLib=s},2691:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;var a=n(1997),s=n(6757),u=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return i(i({},this.setFragColor()),this.getColorAsFloat())},e.prototype.getCustomTypes=function(){return{}},e.prototype.setFragColor=function(){var t=(0,s.getGlsl)(this.context.glContext.version);return{setFragColor:new a.GlslLibRoutine("\n        void setFragColor(float value) {\n            ".concat(t.output," = encode(value);\n        }\n        "),["encoding.encode"])}},e.prototype.getColorAsFloat=function(){return{getColorAsFloat:new a.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},e}(a.GlslLib);e.FragColorGlslLib=u},3878:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;var n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){for(var e,r={};null!==(e=n.exec(t));){var o=e[3].split(",").map((function(t){var e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((function(t){return null!==t}));r[e[2]]={params:o,body:e[4]}}for(var i in r)for(var a="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",i),s=new RegExp(a,"gm"),u=function(){var n=e[1],o=e[2],a=e[3].split(","),s=n?"".concat(n," ").concat(o,";"):"",u=r[i].body,c="";r[i].params.forEach((function(t,e){t&&(c+="".concat(t.type," ").concat(t.name," = ").concat(a[e],";\n"))})),u=(u="".concat(c,"\n ").concat(u)).replace("return","".concat(o," = "));var l="\n      ".concat(s,"\n      {\n        ").concat(u,"\n      }\n      ");t=t.replace(e[0],l)};null!==(e=s.exec(t));)u();return t=t.replace(n,"")}},8897:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;var o=n(1997),i=n(3878),a=n(1248),s=n(6757),u=function(){function t(t,e,n,r){var i=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new o.GlslContext(t,e,n,r),Object.keys(a.glslRegistry).forEach((function(t){var e=new a.glslRegistry[t](i.context);i.libs[t]=e}));var s=this.glslLibRoutineDependencyGraph;for(var u in this.libs){var c=this.libs[u].getFunctions();for(var l in c){var f=u+"."+l,p=void 0;s[f]?(p=s[f]).routineBody=c[l].routineBody:(p=new o.GlslLibRoutineNode(f,c[l].routineBody),s[f]=p);var d=c[l].dependencies;if(d)for(var h=0;h<d.length;++h)if(s[d[h]])p.addDependency(s[d[h]]);else{var g=new o.GlslLibRoutineNode(d[h]);s[d[h]]=g,p.addDependency(g)}}}}return t.prototype.preprocess=function(){var t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e="".concat(e,"\n      ").concat((0,s.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),e=(0,i.replaceInlines)(e),"".concat((0,s.getFragShaderPreamble)(this.context.glContext.version),"\n    ").concat(this.getUniforms(t.inputNames,t.variables),"\n    ").concat(this.getImports(e),"\n    ").concat(e)},t.prototype.getImports=function(t){var e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";for(var n="",r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(e[r].name));n+=e[r].routineBody+"\n"}return n},t.prototype.selectGlslLibRoutinesToBeIncluded=function(t){var e=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var o=r.split(".")[1];-1!==t.indexOf(o)&&n.push(e.glslLibRoutineDependencyGraph[r])})),o.TopologicalSortGlslRoutines.returnOrderedNodes(n)},t.prototype.getUniforms=function(t,e){var n,o,i,a,s=[];if(t)try{for(var u=r(t),c=u.next();!c.done;c=u.next()){var l=c.value;s.push("uniform sampler2D ".concat(l,";"))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(e)try{for(var f=r(e),p=f.next();!p.done;p=f.next()){var d=p.value;s.push("uniform ".concat(d.type," ").concat(d.name).concat(d.arrayLength?"[".concat(d.arrayLength,"]"):"",";"))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return s.join("\n")},t}();e.GlslPreprocessor=u},1248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;var r=n(6859),o=n(1371),i=n(2691),a=n(9183),s=n(9314);e.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:i.FragColorGlslLib,vec:s.VecGlslLib,shapeUtils:a.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},9183:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;var a=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return i(i(i(i(i({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},e.prototype.getCustomTypes=function(){return{}},e.prototype.bcastIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=t.context.inputTextureLayouts[o].unpackedShape;if(i.length<=e){for(var s=i.length,u=e-s,c="bcastIndices_".concat(r),l="",f=0;f<s;++f)l+="\n          realIndices[".concat(f,"] = int( mod(float(bcastedIndices[").concat(u+f,"]), ").concat(i[f],".0) );\n          ");var p="\n        void ".concat(c," (int bcastedIndices[").concat(e,"], out int realIndices[").concat(s,"]) {\n          ").concat(l,"\n        }\n        ");n[c]=new a.GlslLibRoutine(p)}})),n},e.prototype.bcastMatmulIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=t.context.inputTextureLayouts[o].shape;if(!(i.length<2||i.length>e)){for(var s=i.length,u=e-s,c="bcastMatmulIndices_".concat(r),l="",f=0;f<s-2;++f)l+="\n          realIndices[".concat(f,"] = int( mod(float(bcastedIndices[").concat(u+f,"]), ").concat(i[f],".0) );\n          ");var p="\n        void ".concat(c,"(int bcastedIndices[").concat(e,"], out int realIndices[").concat(s,"]) {\n          ").concat(l,"\n          realIndices[").concat(s-1,"] = bcastedIndices[").concat(e-1,"];\n          realIndices[").concat(s-2,"] = bcastedIndices[").concat(e-2,"];\n        }\n        ");n[c]=new a.GlslLibRoutine(p)}})),n},e.prototype.indicesToOffset=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=t.context.inputTextureLayouts[o].shape,s=t.context.inputTextureLayouts[o].strides,u=i.length,c="indicesToOffset_".concat(r);n[c]=new a.GlslLibRoutine(e.indexToOffsetSingle(c,u,s)),c="indicesToOffset_".concat(r,"_T"),n[c]=new a.GlslLibRoutine(e.indexToOffsetSingle(c,u,s.slice().reverse()))})),n},e.indexToOffsetSingle=function(t,e,n){for(var r="",o=e-1;o>=0;--o)r+="\n        offset += indices[".concat(o,"] * ").concat(n[o],";\n        ");return"\n      int ".concat(t,"(int indices[").concat(e,"]) {\n        int offset = 0;\n        ").concat(r,"\n        return offset;\n      }\n      ")},e.prototype.offsetToIndices=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=t.context.inputTextureLayouts[o].shape,s=t.context.inputTextureLayouts[o].strides,u=i.length,c="offsetToIndices_".concat(r);n[c]=new a.GlslLibRoutine(e.offsetToIndicesSingle(c,u,s)),c="offsetToIndices_".concat(r,"_T"),n[c]=new a.GlslLibRoutine(e.offsetToIndicesSingle(c,u,s.slice().reverse()))})),n},e.offsetToIndicesSingle=function(t,e,n){for(var r=[],o=0;o<e-1;++o)r.push("\n      indices[".concat(o,"] = offset / ").concat(n[o],";")),r.push("\n        offset -= indices[".concat(o,"] * ").concat(n[o],";"));return r.push("\n      indices[".concat(e-1,"] = offset;")),"\n      void ".concat(t,"(int offset, out int indices[").concat(e,"]) {\n        ").concat(r.join(""),"\n      }\n      ")},e.prototype.incrementIndices=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){for(var o=t.context.inputTextureLayouts[r].shape,i=o.length,s="incrementIndices_".concat(n),u="",c=0;c<i;++c)u+="\n        shape[".concat(c,"] = ").concat(o[c],";");var l="\n        void ".concat(s,"(int axis, out int indices[").concat(i,"]) {\n          int shape[").concat(i,"];\n          ").concat(u,";\n          for(int i = ").concat(i," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");e[s]=new a.GlslLibRoutine(l)})),e},e}(a.GlslLib);e.ShapeUtilsGlslLib=s},6757:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;var n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(t){return 1===t?n:r}e.getGlsl=o,e.getVertexShaderSource=function(t){var e=o(t);return"".concat(e.version,"\n      precision highp float;\n      ").concat(e.attribute," vec3 position;\n      ").concat(e.attribute," vec2 textureCoord;\n\n      ").concat(e.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }")},e.getFragShaderPreamble=function(t){var e=o(t);return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFrag," vec2 TexCoords;\n    ").concat(e.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ")},e.getDefaultFragShaderMain=function(t,e){var n=o(t);return"\n  void main() {\n    int indices[".concat(e,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(n.output," = result;\n  }\n  ")}},9314:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;var a=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getCustomTypes=function(){return{}},e.prototype.getFunctions=function(){return i(i(i(i({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},e.prototype.binaryVecFunctions=function(){var t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in e){for(var o="".concat(r,"Vec"),i="",s=0;s<t;++s)i+="\n          dest[".concat(s,"] ").concat(e[r]," src[").concat(s,"];\n          ");var u="\n        void ".concat(o,"(int src[").concat(t,"], out int dest[").concat(t,"]) {\n          ").concat(i,"\n        }\n        ");n[o]=new a.GlslLibRoutine(u)}return n},e.prototype.copyVec=function(){for(var t=this.context.outputTextureLayout.shape.length,e="",n=0;n<t;++n)e+="\n        dest[".concat(n,"] = src[").concat(n,"];\n        ");var r="\n      void copyVec(int src[".concat(t,"], out int dest[").concat(t,"]) {\n        ").concat(e,"\n      }\n      ");return{copyVec:new a.GlslLibRoutine(r)}},e.prototype.setVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index =".concat(t," + index;\n        if (index == 0)\n            m[0] = value;\n        "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            m[").concat(n,"] = value;\n            ");e+="\n        else\n            m[".concat(t-1,"] = value;\n        ");var r="\n      void setVecItem(out int m[".concat(t,"], int index, int value) {\n        ").concat(e,"\n      }\n        ");return{setVecItem:new a.GlslLibRoutine(r)}},e.prototype.getVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index = ".concat(t," + index;\n        if (index == 0)\n            return m[0];\n      "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            return m[").concat(n,"];\n      ");e+="\n        else\n            return m[".concat(t-1,"];\n        ");var r="\n      int getVecItem(int m[".concat(t,"], int index) {\n        ").concat(e,"\n      }\n    ");return{getVecItem:new a.GlslLibRoutine(r)}},e}(a.GlslLib);e.VecGlslLib=s},7860:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;var a=n(1315),s=n(9240),u=n(7273),c=n(9),l=n(7379),f=n(2488),p=n(540),d=n(3314),h=n(5639),g=function(){function t(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}return t.prototype.calculateTextureWidthAndHeight=function(t,e){return(0,d.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)},t.prototype.executeProgram=function(t,e){if(e.length<t.inputNames.length)throw new Error("Input size mustn't be less than ".concat(t.inputNames.length,"."));if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");for(var n=[],r=0;r<t.inputNames.length;++r)n[r]=this.getOrCreateTextureData(e[r],t.inputTypes[r]);var o=function(t,e){var n=e.map((function(t){return"".concat(t.unpackedShape.join(","),";").concat(t.width,"x").concat(t.height)})).join("_"),r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+":"+n}(t,n),i=this.session.programManager.getArtifact(o),a=i?i.programInfo:"function"==typeof t.get?t.get():t,s=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a.output.dims,a.output.textureType),u=this.createTextureData(s,a.output.type);return i||(i=this.session.programManager.build(a,n,u),this.session.programManager.setArtifact(o,i)),this.runProgram(i,n,u),u},t.prototype.run=function(t,e){return this.executeProgram(t,e).tensor},t.prototype.runProgram=function(t,e,n){for(var r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===h.TextureType.packed))throw new Error("input[".concat(r,"] property packed inconsistent"));if(!!n.isPacked!=(t.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)},t.prototype.getOrCreateTextureData=function(t,e){var n=this.getTextureData(t.dataId,e===h.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==h.TextureType.packed)))return e===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){var r=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===h.TextureType.packedLastDimension){var o=t.dims;if(4===o.length){var i=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],a=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,i,e),s=t.numberData;if(o[1]*o[2]*o[3]%4!=0){var u=o[0],c=o[1]*o[2]*o[3],l=4*Math.ceil(1*c/4);s=new Float32Array(u*l);for(var f=0;f<u;++f){var p=f*c,g=f*l+f%1*c;s.set(t.numberData.subarray(p,p+c),g)}}return this.createTextureData(a,t.type,s,t,1)}}if(e===h.TextureType.packed){var y=(0,d.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),b=this.createTextureData(y,t.type,t.numberData,t,1);n=this.pack(b)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n},t.prototype.createTextureDataFromLayoutBindTensor=function(t,e,n,r){return this.createTextureData(t,e,n,r,1)},t.prototype.createTextureData=function(t,e,n,r,o){a.Logger.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(t),"]"));var i=this.session.textureManager.createTextureFromLayout(e,t,n,o);return this.createTextureDataFromTexture(t,e,i,r)},t.prototype.reshapeUnpacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:u.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor},t.prototype.reshapePacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.packed);if((0,l.isReshapeCheap)(t.dims,e)){var r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:u.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}var o=(0,l.processDims3D)(t.dims),i=(0,l.processDims3D)(e),a=this.reshapePacked(t,o),s=this.run((0,l.createPackedReshape3DProgramInfoLoader)(this,a,i),[a]);return this.reshapePacked(s,e)},t.prototype.cast=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor},t.prototype.createTextureDataFromTexture=function(t,e,n,a,u){var c=this,l=r(r({},t),{tensor:a||new s.Tensor(t.unpackedShape,e,(function(t){return c.readTexture(l)}),(function(t){return o(c,void 0,void 0,(function(){return i(this,(function(t){return[2,this.readTextureAsync(l)]}))}))}),void 0,u),texture:n});return this.setTextureData(l.tensor.dataId,l,t.isPacked),l},t.prototype.getTextureData=function(t,e){return void 0===e&&(e=!1),this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)},t.prototype.isTextureLayoutCached=function(t,e){return void 0===e&&(e=!1),!!this.getTextureData(t.dataId,e)},t.prototype.dispose=function(){var t=this;this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.unpackedTextureDataCache=new Map},t.prototype.readTexture=function(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,f.encodeAsUint8)(this,t))},t.prototype.readTextureAsync=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return t.isPacked?[2,this.readTextureAsync(this.unpack(t))]:this.session.backend.glContext.isFloat32DownloadSupported?[2,this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels)]:[2,this.session.textureManager.readUint8TextureAsFloat((0,f.encodeAsUint8)(this,t))]}))}))},t.prototype.pack=function(t){return this.executeProgram((0,c.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])},t.prototype.unpack=function(t){return this.executeProgram((0,p.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])},t}();e.WebGLInferenceHandler=g},4110:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;var a=n(8817),s=i(n(5194)),u=n(4752),c=n(6668),l=n(9754),f=n(5042),p=n(6742),d=n(4125),h=n(6149),g=n(5378),y=n(6981),b=n(7413),m=n(7006),v=n(8276),w=n(5565),_=n(2834),x=n(1010),T=n(8126),S=n(2801),A=n(565),O=n(2444),P=n(815),E=n(564),I=n(5416),D=n(1240),k=n(5944),C=n(5707),R=i(n(9087)),F=n(7862),M=n(3980);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",R.abs],["Acos","","7+",R.acos],["Add","","7+",s.add],["And","","7+",s.and],["Asin","","7+",R.asin],["Atan","","7+",R.atan],["AveragePool","","7+",_.averagePool,_.parseAveragePoolAttributes],["BatchNormalization","","7+",a.batchNormalization,a.parseBatchNormalizationAttributes],["Cast","","6+",u.cast,u.parseCastAttributes],["Ceil","","6+",R.ceil],["Clip","","6-10",R.clip,R.parseClipAttributes],["Clip","","11+",R.clipV11],["Concat","","4+",c.concat,c.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",f.convTranspose,f.parseConvTransposeAttributes],["Cos","","7+",R.cos],["Div","","7+",s.div],["Dropout","","7+",R.identity],["DepthToSpace","","1+",p.depthToSpace,p.parseDepthToSpaceAttributes],["Equal","","7+",s.equal],["Elu","","6+",R.elu,R.parseEluAttributes],["Exp","","6+",R.exp],["Flatten","","1+",d.flatten,d.parseFlattenAttributes],["Floor","","6+",R.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",h.gather,h.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",_.globalAveragePool,_.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_.globalMaxPool],["Greater","","7+",s.greater],["Identity","","1+",R.identity],["ImageScaler","","1+",y.imageScaler,y.parseImageScalerAttributes],["InstanceNormalization","","6+",b.instanceNormalization,b.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",R.leakyRelu,R.parseLeakyReluAttributes],["Less","","7+",s.less],["LRN","","1+",m.lrn,m.parseLrnAttributes],["Log","","6+",R.log],["MatMul","","1+",v.matMul,v.parseMatMulAttributes],["MaxPool","","1+",_.maxPool,_.parseMaxPoolAttributes],["Mul","","7+",s.mul],["Neg","","6+",R.neg],["Not","","1+",R.not],["Or","","7+",s.or],["Pad","","2-10",w.padV2,w.parsePadAttributesV2],["Pad","","11+",w.padV11,w.parsePadAttributesV11],["Pow","","7+",s.pow],["PRelu","","7+",s.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",R.relu],["Reshape","","5+",T.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",A.shape],["Sigmoid","","6+",R.sigmoid],["Sin","","7+",R.sin],["Slice","","10+",O.sliceV10],["Slice","","1-9",O.slice,O.parseSliceAttributes],["Softmax","","1-12",P.softmax,P.parseSoftmaxAttributes],["Softmax","","13+",P.softmaxV13,P.parseSoftmaxAttributesV13],["Split","","2-12",E.split,E.parseSplitAttributes],["Sqrt","","6+",R.sqrt],["Squeeze","","1-12",I.squeeze,I.parseSqueezeAttributes],["Squeeze","","13+",I.squeezeV13],["Sub","","7+",s.sub],["Sum","","6+",D.sum],["Tan","","7+",R.tan],["Tanh","","6+",R.tanh],["Tile","","6+",k.tile],["Transpose","","1+",C.transpose,C.parseTransposeAttributes],["Upsample","","7-8",M.upsample,M.parseUpsampleAttributesV7],["Upsample","","9",M.upsample,M.parseUpsampleAttributesV9],["Unsqueeze","","1-12",F.unsqueeze,F.parseUnsqueezeAttributes],["Unsqueeze","","13+",F.unsqueezeV13],["Xor","","7+",s.xor]]},8817:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;var i=n(4910),a=n(6757),s=n(5639),u={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.batchNormalization=function(t,e,n){return l(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e,n)}}),e)]},e.parseBatchNormalizationAttributes=function(t){var e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),r=t.attributes.getInt("spatial",1);return(0,i.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:r})};var c=function(t,e,n){var i=(0,a.getGlsl)(t.session.backend.glContext.version),c=e[0].dims.length,l=o(t.calculateTextureWidthAndHeight(e[1].dims,s.TextureType.unpacked),2),f=l[0],p=l[1],d="\n  float process(int[".concat(c,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(f,", ").concat(p,");\n    float scale = getColorAsFloat(").concat(i.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(i.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(i.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(i.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(n.epsilon,")) ) + b;\n  }");return r(r({},u),{output:{dims:e[0].dims,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:d})},l=function(t){if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==o.dims.length||1!==i.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==i.type&&"float64"!==i.type)throw new Error("invalid input tensor types.")}},5194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;var r=n(7273),o=n(1997),i=n(6757),a=n(5639);function s(){var t="add_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function u(){var t="div_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function c(){var t="mul_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function l(){var t="sub_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function f(){var t="equal_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function p(){var t="greater_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function d(){var t="less_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function h(){var t="and_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function g(){var t="or_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function y(){var t="xor_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function b(){return function(t){var e="".concat(t,"_");return{body:"\n  float ".concat(e,"(float a, float b) {\n    return ").concat(t,"(a, b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return ").concat(t,"(v1, v2);\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}("pow")}function m(){var t="prelu_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}e.glslAdd=s,e.glslDiv=u,e.glslMul=c,e.glslSub=l,e.glslEqual=f,e.glslGreater=p,e.glslLess=d,e.glslAnd=h,e.glslOr=g,e.glslXor=y,e.glslPow=b,e.glslPRelu=m;var v=function(t,e,n,r,o){void 0===r&&(r=e[0].type);var i=t.session.pack?a.TextureType.packed:a.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[i,i],cacheHint:o,get:function(){return w(t,e,n,r)}}},w=function(t,e,n,o){void 0===o&&(o=e[0].type);var s=t.session.pack?a.TextureType.packed:a.TextureType.unpacked,u=!r.ShapeUtil.areEqual(e[0].dims,e[1].dims),c=e[0].dims,l=t.session.pack;if(u){var f=r.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!f)throw new Error("Can't perform binary op on the given tensors");var p=(c=f).length,d=0!==e[0].dims.length?e[0].dims.length:1,h=0!==e[1].dims.length?e[1].dims.length:1,g=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",y=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",b=(0,i.getGlsl)(t.session.backend.glContext.version),m=l?"\n      ".concat(n.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(n.name,"(a, b);\n        ").concat(b.output," = result;\n      }"):"\n      ".concat(n.body,"\n      float process(int indices[").concat(p,"]) {\n        int aindices[").concat(d,"];\n        int bindices[").concat(h,"];\n        ").concat(g,"\n        ").concat(y,"\n        return ").concat(n.name,"(_A(aindices), _B(bindices));\n      }");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:c,type:o,textureType:s},shaderSource:m,hasMain:l}}var v=(0,i.getGlsl)(t.session.backend.glContext.version),w="\n    ".concat(n.body,"\n    void main() {\n      vec4 v1 = ").concat(v.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(v.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(n.name,"(v1, v2);\n      ").concat(v.output," = result;\n    }\n    ");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:e[0].dims,type:o,textureType:s},shaderSource:w,hasMain:!0}};e.add=function(t,e){return[t.run(v(t,e,s()),e)]},e.and=function(t,e){return[t.run(v(t,e,h(),"bool"),e)]},e.div=function(t,e){return[t.run(v(t,e,u()),e)]},e.equal=function(t,e){return[t.run(v(t,e,f(),"bool"),e)]},e.greater=function(t,e){return[t.run(v(t,e,p(),"bool"),e)]},e.less=function(t,e){return[t.run(v(t,e,d(),"bool"),e)]},e.mul=function(t,e){return[t.run(v(t,e,c()),e)]},e.or=function(t,e){return[t.run(v(t,e,g(),"bool"),e)]},e.pow=function(t,e){return[t.run(v(t,e,b()),e)]},e.pRelu=function(t,e){return[t.run(v(t,e,m()),e)]},e.sub=function(t,e){return[t.run(v(t,e,l()),e)]},e.xor=function(t,e){return[t.run(v(t,e,y(),"bool"),e)]}},4752:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;var r=n(7273);e.cast=function(t,e,n){return o(e),[t.cast(e[0],n)]},e.parseCastAttributes=function(t){return r.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"))};var o=function(t){if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},4595:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(432),s=n(5614);e.createPackedConcatProgramInfoLoader=function(t,e,n){var c,l,f=(c=e.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(function(t,e){return"X".concat(e)})),inputTypes:Array(c).fill(i.TextureType.packed),cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=n[0].dims.slice();if(c>=l.length||c<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");c<0&&(c=l.length+c);for(var f=l.slice(0),p=1;p<n.length;p++)for(var d=n[p].dims.slice(),h=0;h<l.length;h++)if(h===c)f[c]+=d[h];else if(l[h]!==d[h])throw new Error("non concat dimensions must match");var g=f.length,y=(0,s.getChannels)("coords",g),b=(0,a.getCoordsDataType)(g),m=(0,s.unpackFromChannel)(),v=n.map((function(t){return t.dims})),w=(0,a.getGlChannels)(g),_=new Array(v.length-1);for(_[0]=v[0][c],p=1;p<_.length;p++)_[p]=_[p-1]+v[p][c];var x=w[c],T=w.slice(-2),S=w.join(),A="if (".concat(x," < ").concat(_[0],") {\n        return getChannel(\n            getX0(").concat(S,"), vec2(").concat(T.join(),"));\n        }");for(p=1;p<_.length;p++){var O=_[p-1];A+="\n            if (".concat(x," < ").concat(_[p],"  && ").concat(x," >= ").concat(_[p-1],") {\n              return getChannel(\n                getX").concat(p,"(").concat(u(w,x,O),"),\n                vec2(").concat(u(T,x,O),"));\n            }")}var P=_.length,E=_[_.length-1];A+="\n            return getChannel(\n              getX".concat(P,"(").concat(u(w,x,E),"),\n              vec2(").concat(u(T,x,E),"));");var I=(0,o.getGlsl)(t.session.backend.glContext.version),D="\n          ".concat(m,"\n          float getValue(").concat(w.map((function(t){return"int "+t})),") {\n            ").concat(A,"\n          }\n\n          void main() {\n            ").concat(b," coords = getOutputCoords();\n            int lastDim = coords.").concat(w[g-1],";\n            coords.").concat(w[g-1]," = coords.").concat(w[g-2],";\n            coords.").concat(w[g-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(y,"), 0., 0., 0.);\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," + 1;\n            if (").concat(y[g-1]," < ").concat(f[g-1],") {\n              result.g = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-2]," = ").concat(y[g-2]," + 1;\n            if (").concat(y[g-2]," < ").concat(f[g-2],") {\n              result.a = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," - 1;\n            if (").concat(y[g-2]," < ").concat(f[g-2]," &&\n                ").concat(y[g-1]," < ").concat(f[g-1],") {\n              result.b = getValue(").concat(y,");\n            }\n            ").concat(I.output," = result;\n          }\n        ");return r(r({},e),{output:{dims:f,type:n[0].type,textureType:i.TextureType.packed},shaderSource:D,hasMain:!0})}(t,f,e,n.axis)}})};var u=function(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?"".concat(t," - ").concat(n):t})).join()}},6668:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;var i=n(4910),a=n(5639),s=n(4595);e.concat=function(t,e,n){return d(e),t.session.pack&&e[0].dims.length>1?[t.run((0,s.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(u(t,e,n),e)]};var u=function(t,e,n){var o,i,s=(o=e.length,i=n.cacheKey,{name:"Concat",inputNames:Array.from({length:o},(function(t,e){return"X".concat(e)})),inputTypes:Array(o).fill(a.TextureType.unpacked),cacheHint:i});return r(r({},s),{get:function(){return function(t,e,n,o){var i=n[0].dims.slice();if(o>=i.length||o<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=i.length+o);for(var s=i.slice(0),u=1;u<n.length;u++)for(var d=n[u].dims.slice(),h=0;h<i.length;h++)if(h===o)s[o]+=d[h];else if(i[h]!==d[h])throw new Error("non concat dimensions must match");var g=s.length,y=new Array(n.length),b=0;for(u=0;u<y.length;++u)b+=n[u].dims[o],y[u]=b;var m;m=n.length<5?c(y):l(y);var v=f(n.length,g),w=p(y),_="\n        ".concat(v,"\n        ").concat(w,"\n        ").concat(m,"\n        float process(int indices[").concat(g,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(o,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(o,"] = indices[").concat(o,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return r(r({},e),{output:{dims:s,type:n[0].type,textureType:a.TextureType.unpacked},shaderSource:_})}(0,s,e,n.axis)}})},c=function(t){var e=t.map((function(t,e){return"if(index<".concat(t,") {return ").concat(e,";}\n")}));return"int getTextureWhereDataResides(int index) {\n      ".concat(e.join(""),"\n    }")},l=function(t){return c(t)},f=function(t,e){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(e,"]) {")],r=0;r<t;++r)0===r?n.push("\t"+"if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }")):r===t-1?n.push("\t"+"else { return _X".concat(r,"(indices); }")):n.push("\t"+"else if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }"));return n.push("\t}"),n.join("\n")},p=function(t){for(var e=["int getSizeInConcatAxisValueFromIndex(int index) {"],n=0;n<t.length;++n)0===n?e.push("\t"+"if (index == ".concat(n,") { return ").concat(t[n],"; }")):n===t.length-1?e.push("\t"+"else { return ".concat(t[n],"; }")):e.push("\t"+"else if (index == ".concat(n,") { return ").concat(t[n],"; }"));return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=function(t){return(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")})};var d=function(t){var e,n;if(!t||t.length<1)throw new Error("too few inputs");var r=t[0].type,i=t[0].dims.length;if("string"===r)throw new Error("string tensor is not supported yet");try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.type!==r)throw new Error("input tensors should be one type");if(u.dims.length!==i)throw new Error("input tensors should have the same shape")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},7825:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;var o=n(1315),i=n(6757),a=n(5639),s=n(9754),u=n(2150);e.createUnpackedGroupedConvProgramInfoLoader=function(t,e,n){var c,l,f=(c=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=e.length>2?"value += getBias(output_channel);":"",f=e[0].dims.slice(),p=e[1].dims.slice(),d=p[0]/c.group;o.Logger.verbose("GroupedConv","autpPad:".concat(c.autoPad,", dilations:").concat(c.dilations,", group:").concat(c.group,", kernelShape:").concat(c.kernelShape,", pads:").concat(c.pads,", strides:").concat(c.strides));var h=(0,s.calculateOutputShape)(f,p,c.dilations,c.pads,c.strides),g=(0,i.getGlsl)(t.session.backend.glContext.version),y=(0,u.getActivationSnippet)(c),b=y.activationFunction,m=y.applyActivation,v="\n  const ivec2 strides = ivec2(".concat(c.strides[0],", ").concat(c.strides[1],");\n  const ivec2 pads = ivec2(").concat(c.pads[0],", ").concat(c.pads[1],");\n  ").concat(b,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(d,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(p[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(p[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(p[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(c.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(f[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(p[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(c.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(f[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(l,"\n    ").concat(m,"\n    ").concat(g.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:h,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:v,hasMain:!0})}(t,e,f,n)}})}},7708:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;var r=n(9754),o=n(5950),i=n(5632);e.conv2DPackedPointwise=function(t,e,n){var o=e[0].dims,a=e[1].dims,s=(0,r.calculateOutputShape)(o,a,n.dilations,n.pads,n.strides),u=t.reshapePacked(e[0],[o[1],o[2]*o[3]]),c=t.reshapePacked(e[1],[a[0],a[1]]),l=e.length>2?[c,u,e[2]]:[c,u],f=t.run((0,i.createPackedMatmulProgramInfoLoader)(t,l,n),l);return t.reshapePacked(f,s)},e.conv2DPacked=function(t,e,n){var a=e[0].dims,s=e[1].dims,u=(0,r.calculateOutputShape)(a,s,n.dilations,n.pads,n.strides),c=t.run((0,o.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],u,n),[e[0]]),l=t.reshapePacked(e[1],[s[0],s[1]*s[2]*s[3]]),f=3===e.length?[l,c,e[2]]:[l,c],p=t.run((0,i.createPackedMatmulProgramInfoLoader)(t,f,n),f);return t.reshapePacked(p,u)}},5042:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;var a=n(4910),s=n(6757),u=n(5639),c=n(2150),l=function(t,e,n,r,o,i){return(t-1)*e+n+(r-1)*o+1-i},f=function(t,e,n,r,o){var i=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=i,n[o]=t-i):"SAME_LOWER"===e&&(n[r]=t-i,n[o]=i)};e.convTranspose=function(t,e,n){return g(e,n),p(t,e,n)};var p=function(t,e,n){var r=h(n,e);return[d(t,e,r)]},d=function(t,e,n){return t.run(function(t,e,n){var a,l,f=(a=e.length>2,l=n.cacheKey,{name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,a){var l=e.length>2?"getB(output_channel)":"0.0",f=e[0].dims,p=e[1].dims,d=p[1],h=p[0]/a.group,g=i([e[0].dims[0],e[1].dims[1]*a.group],o(a.outputShape),!1),y=(0,s.getGlsl)(t.session.backend.glContext.version),b=(0,c.getActivationSnippet)(a),m=b.activationFunction,v=b.applyActivation,w="\n  const ivec2 strides = ivec2(".concat(a.strides[0],", ").concat(a.strides[1],");\n  const ivec2 pads = ivec2(").concat(a.pads[0],", ").concat(a.pads[1],");\n  ").concat(m,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(d,";\n    int wOutChannel = output_channel - group_id * ").concat(d,";\n\n    float value = ").concat(l,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(h,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(h," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(p[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(p[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(a.dilations[0],", wHOff * ").concat(a.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(f[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(f[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(v,"\n    ").concat(y.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:g,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:w,hasMain:!0})}(t,e,f,n)}})}(t,e,n),e)},h=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice(),i=t.outputShape.slice();!function(t,e,n,r,o,i,a,s){for(var u=t.length-2,c=0===s.length,p=0;p<u;++p){var d=c?t[p+2]*i[p]:s[p],h=l(t[p+2],i[p],o[p],e[p],n[p],d);f(h,r,o,p,p+u),c&&s.push(i[p]*(t[p+2]-1)+a[p]+(e[p]-1)*n[p]+1-o[p]-o[p+u])}}(e[0].dims,n,t.dilations,t.autoPad,o,t.strides,t.outputPadding,i);var a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:o,outputShape:i,cacheKey:t.cacheKey}),a};e.parseConvTransposeAttributes=function(t){var e=t.attributes,n=(0,c.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),s=e.getInt("group",1),u=e.getInts("kernel_shape",[]),l=e.getInts("output_padding",[0,0]),f=e.getInts("output_shape",[]),p=e.getInts("pads",[0,0,0,0]),d=e.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(r({autoPad:o,dilations:i,group:s,kernelShape:u,outputPadding:l,outputShape:f,pads:p,strides:d},n))};var g=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");var r=t[0].dims.length-2;if(e.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(e.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(e.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(e.outputPadding.length!==r)throw new Error("output_padding should be ".concat(r,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;var a=n(4910),s=n(7273),u=n(7825),c=n(7708),l=n(3281),f=n(2150),p=n(1625),d=n(8276);e.calculateOutputShape=function(t,e,n,r,a){var s,u=t[0],c=t.slice(2),l=c.length,f=e[0],p=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),d=c.map((function(t,e){return t+r[e]+r[e+l]})).map((function(t,e){return Math.floor((t-p[e]+a[e])/a[e])}));return(s=[u,f]).concat.apply(s,i([],o(d),!1))},e.conv=function(t,e,n){return m(e,n),h(t,e,n)};var h=function(t,e,n){var r=b(n,e),o=t.session.pack,i=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[t.run((0,u.createUnpackedGroupedConvProgramInfoLoader)(t,e,r),e)]:i&&o?[g(t,e,r)]:o&&4===e[0].dims.length&&1===e[0].dims[0]&&!i?[(0,c.conv2DPacked)(t,e,r)]:[y(t,e,r)]},g=function(t,n,r){var o=n[0].dims,i=n[1].dims,a=(0,e.calculateOutputShape)(o,i,r.dilations,r.pads,r.strides),s=t.reshapeUnpacked(n[0],[o[1],o[2]*o[3]]),u=t.reshapeUnpacked(n[1],[i[0],i[1]]),c=n.length>2?[u,s,n[2]]:[u,s],l=t.run((0,d.createMatmulProgramInfoLoader)(c,r),c);return t.reshapeUnpacked(l,a)},y=function(t,n,r){var o=n[0].dims,i=n[1].dims,a=(0,e.calculateOutputShape)(o,i,r.dilations,r.pads,r.strides),s=t.run((0,p.createIm2ColProgramInfoLoader)(t,n[0],n[1],a,r),[n[0]]),u=3===n.length?[s,n[1],n[2]]:[s,n[1]];return t.run((0,l.createDotProductProgramInfoLoader)(t,n,a,r),u)},b=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice();s.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,o,t.autoPad);var i=Object.assign({},t);return Object.assign(i,{kernelShape:n,pads:o,cacheKey:t.cacheKey}),i};e.parseConvAttributes=function(t){var e=t.attributes,n=(0,f.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),s=e.getInt("group",1),u=e.getInts("kernel_shape",[]),c=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(r({autoPad:o,dilations:i,group:s,kernelShape:u,pads:c,strides:l},n))};var m=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},6742:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;var o=n(5707);e.depthToSpace=function(t,e,n){i(e);var a=n.blocksize,s=a*a,u="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],c="DCR"===n.mode?[e[0].dims[0],a,a,e[0].dims[1]/s,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/s,a,a,e[0].dims[2],e[0].dims[3]],l=t.reshapeUnpacked(e[0],c),f={perm:u,cacheKey:"".concat(u)},p=r((0,o.transpose)(t,[l],f),1)[0],d=[e[0].dims[0],e[0].dims[1]/s,e[0].dims[2]*a,e[0].dims[3]*a];return[t.reshapeUnpacked(p,d)]},e.parseDepthToSpaceAttributes=function(t){var e=t.attributes.getInt("blocksize");if(e<1)throw new Error("blocksize must be >= 1, but got : ".concat(e," for DepthToSpace"));var n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error("unrecognized mode: ".concat(n," for DepthToSpace"));return{mode:n,blocksize:e}};var i=function(t){if(1!==t.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(t.length));if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;var i=n(7273),a=n(6757),s=n(5639),u=n(2150),c=n(1625);e.createDotProductProgramInfoLoader=function(t,e,n,l){var f=function(t,e){return{name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[s.TextureType.unpacked,s.TextureType.packedLastDimension,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}}(e.length>2,l);return r(r({},f),{get:function(){return function(t,e,n,l,f){var p=n[0].dims,d=n[1].dims,h=[d[0],Math.ceil(p[1]*d[2]*d[3]/4)],g=(0,c.calculateIm2ColDims)(p,d,l),y=o(t.calculateTextureWidthAndHeight(h,s.TextureType.packedLastDimension),2),b=y[0],m=y[1],v=i.ShapeUtil.computeStrides(g),w=o(t.calculateTextureWidthAndHeight(g,s.TextureType.packedLastDimension),2),_=w[0],x=w[1],T=l.length,S=n.length<3?"0.0":"_B(b)",A=Math.ceil(p[1]*d[2]*d[3]/4),O=(0,u.getActivationSnippet)(f),P=O.activationFunction,E=O.applyActivation,I=(0,a.getGlsl)(t.session.backend.glContext.version),D="\n".concat(P,"\nfloat process(int indices[").concat(T,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(v[0]," + im2col[1] * ").concat(v[1]," + im2col[2] * ").concat(v[2],";\n  int kernelOffset = indices[1] * ").concat(h[1],";\n  float value = ").concat(S,";\n  for (int i = 0; i < ").concat(A,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(_,", ").concat(x,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(b,", ").concat(m,");\n    value += dot(").concat(I.texture2D,"(Im2Col, im2colCoords), ").concat(I.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(E,"\n  return value;\n}");return r(r({},e),{output:{dims:l,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:D})}(t,f,e,n,l)}})}},4125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;var r=n(7273);e.flatten=function(t,e,n){o(e,n);var i=r.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},e.parseFlattenAttributes=function(t){return t.attributes.getInt("axis",1)};var o=function(t,e){if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");var n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2150:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;var o=n(7273),i=n(9087);e.getActivationSnippet=function(t){var e;switch(t.activation){case"Relu":e=(0,i.glslRelu)();break;case"Sigmoid":e=(0,i.glslSigmoid)();break;case"Clip":e=(0,i.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}var n=e.name;return{activationFunction:e.body,applyActivation:"value = ".concat(n,"_(value);")}},e.parseInternalActivationAttributes=function(t){var e=t.getString("activation","");if("Clip"===e){var n=r(t.getFloats("activation_params",[o.MIN_CLIP,o.MAX_CLIP]),2),i=n[0],a=n[1];return{activation:e,clipMax:a,clipMin:i,activationCacheKey:"".concat(e,":").concat(i,",").concat(a)}}return{activation:e,activationCacheKey:e}}},6149:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;var o=n(4910),i=n(6145),a=n(7273),s=n(5639);e.gather=function(t,e,n){return l(e,n.axis),[t.run(c(t,e,n),e)]},e.parseGatherAttributes=function(t){return(0,o.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)})};var u={name:"Gather",inputNames:["A","B"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},c=function(t,e,n){var o=r(r({},u),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var i=n[0].dims.slice(),u=n[1].dims.slice(),c=new Array(i.length+u.length-1);o=a.ShapeUtil.normalizeAxis(o,i.length);for(var l=[],f=0;f<c.length;f++)f<o?(c[f]=i[f],l.push("inputIdx[".concat(f,"] = outputIdx[").concat(f,"];"))):f<o+u.length?(c[f]=u[f-o],l.push("indexDataIdx[".concat(f-o,"] = outputIdx[").concat(f,"];"))):(c[f]=i[f-u.length+1],l.push("inputIdx[".concat(f-u.length+1,"] = outputIdx[").concat(f,"];")));var p=c.length||1,d=i.length,h=u.length||1,g="\n      float process(int outputIdx[".concat(p,"]) {\n        int inputIdx[").concat(d,"];\n        int indexDataIdx[").concat(h,"];\n        indexDataIdx[0] = 0;\n        ").concat(l.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(o,"] = idx < 0 ? idx + ").concat(i[o]," : idx;\n        return _A(inputIdx);\n      }");return r(r({},e),{output:{dims:c,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:g})}(0,o,e,n.axis)}})},l=function(t,e){if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");var n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},5378:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;var i=n(4910),a=n(7273),s=n(5639);e.gemm=function(t,e,n){return f(e,n),[t.run(c(e,n),e)]};var u=function(t,e){var n=0!==t.attributes.getInt("transA",0),r=0!==t.attributes.getInt("transB",0),o=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return(0,i.createAttributeWithCacheKey)({transA:n,transB:r,alpha:o,beta:a,isOptionalC:e})};e.parseGemmAttributesV7=function(t){return u(t,!1)},e.parseGemmAttributesV11=function(t){return u(t,!0)};var c=function(t,e){var n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],key:e.cacheKey};return r(r({},n),{get:function(){return l(n,t,e)}})},l=function(t,e,n){var i=e[0].dims.slice(),u=e[1].dims.slice(),c=o(a.GemmUtil.getShapeOfGemmResult(i,n.transA,u,n.transB,3===e.length?e[2].dims:void 0),2),l=[c[0],c[1]];if(!l)throw new Error("Can't use gemm on the given tensors");var f=i[i.length-1],p="";n.transA&&(f=i[0]),n.transA&&n.transB?p="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?p="value += _A_T(a) * _B(b);":!n.transA&&n.transB?p="value += _A(a) * _B_T(b);":n.transA||n.transB||(p="value += _A(a) * _B(b);");var d=l.length,h=3===e.length?"int c[".concat(e[2].dims.length,"];"):"",g=3===e.length?"bcastIndices_C(indices, c);":"",y=3===e.length?"value += beta * _C(c);":"",b="\n      float process(int indices[".concat(d,"]) {\n          int a[").concat(d,"];\n          int b[").concat(d,"];\n          ").concat(h,"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(g,"\n\n          float value = 0.0;\n          for (int k=0; k<").concat(f,"; ++k) {\n              a[").concat(d-1,"] = k;\n              b[").concat(d-2,"] = k;\n              ").concat(p,"\n          }\n\n          value = value * alpha;\n          ").concat(y,"\n          return value;\n      }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:s.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:b})},f=function(t,e){if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},5950:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(5614);e.createPackedIm2ColProgramInfoLoader=function(t,e,n,s,u){var c,l=(c=u.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[i.TextureType.packed],cacheHint:c});return r(r({},l),{get:function(){return function(t,e,n,s,u,c){for(var l=n.dims,f=s.dims,p=u.length,d=[f[1]*f[2]*f[3],u[2]*u[3]],h=f[2]*f[3],g=(0,a.unpackFromChannel)(),y=(0,o.getGlsl)(t.session.backend.glContext.version),b="",m=0;m<=1;m++)for(var v=0;v<=1;v++)b+="\n            blockIndex = rc.x + ".concat(v,";\n            pos = rc.y + ").concat(m,";\n\n            if(blockIndex < ").concat(d[1]," && pos < ").concat(d[0],") {\n              offsetY = int(blockIndex / (").concat(u[p-1],")) * ").concat(c.strides[0]," -\n                ").concat(c.pads[0],";\n              d0 = offsetY + ").concat(c.dilations[0]," * (imod(pos, ").concat(h,") / ").concat(f[2],");\n\n              if(d0 < ").concat(l[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(u[p-1],") * ").concat(c.strides[1]," -\n                  ").concat(c.pads[1],";\n                d1 = offsetX + ").concat(c.dilations[1]," * imod(imod(pos, ").concat(h,"), ").concat(f[2],");\n\n                if(d1 < ").concat(l[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(h,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*m+v,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");var w="\n      ".concat(g,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(b,"\n          ").concat(y.output," = result;\n      }\n            ");return r(r({},e),{output:{dims:d,type:n.type,textureType:i.TextureType.packed},shaderSource:w,hasMain:!0})}(t,l,e,n,s,u)}})}},1625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;var o=n(5639);e.createIm2ColProgramInfoLoader=function(t,n,i,a,s){var u,c=(u=s.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:u});return r(r({},c),{get:function(){return function(t,n,i,a,s,u){var c=i.dims,l=a.dims,f=s.length,p=(0,e.calculateIm2ColDims)(c,l,s,4),d="\n        const int XC = ".concat(c[1],";\n        const int XH = ").concat(c[2],";\n        const int XW = ").concat(c[3],";\n        const int KH = ").concat(u.kernelShape[0],";\n        const int KW = ").concat(u.kernelShape[1],";\n        const int dilationH = ").concat(u.dilations[0],";\n        const int dilationW = ").concat(u.dilations[1],";\n        const int strideH = ").concat(u.strides[0],";\n        const int strideW = ").concat(u.strides[1],";\n        const int padH = ").concat(u.pads[0],";\n        const int padW = ").concat(u.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(f,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(c.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return r(r({},n),{output:{dims:p,type:i.type,textureType:o.TextureType.packedLastDimension},shaderSource:d})}(0,c,n,i,a,s)}})},e.calculateIm2ColDims=function(t,e,n,r){return void 0===r&&(r=4),[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]}},6981:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;var o=n(4910),i=n(5639);e.imageScaler=function(t,e,n){return c(e),[t.run(s(t,e,n),e)]},e.parseImageScalerAttributes=function(t){var e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,o.createAttributeWithCacheKey)({scale:e,bias:n})};var a={name:"ImageScaler",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=function(t,e,n){var o=r(r({},a),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var a=n[0].dims.slice(),s=a.length,c=u(o.bias.length),l="\n      ".concat(c,"\n      float process(int indices[").concat(s,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return r(r({},e),{output:{dims:a,type:n[0].type,textureType:i.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:l})}(0,o,e,n)}})},u=function(t){for(var e=["float getBias(float bias[".concat(t,"], int channel) {")],n=0;n<t;++n)0===n?e.push("\t"+"if (channel == ".concat(n,") { return bias[").concat(n,"]; }")):n===t-1?e.push("\t"+"else { return bias[".concat(n,"]; }")):e.push("\t"+"else if (channel == ".concat(n,") { return bias[").concat(n,"]; }"));return e.push("\t}"),e.join("\n")},c=function(t){if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},7413:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;var i=n(6757),a=n(5639);e.instanceNormalization=function(t,e,n){f(e);var r=t.run(u(e[0]),e);return[t.run(l(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=function(t){return t.attributes.getFloat("epsilon",1e-5)};var s={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},u=function(t){return r(r({},s),{get:function(){return function(t,e){var n=e.dims.slice(),o=n[1],i=n[2]*n[3],s=[n[0],o],u="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(i,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(i,");\n\n        return v;\n      }");return r(r({},t),{output:{dims:s,type:e.type,textureType:a.TextureType.packedLastDimension},shaderSource:u})}(s,t)}})},c={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[a.TextureType.unpacked,a.TextureType.packedLastDimension,a.TextureType.unpacked,a.TextureType.unpacked]},l=function(t,e,n,s){var u=r(r({},c),{cacheHint:"".concat(n)});return r(r({},u),{get:function(){return function(t,e,n,s,u){var c=(0,i.getGlsl)(t.session.backend.glContext.version),l=o(t.calculateTextureWidthAndHeight(u,a.TextureType.packedLastDimension),2),f=l[0],p=l[1],d=o([f/4,p],2),h=d[0],g=d[1],y="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(h,", ").concat(g,");\n        return ").concat(c.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:a.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:s}],shaderSource:y})}(t,u,e,n,s)}})},f=function(t){if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");var e=t[0],n=t[1],r=t[2];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},7006:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createLrnProgramInfoLoader=e.parseLrnAttributes=e.lrn=void 0;var o=n(4910),i=n(5639);e.lrn=function(t,e,n){return u(e),[t.run(s(e,n),e)]},e.parseLrnAttributes=function(t){var e=t.attributes.getFloat("alpha",1e-4),n=t.attributes.getFloat("beta",.75),r=t.attributes.getFloat("bias",1),i=t.attributes.getInt("size");return(0,o.createAttributeWithCacheKey)({alpha:e,beta:n,bias:r,size:i})};var a={name:"LRN",inputNames:["X"],inputTypes:[i.TextureType.unpacked]};function s(t,e){return r(r({},a),{cacheHint:e.cacheKey,get:function(){return function(t,e){var n=t[0].dims[1],o=t[0].dims.length,s=-Math.floor((e.size-1)/2),u=Math.ceil((e.size-1)/2),c="float(".concat(e.alpha,") / float(").concat(e.size,")"),l="float(".concat(e.bias,")"),f="float(".concat(e.beta,")"),p="\n    float process(int indices[".concat(o,"]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ").concat(s,"; i <= ").concat(u,"; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ").concat(n,") {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(").concat(l," + ").concat(c," * square_sum, ").concat(f,");\n    }");return r(r({},a),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:i.TextureType.unpacked},shaderSource:p})}(t,e)}})}e.createLrnProgramInfoLoader=s;var u=function(t){if(!t||1!==t.length)throw new Error("LRN requires 1 input.");if(4!==t[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==t[0].type)throw new Error("input should be float type")}},5632:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;var o=n(7273),i=n(6757),a=n(5639),s=n(432),u=n(2150),c=n(8276);e.createPackedMatmulProgramInfoLoader=function(t,e,n){var l,f,p=(l=e.length>2,f=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[a.TextureType.packed,a.TextureType.packed,a.TextureType.packed]:[a.TextureType.packed,a.TextureType.packed],cacheHint:f});return r(r({},p),{get:function(){return function(t,e,n,l){var f=n.length>2,p=f?"value += getBiasForMatmul();":"",d=n[0].dims,h=n[1].dims,g=o.BroadcastUtil.calcShape(d,h,!0),y=!o.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!g)throw new Error("Can't use matmul on the given tensors");var b=d[d.length-1],m=Math.ceil(b/2),v=d.length,w=h.length,_=(0,i.getGlsl)(t.session.backend.glContext.version),x=(0,s.getCoordsDataType)(g.length),T=g.length,S=(0,s.getGlChannels)(),A=(0,u.getActivationSnippet)(l),O=A.activationFunction,P=A.applyActivation,E=f?"".concat((0,c.getBiasForMatmul)(x,S,n[2].dims,g,!0)):"",I=y?"".concat(function(t,e,n,r){var i=[],a=[],s=n[0].dims,u=n[1].dims,c=s.length,l=u.length,f=r.length,p=f-c,d=f-l;(i=s.map((function(t,n){return"coords.".concat(e[n+p])})))[c-1]="i*2",i.join(", "),(a=u.map((function(t,n){return"coords.".concat(e[n+d])})))[l-2]="i*2",a.join(", ");var h=o.BroadcastUtil.getBroadcastDims(s,r),g=o.BroadcastUtil.getBroadcastDims(u,r),y=h.map((function(t){return"coords.".concat(e[t+p]," = 0;")})).join("\n"),b=g.map((function(t){return"coords.".concat(e[t+d]," = 0;")})).join("\n"),m="int lastDim = coords.".concat(e[f-1],";\n  coords.").concat(e[f-1]," = coords.").concat(e[f-2],";\n  coords.").concat(e[f-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(m,"\n  ").concat(y,"\n  vec4 outputValue = getA(").concat(i,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(t," coords = getOutputCoords();\n  ").concat(m,"\n  ").concat(b,"\n  vec4 outputValue = getB(").concat(a,");\n  return outputValue;\n}")}(x,S,n,g)):"",D=y?"getAAtOutCoordsMatmul(i)":"getA(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+("rc.".concat(t[e-2],", ")+"i*2")}(S,v),")"),k=y?"getBAtOutCoordsMatmul(i)":"getB(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+"i*2, "+"rc.".concat(t[e-1])}(S,w),")"),C=y?"":"".concat(x," rc =\n          getOutputCoords(); int lastDim = rc.").concat(S[T-1],"; rc.").concat(S[T-1]," =\n          rc.").concat(S[T-2],"; rc.").concat(S[T-2]," = lastDim;\n      "),R="\n            ".concat(I,"\n            ").concat(E,"\n            ").concat(O,"\n            void main() {\n              ").concat(C,"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(m,"; i++) {\n                vec4 a = ").concat(D,";\n                vec4 b = ").concat(k,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(p,"\n              ").concat(P,"\n              ").concat(_.output," = value;\n            }");return r(r({},e),{output:{dims:g,type:n[0].type,textureType:a.TextureType.packed},shaderSource:R,hasMain:!0})}(t,p,e,n)}})}},8276:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;var o=n(7273),i=n(5639),a=n(432),s=n(2150),u=n(5632);e.matMul=function(t,e,n){return f(e),t.session.pack?[t.run((0,u.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(l(e,n),e)]},e.parseMatMulAttributes=function(t){return(0,s.parseInternalActivationAttributes)(t.attributes)};var c=function(t,e){return{name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:e}};function l(t,e){var n=c(t.length>2,e.activationCacheKey);return r(r({},n),{get:function(){return function(t,e,n){var u=e[0].dims,c=e[1].dims,l=o.BroadcastUtil.calcShape(u,c,!0);if(!l)throw new Error("Can't use matmul on the given tensors");var f=(0,a.getCoordsDataType)(l.length),d=(0,a.getGlChannels)(),h=(0,s.getActivationSnippet)(n),g=h.activationFunction,y=h.applyActivation,b=e.length>2,m=b?"value += getBiasForMatmul();":"",v=b?"".concat(p(f,d,e[2].dims,l,!1)):"",w=l.length,_=u.length,x=c.length,T=u[u.length-1],S="\n    ".concat(g,"\n    ").concat(v,"\n    float process(int indices[").concat(w,"]) {\n        int a[").concat(_,"];\n        int b[").concat(x,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(T,"; ++k) {\n            a[").concat(_-1,"] = k;\n            b[").concat(x-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(m,"\n        ").concat(y,"\n        return value;\n    }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:S})}(n,t,e)}})}e.createMatmulProgramInfoLoader=l;var f=function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function p(t,e,n,r,i){var a,s=n.length,u=r.length,c=u-s;a=u<2&&s>0?"coords":n.map((function(t,n){return"coords.".concat(e[n+c])})).join(", ");var l=o.BroadcastUtil.getBroadcastDims(n,r).map((function(t){return"coords.".concat(e[t+c]," = 0;")})).join("\n"),f="vec4(outputValue.xx, outputValue.yy)";return 1===o.ShapeUtil.size(n)&&(f="vec4(outputValue.x)"),i?"\nvec4 getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  vec4 outputValue = getBias(").concat(a,");\n  return ").concat(f,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  return getBias(coords.x);\n}")}e.getBiasForMatmul=p},9:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(432),s=n(5614),u={name:"pack",inputNames:["A"],inputTypes:[i.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=function(t,e){return r(r({},u),{get:function(){return function(t,e){var n,c,l,f,p=(0,o.getGlsl)(t.session.backend.glContext.version),d=e.dims,h=d.length,g=e.dims.length,y=(0,a.getCoordsDataType)(g),b=(0,s.getChannels)("rc",g),m=(n=g,c=b,l=d[d.length-2],f=d[d.length-1],0===n||1===n?"":"\n    int r = ".concat(c[n-2],";\n    int c = ").concat(c[n-1],";\n    int rp1 = ").concat(c[n-2]," + 1;\n    int cp1 = ").concat(c[n-1]," + 1;\n    bool rEdge = rp1 >= ").concat(f,";\n    bool cEdge = cp1 >= ").concat(l,";\n    ")),v=function(t,e,n){if(0===t)return"false";if(1===t)return"rc > ".concat(e[0]);for(var r="",o=t-2;o<t;o++)r+="".concat(n[o]," >= ").concat(e[o-t+2]),o<t-1&&(r+="||");return r}(g,0===h?[1,1]:1===h?[d[0],1]:[d[g-1],d[g-2]],b),w=function(t,e){var n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(t[0]," ? 0. : getA(rc + 1),\n            0, 0");var r="";if(n>2)for(var o=0;o<n-2;++o)r+="".concat(e[o],",");return"getA(".concat(r).concat("r, c","),\n          rEdge ? 0. : getA(").concat(r).concat("rp1, c","),\n          cEdge ? 0. : getA(").concat(r).concat("r, cp1","),\n          rEdge || cEdge ? 0. : getA(").concat(r).concat("rp1, cp1",")")}(d,b),_="\n        void main() {\n          ".concat(y," rc = getOutputCoords();\n\n          if(").concat(v,") {\n            ").concat(p.output," = vec4(0);\n          } else {\n            ").concat(m,"\n\n            ").concat(p.output," = vec4(").concat(w,");\n          }\n        }\n      ");return r(r({},u),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.packed},shaderSource:_})}(t,e)}})}},5614:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;var r=n(432);function o(t,e){return(0,r.getGlChannels)(e).map((function(e){return"".concat(t,".").concat(e)}))}e.getVecChannels=o,e.getChannels=function(t,e){return 1===e?[t]:o(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},5565:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;var i=n(4910),a=n(7273),s=n(6757),u=n(5639),c={name:"Pad",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.padV2=function(t,e,n){return p(e),[t.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return f(t,e[0],n)}}),e)]},e.parsePadAttributesV2=function(t){var e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),r=t.attributes.getInts("pads");return(0,i.createAttributeWithCacheKey)({mode:e,value:n,pads:r})},e.padV11=function(t,n,r){d(n);var o=l(t,n,r);return(0,e.padV2)(t,[n[0]],o)},e.parsePadAttributesV11=function(t){return t.attributes.getString("mode","constant")};var l=function(t,e,n){if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");var r=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return(0,i.createAttributeWithCacheKey)({mode:n,pads:r,value:o})},f=function(t,e,n){var r=a.ShapeUtil.padShape(e.dims.slice(),n.pads),o=r.length,i=h(t,e,n),s="\n      ".concat(i,"\n      float process(int[").concat(o,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[u.TextureType.unpacked],output:{dims:r,type:e.type,textureType:u.TextureType.unpacked},shaderSource:s}},p=function(t){if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=function(t){if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},h=function(t,e,n){var r=(0,s.getGlsl)(t.session.backend.glContext.version),i=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),c=i[0],l=i[1],f=a.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return g(r,e.dims,f,c,l,n.pads,n.value);case"reflect":return y(r,e.dims,f,c,l,n.pads);case"edge":return b(r,e.dims,f,c,l,n.pads);default:throw new Error("Invalid mode")}},g=function(t,e,n,r,o,i,a){for(var s=e.length,u="",c=s-1;c>=0;--c)u+="\n        k = m[".concat(c,"] - ").concat(i[c],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(e[c],") return constant;\n        offset += k * ").concat(n[c],";\n        ");return"\n      float padA(int m[".concat(s,"]) {\n        const float constant = float(").concat(a,");\n        int offset = 0;\n        int k = 0;\n        ").concat(u,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},y=function(t,e,n,r,o,i){for(var a=e.length,s="",u=a-1;u>=0;--u)s+="\n        k = m[".concat(u,"] - ").concat(i[u],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(e[u]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(e[u],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(n[u],";\n        ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},b=function(t,e,n,r,o,i){for(var a=e.length,s="",u=a-1;u>=0;--u)s+="\n        k = m[".concat(u,"] - ").concat(i[u],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(e[u],") k = ").concat(e[u]-1,";\n        offset += k * ").concat(n[u],";\n      ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")}},2834:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;var i=n(4910),a=n(7273),s=n(5639);e.averagePool=function(t,e,n){d(e);var o={name:"AveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return u(e,o,!1,n)}}),e)]},e.parseAveragePoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=0!==t.attributes.getInt("count_include_pad",0),o=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),s=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:r,kernelShape:o,strides:a,pads:s})};var u=function(t,e,n,i){var u=o(l(t,i,n),2),c=u[0],f=u[1],p=a.ShapeUtil.size(c.kernelShape),d="";c.countIncludePad?d+="value /= float(".concat(p,");"):d+="value /= float(".concat(p," - pad);");var g=h(t[0].dims,c,"value += _X(x);",d,"0.0"),y="\n        ".concat(g,"\n      ");return r(r({},e),{output:{dims:f,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:y})};e.globalAveragePool=function(t,e,n){d(e);var o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:"".concat(n.countIncludePad)};return[t.run(r(r({},o),{get:function(){return u(e,o,!0,n)}}),e)]},e.parseGlobalAveragePoolAttributes=function(t){var e=0!==t.attributes.getInt("count_include_pad",0);return(0,i.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=function(t,e,n){d(e);var o={name:"MaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return c(e,o,!1,n)}}),e)]},e.parseMaxPoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),s=t.attributes.getInt("storage_order",0),u=t.attributes.getInts("dilations",[]);if(0!==s)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:o,pads:a,storageOrder:s,dilations:u})};var c=function(t,e,n,i){var a=o(l(t,i,n),2),u=a[0],c=a[1],f=h(t[0].dims,u,"\n      value = max(_X(x), value);\n    ","","-1e5"),p="\n      ".concat(f,"\n    ");return r(r({},e),{output:{dims:c,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:p})},l=function(t,e,n){var r=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),i=e.kernelShape.slice(),s=e.strides.slice(),u=o?e.dilations.slice():[],c=e.pads.slice();a.PoolConvUtil.adjustPoolAttributes(n,r,i,s,u,c);var l=a.PoolConvUtil.computePoolOutputShape(n,r,s,u,i,c,e.autoPad),f=Object.assign({},e);return o?Object.assign(f,{kernelShape:i,strides:s,pads:c,dilations:u,cacheKey:e.cacheKey}):Object.assign(f,{kernelShape:i,strides:s,pads:c,cacheKey:e.cacheKey}),[f,l]},f={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},p={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.globalMaxPool=function(t,e){return d(e),[t.run(r(r({},p),{get:function(){return c(e,p,!0,f)}}),e)]};var d=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=function(t,e,n,r,o){var i=t.length;if(e.kernelShape.length<=2){var s,u=e.kernelShape[e.kernelShape.length-1],c=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],f=e.pads[e.pads.length-1],p=t[i-1],d="",h="";if(s=l+f!==0?"\n          for (int i = 0; i < ".concat(u,"; i++) {\n            x[").concat(i," - 1] = indices[").concat(i," - 1] * ").concat(c," - ").concat(l," + i;\n            if (x[").concat(i," - 1] < 0 || x[").concat(i," - 1] >= ").concat(p,") {\n              pad++;\n              continue;\n            }\n            ").concat(n,"\n          }"):"\n          for (int i = 0; i < ".concat(u,"; i++) {\n            x[").concat(i," - 1] = indices[").concat(i," - 1] * ").concat(c," - ").concat(l," + i;\n            ").concat(n,"\n          }"),2===e.kernelShape.length){var b=e.kernelShape[e.kernelShape.length-2],m=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],w=e.pads[e.pads.length-2],_=t[i-2];d=v+w!==0?"\n            for (int j = 0; j < ".concat(b,"; j++) {\n              x[").concat(i," - 2] = indices[").concat(i," - 2] * ").concat(m," - ").concat(v," + j;\n              if (x[").concat(i," - 2] < 0 || x[").concat(i," - 2] >= ").concat(_,") {\n                pad+= ").concat(u,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(b,"; j++) {\n              x[").concat(i," - 2] = indices[").concat(i," - 2] * ").concat(m," - ").concat(v," + j;\n            "),h="\n          }\n        "}return"\n        float process(int indices[".concat(i,"]) {\n          int x[").concat(i,"];\n          copyVec(indices, x);\n\n          float value = ").concat(o,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(s,"\n          ").concat(h,"\n          ").concat(r,"\n          return value;\n        }\n      ")}var x,T=a.ShapeUtil.size(e.kernelShape),S=a.ShapeUtil.computeStrides(e.kernelShape),A=S.length,O=e.pads.length,P=y(A),E=g(t,"inputDims"),I=g(e.pads,"pads"),D=g(S,"kernelStrides"),k=g(e.strides,"strides");return x=e.pads.reduce((function(t,e){return t+e}))?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(n,"\n          }"):"\n          }\n          ".concat(n,"\n        "),"\n        ".concat(P,"\n        float process(int indices[").concat(i,"]) {\n          int x[").concat(i,"];\n          copyVec(indices, x);\n          int offset[").concat(A,"];\n          int pads[").concat(O,"];\n          int inputDims[").concat(i,"];\n          int kernelStrides[").concat(A,"];\n          int strides[").concat(A,"];\n          ").concat(I,"\n          ").concat(E,"\n          ").concat(k,"\n          ").concat(D,"\n\n          float value = ").concat(o,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(T,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(i," - ").concat(A,"; j < ").concat(i,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(i," + ").concat(A,"]\n                + offset[j - ").concat(i," + ").concat(A,"] - pads[j - 2];\n              ").concat(x,"\n          }\n          ").concat(r,"\n\n          return value;\n        }\n      ")},g=function(t,e){for(var n="",r=0;r<t.length;r++)n+="\n      ".concat(e,"[").concat(r,"] = ").concat(t[r],";\n    ");return n},y=function(t){return"\n  void offsetToIndices(int offset, int[".concat(t,"] strides, out int[").concat(t,"] indices) {\n    if (").concat(t," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(t," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(t," - 1] = offset;\n  }")}},1010:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;var o=n(4910),i=n(6145),a=n(7273),s=n(5639),u=function(t,e,n,o,i){l(e);var a={name:o,inputNames:["A"],inputTypes:[s.TextureType.unpacked]};return[t.run(r(r({},a),{cacheHint:n.cacheKey,get:function(){return c(t,e,n,o,i,a)}}),e)]};e.parseReduceAttributes=function(t){var e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,o.createAttributeWithCacheKey)({axes:e,keepDims:n})};var c=function(t,e,n,o,i,u){for(var c=[],l=e[0].dims.length||1,f=[],p=a.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),d=i(e,p),h=d[1],g=0;g<e[0].dims.length;g++)p.indexOf(g)>=0||0===p.length?(n.keepDims&&c.push(1),h="\n          for(int j".concat(g," = 0; j").concat(g," < ").concat(e[0].dims[g],"; j").concat(g,"++) {\n            inputIdx[").concat(g,"] = j").concat(g,";\n            ").concat(h,"\n          }")):(f.push("inputIdx[".concat(g,"] = outputIdx[").concat(c.length,"];")),c.push(e[0].dims[g]));var y=c.length||1,b="\n      float process(int outputIdx[".concat(y,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(l,"];      // addressing input data\n        ").concat(f.join("\n"),"\n        ").concat(d[0],"       // init ops for reduce max/min\n        ").concat(h,"\n        ").concat(d[2],"       // final computation for reduce mean\n        return value;\n      }");return r(r({},u),{output:{dims:c,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:b})},l=function(t){if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=function(t,e,n){return u(t,e,n,"ReduceSum",(function(){return["value = 0.0;","value += _A(inputIdx);",""]}))},e.reduceMean=function(t,e,n){return u(t,e,n,"ReduceMean",(function(t,e){for(var n=1,r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(n,".;")]}))},e.reduceMax=function(t,e,n){return u(t,e,n,"ReduceMax",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""]}))},e.reduceMin=function(t,e,n){return u(t,e,n,"ReduceMin",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""]}))},e.reduceProd=function(t,e,n){return u(t,e,n,"ReduceProd",(function(){return["value = 1.0;","value *= _A(inputIdx);",""]}))},e.reduceLogSum=function(t,e,n){return u(t,e,n,"ReduceLogSum",(function(){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]}))},e.reduceLogSumSquare=function(t,e,n){return u(t,e,n,"ReduceLogSumSquare",(function(){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]}))}},7379:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;var o=n(7273),i=n(6757),a=n(5639),s=n(5614);e.createPackedReshape3DProgramInfoLoader=function(t,e,n){var u=function(t){return{name:"Reshape (packed)",inputTypes:[a.TextureType.packed],inputNames:["A"],cacheHint:"".concat(t)}}(n);return r(r({},u),{get:function(){return function(t,e,n,u){for(var c=e.dims,l=u,f="",p=0;p<4;p++){var d="";switch(p){case 0:d="outputCoords = rc;";break;case 1:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:d="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}f+="\n        ".concat(d,"\n        ").concat(p>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(p,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(p>0?"}":"","\n      ")}var h,g,y,b,m,v=(0,i.getGlsl)(t.session.backend.glContext.version),w="\n      ".concat((h=c,g=o.ShapeUtil.computeStrides(h),y=["b","r","c"],b="index",m=g.map((function(t,e){var n="int ".concat(y[e]," = ").concat(b," / ").concat(t),r=e===g.length-1?"int ".concat(y[e+1]," = ").concat(b," - ").concat(y[e]," * ").concat(t):"index -= ".concat(y[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join(""),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(m,"\n      return ivec3(b, r, c);\n    }\n  ")),"\n      ").concat(function(t){var e=o.ShapeUtil.computeStrides(t);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(e[0]," + coords.z * ").concat(e[1]," + coords.y;\n  }\n")}(l),"\n      ").concat((0,s.unpackFromChannel)(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(l[2],";\n        int cols = ").concat(l[1],";\n\n        ").concat(f,"\n        ").concat(v.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:l,type:e.type,textureType:a.TextureType.packed},shaderSource:w,hasMain:!0})}(t,e,u,n)}})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];for(var e=1,n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){return 0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2])}},8126:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;var r=n(7273);e.reshape=function(t,e){var n=r.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2801:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;var i=n(6757),a=n(5639),s=n(432),u=n(5614),c=n(3980),l={name:"Resize",inputNames:["A"],inputTypes:[a.TextureType.packed]};e.resize=function(t,e,n){return(0,c.validateInputs)(e,n),[t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return f(t,e,n)}}),e)]},e.parseResizeAttributesV10=function(t){return(0,c.parseUpsampleAttributes)(t,10)},e.parseResizeAttributesV11=function(t){return(0,c.parseUpsampleAttributes)(t,11)};var f=function(t,e,n){var c=(0,i.getGlsl)(t.session.backend.glContext.version),f=o(p(e,n),2),d=f[0],h=f[1];if(d.every((function(t){return 1===t}))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return r(r({},l),{output:{dims:h,type:e[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(c.texture2D,"(X, TexCoords);\n                    ").concat(c.output," = v;\n                }")});var g=h.length;if(g<2)throw new Error("output dimension should be at least 2, but got ".concat(g));var y=h[g-2],b=h[g-1],m=e[0].dims;if(g!==m.length)throw new Error("output dimension should match input ".concat(m.length,", but got ").concat(g));var v=m[g-2],w=m[g-1],_=d[g-2],x=d[g-1],T="";if("linear"!==n.mode)throw new Error("resize (packed) does not support mode: '".concat(n.mode,"'"));switch(n.coordinateTransformMode){case"asymmetric":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(b,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(b,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(b,".0 - 1.0, ").concat(y,".0 - 1.0, ").concat(b,".0 - 1.0,\n                            ").concat(y,".0 - 1.0);\n                        vec4 original = vec4(").concat(w,".0 - 1.0, ").concat(v,".0 - 1.0, ").concat(w,".0 - 1.0,\n                            ").concat(v,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(n.coordinateTransformMode,"'"))}var S=(0,s.getCoordsDataType)(g),A=(0,u.unpackFromChannel)(),O="\n            const vec2 inputWH = vec2(".concat(v,".0, ").concat(w,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(_,"), float(").concat(x,"), float(").concat(_,"), float(").concat(x,"));\n            ").concat(A,"\n            ").concat(T,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(S," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(y-1,";\n                bool hasNextCol = rc.z < ").concat(b-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(c.output," = vec4(newValue);\n            }\n        ");return r(r({},l),{output:{dims:h,type:e[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:O})},p=function(t,e){var n,r=t[0].dims,o=e.scales;if(0===o.length){var i=t[e.scalesInputIdx];if(i&&0!==i.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=d(i,e.mode,e.isResize)}else{var a=t[e.sizesInputIdx];if(!a||0===a.size)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(a.integerData),o=h(n,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");var s=n||r.map((function(t,e){return Math.floor(t*o[e])}));return[o,s]},d=function(t,e,n){var r=Array.from(t.floatData);return(0,c.scalesValidation)(r,e,n),r},h=function(t,e,n,r){for(var o=e.length,i=new Array(o),a=0,s=o;a<s;a++)if(0===e[a]){if(0!==t[a])throw new Error("Input dim is zero but required output dim is non-zero.");i[a]=1}else i[a]=t[a]/e[a];return(0,c.scalesValidation)(i,n,r),i}},565:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;var r=n(9240);e.shape=function(t,e){return o(e),[new r.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]};var o=function(t){if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2444:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;var o=n(4910),i=n(6145),a=n(7273),s=n(5639),u={name:"Slice",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.slice=function(t,e,n){return l(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e[0],n)}}),e)]},e.parseSliceAttributes=function(t){var e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),r=t.attributes.getInts("axes",[]);return(0,o.createAttributeWithCacheKey)({starts:e,ends:n,axes:r})};var c=function(t,e,n){for(var o=0===n.axes.length?e.dims.slice(0).map((function(t,e){return e})):n.axes,i=a.ShapeUtil.normalizeAxes(o,e.dims.length),c=n.starts.map((function(t,n){return t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])})),l=n.ends.map((function(t,n){return t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])})),f=e.dims.slice(),p=[],d=0;d<i.length;d++)f[i[d]]=l[d]-c[d],c[d]>0&&p.push("outputIdx[".concat(i[d],"] += ").concat(c[d],";"));var h=f.length,g="\n      float process(int outputIdx[".concat(h,"]) {\n        ").concat(p.join("\n      "),"\n        return _A(outputIdx);\n      }");return r(r({},u),{output:{dims:f,type:e.type,textureType:s.TextureType.unpacked},shaderSource:g})},l=function(t){if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=function(t,e){p(e);var n=f(t,e);return[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e[0],n)}}),[e[0]])]};var f=function(t,e){if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((function(t){return 1!==t})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:r,axes:o,cacheKey:"".concat(o,";").concat(n,";").concat(r)}},p=function(t){if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},815:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;var i=n(4910),a=n(7273),s=n(6757),u=n(5639),c=n(5707),l={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[u.TextureType.unpacked]},f={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked]},p={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]};e.softmax=function(t,e,n){b(e);var r=e[0].dims.slice(),o=a.ShapeUtil.normalizeAxis(n.axis,r.length),i=a.ShapeUtil.sizeToDimension(r,o),s=a.ShapeUtil.sizeFromDimension(r,o);return d(t,e,n,i,s)},e.parseSoftmaxAttributes=function(t){return(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)})},e.parseSoftmaxAttributesV13=function(t){return(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)})},e.softmaxV13=function(t,e,n){b(e);var r,o=e[0].dims.slice(),s=a.ShapeUtil.normalizeAxis(n.axis,o.length),u=o.length,l=s!==u-1,f=[],p=[],h=[];l&&((p=Array.from({length:u}).map((function(t,e){return e})))[s]=u-1,p[u-1]=s,p.map((function(t){return f.push(o[t])})),r=(0,i.createAttributeWithCacheKey)({perm:p}),h=(0,c.transpose)(t,e,r));var g=l?a.ShapeUtil.sizeToDimension(f,u-1):a.ShapeUtil.sizeToDimension(o,u-1),y=l?a.ShapeUtil.sizeFromDimension(f,u-1):a.ShapeUtil.sizeFromDimension(o,u-1),m=d(t,l?h:e,n,g,y);return l?(0,c.transpose)(t,m,r):m};var d=function(t,e,n,o,i){var a=h(t,e[0],o,i,[o]),s=t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return a}}),e),u=g(t,e[0],o,i,a.output.dims,[o]),c=t.run(r(r({},f),{cacheHint:n.cacheKey,get:function(){return u}}),[e[0],s]),d=y(t,e[0],o,i,a.output.dims,u.output.dims);return[t.run(r(r({},p),{cacheHint:n.cacheKey,get:function(){return d}}),[e[0],s,c])]},h=function(t,e,n,i,a){var c=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),f=c[0],p=c[1],d=a.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length)throw new Error("Dimensionality of the output should be 1");if(a[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var h=(0,s.getGlsl)(t.session.backend.glContext.version),g="\n      float process(int[".concat(d,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(i,";\n\n        float max = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(f,",\n        ").concat(p," )));\n        for(int i=1; i<").concat(i,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(f,", ").concat(p,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return r(r({},l),{output:{dims:a,type:e.type,textureType:u.TextureType.unpacked},shaderSource:g})},g=function(t,e,n,i,a,c){var l=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),p=l[0],d=l[1],h=c.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==c.length)throw new Error("Dimensionality of the output should be 1");if(c[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==a.length)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var g=(0,s.getGlsl)(t.session.backend.glContext.version),y="\n      float process(int[".concat(h,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(i,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(i,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat(g.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(p,", ").concat(d,"))) - max);\n        }\n\n        return norm_factor;\n      }");return r(r({},f),{output:{dims:c,type:e.type,textureType:u.TextureType.unpacked},shaderSource:y})},y=function(t,e,n,i,a,s){var c=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),l=c[0],f=c[1],d=e.dims.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length||1!==s.length)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n||s[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n      float process(int[".concat(d,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(l,", ").concat(f,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(i,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return r(r({},p),{output:{dims:e.dims,type:e.type,textureType:u.TextureType.unpacked},shaderSource:h})},b=function(t){if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},564:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;var i=n(4910),a=n(7273),s=n(5639),u={name:"Split",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.split=function(t,e,n){f(e);for(var o=a.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),i=c(t,e,o,n),s=[],p=function(i){s.push(t.run(r(r({},u),{cacheHint:"".concat(n.cacheKey,";").concat(i),get:function(){return l(t,e[0],n,o,i)}}),e))},d=0;d<i;++d)p(d);return s},e.parseSplitAttributes=function(t){var e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),r=t.outputs.length;return(0,i.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:r})};var c=function(t,e,n,r){return o(a.SplitUtil.splitShape(e[0].dims,n,r.split,r.numOutputs),2)[1].length},l=function(t,e,n,i,c){var l=o(a.SplitUtil.splitShape(e.dims,i,n.split,n.numOutputs),2),f=l[0],p=l[1][c],d=f[c],h=d.length,g="\n      float process(int indices[".concat(h,"]) {\n        indices[").concat(i,"] += ").concat(p,";\n        return _A(indices);\n      }\n    ");return r(r({},u),{cacheHint:"".concat(n.cacheKey,":").concat(c),output:{dims:d,type:e.type,textureType:s.TextureType.unpacked},shaderSource:g})},f=function(t){if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},5416:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;var r=n(7273);e.squeeze=function(t,e,n){o(e);var i=r.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},e.squeezeV13=function(t,n){return i(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseSqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},i=function(t){if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},1240:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;var o=n(6757),i=n(5639);e.sum=function(t,e){s(e);var n={name:"Sum",inputNames:e.map((function(t,e){return"X".concat(e)})),inputTypes:new Array(e.length).fill(i.TextureType.unpacked)};return[t.run(r(r({},n),{get:function(){return a(t,e,n)}}),e)]};var a=function(t,e,n){var a=(0,o.getGlsl)(t.session.backend.glContext.version),s=e[0].dims.slice(),u=e.map((function(t,e){return"".concat(a.texture2D,"(X").concat(e,",TexCoords)")})).join(" + "),c="\n      void main() {\n        vec4 result = ".concat(u,";\n        ").concat(a.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:s,type:e[0].type,textureType:i.TextureType.unpacked},hasMain:!0,shaderSource:c})},s=function(t){if(!t||0===t.length)throw new Error("Sum requires inputs.");for(var e=t[0].dims.length,n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(var r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}},5944:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;var o=n(6145),i=n(5639);e.tile=function(t,e){s(e);var n={name:"Tile",inputNames:["A"],inputTypes:[i.TextureType.unpacked]};return[t.run(r(r({},n),{get:function(){return a(t,e,n)}}),e)]};var a=function(t,e,n){for(var o=e[0].dims.slice(),a=new Array(o.length),s=[],u=0;u<o.length;u++)a[u]=o[u]*e[1].numberData[u],s.push("inputIdx[".concat(u,"] = int(mod(float(outputIdx[").concat(u,"]), ").concat(o[u],".));"));var c=a.length,l="\n      float process(int outputIdx[".concat(c,"]) {\n        int inputIdx[").concat(c,"];\n        ").concat(s.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return r(r({},n),{output:{dims:a,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:l})},s=function(t){if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===o.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},5707:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;var a=n(4910),s=n(7273),u=n(5639),c={name:"Transpose",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.transpose=function(t,e,n){return h(e),[t.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return l(t,e[0],n.perm)}}),e)]},e.parseTransposeAttributes=function(t){return(0,a.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])})};var l=function(t,e,n){var o=e.dims;n=f(o,n);var i=p(o,n),a=o.length,s="\n      ".concat(d("perm",n,a),"\n      float process(int indices[").concat(a,"]) {\n        int a[").concat(a,"];\n        perm(a, indices);\n        return _A(a);\n      }");return r(r({},c),{output:{dims:i,type:e.type,textureType:u.TextureType.unpacked},shaderSource:s})},f=function(t,e){return e&&e.length!==t.length&&(e=i([],o(t.keys()),!1).reverse()),e},p=function(t,e){return e=f(t,e),s.ShapeUtil.sortBasedOnPerm(t,e)},d=function(t,e,n){var r=[];r.push("void ".concat(t,"(out int a[").concat(n,"], int src[").concat(n,"]) {"));for(var o=0;o<n;++o)r.push("\ta[".concat(e[o],"]=src[").concat(o,"];"));return r.push("\t}"),r.join("\n")},h=function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},2488:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;var r=n(6757),o=n(5639);e.encodeAsUint8=function(t,e){var n=e.shape,i=(0,r.getGlsl)(t.session.backend.glContext.version),a="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(i.texture2D,"(X,TexCoords).r;\n      ").concat(i.output," = encodeAsUint8(value);\n    }"),s={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:a,hasMain:!0};return t.executeProgram(s,[e.tensor])}},9087:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;var o=n(4910),i=n(7273),a=n(1997),s=n(6757),u=n(5639);function c(){return D("abs")}function l(){return D("acos")}function f(){return D("asin")}function p(){return D("atan")}function d(){return D("ceil")}function h(){return D("cos")}function g(t){var e="elu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function y(){return D("exp")}function b(){return D("floor")}function m(t,e){var n="clip";return{body:"\n  const float min = float(".concat(t,");\n  const float max = float(").concat(e,");\n\n  float ").concat(n,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(n,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:n,type:a.FunctionType.ValueBased}}function v(){var t="indentity";return{body:"\n  float ".concat(t,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return v;\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function w(t){var e="leakyRelu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function _(){return D("log")}function x(){var t="neg";return{body:"\n  float ".concat(t,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return -v;\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function T(){var t="not";return{body:"\n  float ".concat(t,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(t,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(t,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function S(){return D("sin")}function A(){var t="relu";return{body:"\n  float ".concat(t,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function O(){var t="sigmoid";return{body:"\n  float ".concat(t,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function P(){return D("sqrt")}function E(){return D("tan")}function I(){var t="tanh";return{body:"\n  float ".concat(t,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function D(t){return{body:"\n  float ".concat(t,"_(float a) {\n    return ").concat(t,"(a);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return ").concat(t,"(v);\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}e.glslAbs=c,e.glslAcos=l,e.glslAsin=f,e.glslAtan=p,e.glslCeil=d,e.glslCos=h,e.glslElu=g,e.glslExp=y,e.glslFloor=b,e.glslClip=m,e.glslIdentity=v,e.glslLeakyRelu=w,e.glslLog=_,e.glslNeg=x,e.glslNot=T,e.glslSin=S,e.glslRelu=A,e.glslSigmoid=O,e.glslSqrt=P,e.glslTan=E,e.glslTanh=I;var k=function(t,e,n,o){var i=t.session.pack?u.TextureType.packed:u.TextureType.unpacked,a={name:n.name,inputTypes:[i],inputNames:["A"],cacheHint:o};return r(r({},a),{get:function(){return function(t,e,n,o){var i=t.session.pack?u.TextureType.packed:u.TextureType.unpacked,a=(0,s.getGlsl)(t.session.backend.glContext.version);return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:i},shaderSource:"\n     ".concat(o.body,"\n     void main() {\n       vec4 v = ").concat(a.texture2D,"(A, TexCoords);\n       v = ").concat(o.name,"_(v);\n       ").concat(a.output," = v;\n     }\n     "),hasMain:!0})}(t,a,e,n)}})};e.abs=function(t,e){return[t.run(k(t,e[0],c()),e)]},e.acos=function(t,e){return[t.run(k(t,e[0],l()),e)]},e.asin=function(t,e){return[t.run(k(t,e[0],f()),e)]},e.atan=function(t,e){return[t.run(k(t,e[0],p()),e)]},e.clip=function(t,e,n){return[t.run(k(t,e[0],m(n.min,n.max),n.cacheKey),e)]},e.parseClipAttributes=function(t){return(0,o.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",i.MIN_CLIP),max:t.attributes.getFloat("max",i.MAX_CLIP)})},e.clipV11=function(t,n){var r=C(t,n);return(0,e.clip)(t,[n[0]],r)};var C=function(t,e){if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");var n=e.length>=3?e[1].numberData[0]:i.MIN_CLIP,r=e.length>=3?e[2].numberData[0]:i.MAX_CLIP;return(0,o.createAttributeWithCacheKey)({min:n,max:r})};e.ceil=function(t,e){return[t.run(k(t,e[0],d()),e)]},e.cos=function(t,e){return[t.run(k(t,e[0],h()),e)]},e.elu=function(t,e,n){return[t.run(k(t,e[0],g(n.alpha),n.cacheKey),e)]},e.parseEluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)})},e.exp=function(t,e){return[t.run(k(t,e[0],y()),e)]},e.floor=function(t,e){return[t.run(k(t,e[0],b()),e)]},e.identity=function(t,e){return[t.run(k(t,e[0],v()),e)]},e.leakyRelu=function(t,e,n){return[t.run(k(t,e[0],w(n.alpha),n.cacheKey),e)]},e.parseLeakyReluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)})},e.log=function(t,e){return[t.run(k(t,e[0],_()),e)]},e.neg=function(t,e){return[t.run(k(t,e[0],x()),e)]},e.not=function(t,e){return[t.run(k(t,e[0],T()),e)]},e.relu=function(t,e){return[t.run(k(t,e[0],A()),e)]},e.sigmoid=function(t,e){return[t.run(k(t,e[0],O()),e)]},e.sin=function(t,e){return[t.run(k(t,e[0],S()),e)]},e.sqrt=function(t,e){return[t.run(k(t,e[0],P()),e)]},e.tan=function(t,e){return[t.run(k(t,e[0],E()),e)]},e.tanh=function(t,e){return[t.run(k(t,e[0],I()),e)]}},540:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;var o=n(6757),i=n(5639),a=n(432),s=n(5614),u={name:"unpack",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.createUnpackProgramInfo=function(t,e){var n=e.dims.length,c=(0,s.getChannels)("rc",n),l=c.slice(-2),f=(0,a.getCoordsDataType)(n),p=(0,s.unpackFromChannel)(),d=0===e.dims.length?"":function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,c),h=n<=1?"rc":"vec2(".concat(l.join(","),")"),g=(0,o.getGlsl)(t.session.backend.glContext.version),y="\n    ".concat(p,"\n    void main() {\n      ").concat(f," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(d,");\n\n       ").concat(g.output," = vec4(getChannel(packedInput, ").concat(h,"), 0, 0, 0);\n     }\n   ");return r(r({},u),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.unpacked},shaderSource:y})},e.createUnpackProgramInfoLoader=function(t,n){return r(r({},u),{get:function(){return(0,e.createUnpackProgramInfo)(t,n)}})}},7862:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;var r=n(7273);e.unsqueeze=function(t,e,n){o(e);var i=r.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},e.unsqueezeV13=function(t,n){return i(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseUnsqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},i=function(t){if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},3980:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;var a=n(4910),s=n(6757),u=n(5639),c={name:"Upsample",inputNames:["X"],inputTypes:[u.TextureType.unpacked]};e.upsample=function(t,n,o){return(0,e.validateInputs)(n,o),[t.run(r(r({},c),{cacheHint:o.cacheKey,get:function(){return l(t,n,o)}}),n)]},e.parseUpsampleAttributesV7=function(t){return(0,e.parseUpsampleAttributes)(t,7)},e.parseUpsampleAttributesV9=function(t){return(0,e.parseUpsampleAttributes)(t,9)},e.parseUpsampleAttributes=function(t,n){var r=n>=10,o=t.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(n<11||"cubic"!==o))throw new Error("unrecognized mode: ".concat(o));var i=[];n<9&&(i=t.attributes.getFloats("scales"),(0,e.scalesValidation)(i,o,r));var s=t.attributes.getFloat("extrapolation_value",0),u=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u))throw new Error("coordinate_transform_mode '".concat(u,"' is not supported"));var c="tf_crop_and_resize"===u,l=c,f="nearest"===o&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(f))throw new Error("nearest_mode '".concat(f,"' is not supported"));var p=t.attributes.getFloat("cubic_coeff_a",-.75),d=0!==t.attributes.getInt("exclude_outside",0);if(d&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");var h=n<11||"nearest"===o&&"asymmetric"===u&&"floor"===f,g=0,y=0,b=0;return n>10?t.inputs.length>2?(g=1,y=2,b=3):(y=1,b=2):9===n&&(y=1),(0,a.createAttributeWithCacheKey)({opset:n,isResize:r,mode:o,scales:i,extrapolationValue:s,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:c,nearestMode:f,cubicCoefficientA:p,excludeOutside:d,useNearest2xOptimization:h,roiInputIdx:g,scalesInputIdx:y,sizesInputIdx:b})};var l=function(t,e,n){for(var i=(0,s.getGlsl)(t.session.backend.glContext.version),a=o(t.calculateTextureWidthAndHeight(e[0].dims,u.TextureType.unpacked),2),l=a[0],f=a[1],p=e[0].dims.map((function(t,e){return Math.floor(t*n.scales[e])})),d=o(t.calculateTextureWidthAndHeight(p,u.TextureType.unpacked),2),h=d[0],g=d[1],y=p.length,b=new Array(y),m=new Array(y),v="\n      int output_pitches[".concat(y,"];\n      int input_pitches[").concat(y,"];\n      "),w=y-1;w>=0;w--)b[w]=w===y-1?1:b[w+1]*p[w+1],m[w]=w===y-1?1:m[w+1]*e[0].dims[w+1],v+="\n        output_pitches[".concat(w,"] = ").concat(b[w],";\n        input_pitches[").concat(w,"] = ").concat(m[w],";\n        ");var _="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(l,", ").concat(f,");\n        float value = getColorAsFloat(").concat(i.texture2D,"(X, coords));\n        return value;\n      }\n      "),x="nearest"===n.mode?"\n    ".concat(_,"\n    float process(int indices[").concat(y,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(y,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===y?"\n    ".concat(_,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(e[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(_,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(e[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return r(r({},c),{output:{dims:p,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((function(t){return Math.ceil(t)}))}]})};e.validateInputs=function(t,e){if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=function(t,e,n){var r,o,a,s;if(n)try{for(var u=i(t),c=u.next();!c.done;c=u.next())if(c.value<=0)throw new Error("Scale value should be greater than 0.")}catch(t){a={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}else try{for(var l=i(t),f=l.next();!f.done;f=l.next())if(f.value<1)throw new Error("Scale value should be greater than or equal to 1.")}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(n?"Resize":"Upsample"," opeartor."))}},2757:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var i=n(1670),a=n(1315),s=n(8897),u=n(6757),c=function(){function t(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n){var r,o=this;this.profiler.event("op","ProgramManager.run ".concat(null!==(r=t.programInfo.name)&&void 0!==r?r:"unknown kernel"),(function(){var r,i=o.glContext.gl,s=t.program;i.useProgram(s);try{o.bindOutput(n),o.attributesBound||o.bindAttributes(t.attribLocations),o.bindUniforms(t.uniformLocations,null!==(r=t.programInfo.variables)&&void 0!==r?r:[],e)}catch(e){throw a.Logger.error("ProgramManager",t.programInfo.shaderSource),e}o.profiler.event("backend","GlContext.draw()",(function(){o.glContext.draw()}))}),this.glContext)},t.prototype.dispose=function(){var t=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(e){return t.glContext.deleteProgram(e.program)}))},t.prototype.build=function(t,e,n){var r=this;return this.profiler.event("backend","ProgramManager.build",(function(){var o=new s.GlslPreprocessor(r.glContext,t,e,n),i=o.preprocess(),a=r.compile(i);return{programInfo:t,program:a,uniformLocations:r.getUniformLocations(a,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:r.getAttribLocations(a)}}))},t.prototype.compile=function(t){if(!this.vertexShader){a.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var e=(0,u.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}i.env.debug&&a.Logger.verbose("ProrgramManager","FragShader:\n".concat(t,"\n"));var n=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},t.prototype.bindOutput=function(t){var e=t.width,n=t.height;a.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(e,"/").concat(n,", shape=").concat(t.shape,", type=").concat(t.tensor.type)),this.glContext.attachFramebuffer(t.texture,e,n)},t.prototype.bindAttributes=function(t){var e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0},t.prototype.bindUniforms=function(t,e,n){var r,i,a,s=this.glContext.gl,u=0,c=function(t,r,o,i){var c=null===(a=e.find((function(e){return e.name===t})))||void 0===a?void 0:a.data;if("sampler2D"!==r&&!c)throw new Error("variable '".concat(t,"' does not have data defined in program info"));switch(r){case"sampler2D":l.bindTexture(n[u],o,u),u++;break;case"float":i?s.uniform1fv(o,c):s.uniform1f(o,c);break;case"int":i?s.uniform1iv(o,c):s.uniform1i(o,c);break;default:throw new Error("Uniform not implemented: ".concat(r))}},l=this;try{for(var f=o(t),p=f.next();!p.done;p=f.next()){var d=p.value;c(d.name,d.type,d.location,d.arrayLength)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}},t.prototype.bindTexture=function(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)},t.prototype.getAttribLocations=function(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}},t.prototype.getUniformLocations=function(t,e,n){var i,a,s,u,c=[];if(e)try{for(var l=o(e),f=l.next();!f.done;f=l.next()){var p=f.value;c.push({name:p,type:"sampler2D",location:this.getUniformLocation(t,p)})}}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(n)try{for(var d=o(n),h=d.next();!h.done;h=d.next()){var g=h.value;c.push(r(r({},g),{location:this.getUniformLocation(t,g.name)}))}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return c},t.prototype.getUniformLocation=function(t,e){var n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error("Uniform ".concat(e," not found."));return n},t.prototype.getAttribLocation=function(t,e){return this.glContext.gl.getAttribLocation(t,e)},t}();e.ProgramManager=c},2171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;var r=n(1315),o=n(5881),i=n(7860),a=n(4110),s=n(2757),u=n(7618),c=n(5243),l=function(){function t(t,e){this.backend=t,this.context=e,this.layoutStrategy=new u.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new s.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new c.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}return t.prototype.createInferenceHandler=function(){return new i.WebGLInferenceHandler(this)},t.prototype.onGraphInitialized=function(t){var e=t.getValues().filter((function(t){return-1===t.from&&t.tensor})).map((function(t){return t.tensor.dataId}));this.initializers=new Set(e)},t.prototype.isInitializer=function(t){return!!this.initializers&&this.initializers.has(t)},t.prototype.addInitializer=function(t){this.initializers.add(t)},t.prototype.getTextureData=function(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)},t.prototype.dispose=function(){var t=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.unpackedTextureDataCache=new Map},t.prototype.resolve=function(t,e,n){var r=(0,o.resolveOperator)(t,e,a.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}},t}();e.WebGLSessionHandler=l},9622:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;var r=n(1315),o=function(){function t(t,e){if(void 0===e&&(e=1),1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}return t.prototype.encode=function(t,e){var n,o;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),o=t,n=this.allocate(e*this.channelSize),o.forEach((function(t,e){return n[e]=t}))):n=o=t,n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RedFloat32DataEncoder=o;var i=function(){function t(t,e,n){if(void 0===e&&(e=1),1!==e&&4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}return t.prototype.encode=function(t,e){var n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((function(t,e){return n[4*e]=t}))),n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RGBAFloatDataEncoder=i;var a=function(){function t(t,e){if(void 0===e&&(e=1),this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}return t.prototype.encode=function(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},t.prototype.allocate=function(t){return new Uint8Array(t*this.channelSize)},t.prototype.decode=function(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: ".concat(t.constructor))},t}();e.Uint8DataEncoder=a},7618:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(1315),o=n(7273),i=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){if(0===t.length)return[1,1];var n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var o=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),i=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(o>n||i>n))return[o,i];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}for(var a=t.reduce((function(t,e){return t*e})),s=Math.floor(Math.sqrt(a));s<n&&s<a&&a%s!=0;s++);if(s>=n||a%s!=0)throw new Error("The given dimensions are outside this GPU's boundaries: ".concat(t));return[s,a/s]},t}();e.AlwaysKeepOriginalSizeStrategy=i;var a=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){var n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n},t.prototype.computeTexture=function(t,e){var n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];var o=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var i=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),a=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(i>o||a>o))return[i,a];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}var u=t.slice(0);if(n&&(o*=2,1===(u=u.map((function(t,e){return e>=u.length-2?u[e]%2==0?u[e]:u[e]+1:u[e]}))).length&&(u=[2,u[0]])),2!==u.length){var c=s(u);u=c.newShape}var p=l(u);return u.length<=1&&p<=o?[1,p]:2===u.length&&u[0]<=o&&u[1]<=o?u:3===u.length&&u[0]*u[1]<=o&&u[2]<=o?[u[0]*u[1],u[2]]:3===u.length&&u[0]<=o&&u[1]*u[2]<=o?[u[0],u[1]*u[2]]:4===u.length&&u[0]*u[1]*u[2]<=o&&u[3]<=o?[u[0]*u[1]*u[2],u[3]]:4===u.length&&u[0]<=o&&u[1]*u[2]*u[3]<=o?[u[0],u[1]*u[2]*u[3]]:n?f(p/4).map((function(t){return 2*t})):f(p)},t}();function s(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,i=null==e||o?null:u(e,t).sort(),a=0,s=0;s<t.length;++s){if(null!=i){if(i[a]===s&&1!==t[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(t[s],"' is not 1"));(null==i[a]||i[a]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),i[a]<=s&&a++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function u(t,e){var n=e.length;return t=null==t?e.map((function(t,e){return e})):[].concat(t),(0,o.assert)(t.every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)})),(0,o.assert)(t.every(c),(function(){return"All values in axis param must be integers but "+"got axis ".concat(t)})),t.map((function(t){return t<0?n+t:t}))}function c(t){return t%1==0}function l(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function f(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.PreferLogicalStrategy=a,e.squeezeShape=s,e.parseAxisParam=u,e.isInt=c,e.sizeFromShape=l,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=f,e.getBatchDim=function(t,e){return void 0===e&&(e=2),l(t.slice(0,t.length-e))}},3314:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;var o=n(7273),i=n(5639);e.createTextureLayoutFromTextureType=function(t,n,r){var o=r===i.TextureType.unpacked||r===i.TextureType.unpackedReversed?1:4,a=r===i.TextureType.packed,s=r===i.TextureType.unpackedReversed||r===i.TextureType.packed,u=r===i.TextureType.packedLastDimension?n.length-1:void 0,c=r===i.TextureType.packedLastDimension?n.map((function(t,e){return e===n.length-1?4*t:t})):void 0;return(0,e.createTextureLayoutFromShape)(t,n,o,c,{isPacked:a,reverseWH:s,breakAxis:u})},e.calculateTextureWidthAndHeight=function(t,n,r){var o=(0,e.createTextureLayoutFromTextureType)(t,n,r);return[o.width,o.height]},e.createTextureLayoutFromShape=function(t,e,n,i,a){void 0===n&&(n=1);var s=!(!a||!a.isPacked),u=r(t.computeTextureWH(s&&i||e,a),2),c=u[0],l=u[1],f=e.length,p=e.slice(0);if(0===f&&(p=[1]),1===n)i=e;else if(s){if(4!==n)throw new Error("a packed texture must be 4-channel");i=e,f>0&&(p[f-1]=Math.ceil(p[f-1]/2)),f>1&&(p[f-2]=Math.ceil(p[f-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:c,height:l,channels:n,isPacked:s,shape:p,strides:o.ShapeUtil.computeStrides(p),unpackedShape:i,reversedWH:a&&a.reverseWH}}},5243:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var i=n(1315),a=function(){function t(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return t.prototype.createTextureFromLayout=function(t,e,n,r){var o=this.toEncoderType(t),a=this.glContext.getEncoder(o,e.channels||1,r);if(e.isPacked&&1===r)throw new Error("not implemented");var s,u,c=e.width,l=e.height;if(this.config.reuseTextures){s="".concat(c,"x").concat(l,"_").concat(a.format,"_").concat(a.internalFormat,"_").concat(a.textureType),(u=this.inUseTextures.get(s))||(u=[],this.inUseTextures.set(s,u));var f=this.idleTextures.get(s);if(f&&f.length>0){var p=f.pop();return u.push(p),1===r&&this.glContext.updateTexture(p,c,l,a,this.toTextureData(t,n)),p}}i.Logger.verbose("TextureManager","Creating new texture of size ".concat(e.width,"x").concat(e.height));var d=this.glContext.allocateTexture(c,l,a,this.toTextureData(t,n));return this.config.reuseTextures&&(u.push(d),this.textureLookup.set(d,s)),d},t.prototype.readTexture=function(t,e,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var o=t.shape.reduce((function(t,e){return t*e}))*n,i=r.glContext.readTexture(t.texture,t.width,t.height,o,r.toEncoderType(e),n);return r.toTensorData(e,i)}))},t.prototype.readTextureAsync=function(t,e,n){return r(this,void 0,void 0,(function(){var i,a,s=this;return o(this,(function(u){return i=t.tensor.dataId,n||(n=1),this.pendingRead.has(i)?(a=this.pendingRead.get(i),[2,new Promise((function(t){return null==a?void 0:a.push(t)}))]):[2,this.profiler.event("backend","TextureManager.readTextureAsync",(function(){return r(s,void 0,void 0,(function(){var r,a,s,u;return o(this,(function(o){switch(o.label){case 0:return this.pendingRead.set(i,[]),r=t.shape.reduce((function(t,e){return t*e}))*n,[4,this.glContext.createAndWaitForFence()];case 1:return o.sent(),a=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n),s=this.toTensorData(e,a),u=this.pendingRead.get(i),this.pendingRead.delete(i),null==u||u.forEach((function(t){return t(s)})),[2,s]}}))}))}))]}))}))},t.prototype.readUint8TextureAsFloat=function(t){var e=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=t.shape.reduce((function(t,e){return t*e})),r=e.glContext.readTexture(t.texture,t.width,t.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},t.prototype.releaseTexture=function(t,e){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture))){e&&this.textureLookup.delete(n);var r=this.inUseTextures.get(n);if(r){var o=r.indexOf(t.texture);if(-1!==o){r.splice(o,1);var a=this.idleTextures.get(n);a||(a=[],this.idleTextures.set(n,a)),a.push(t.texture)}}}n&&!e||(i.Logger.verbose("TextureManager","Deleting texture of size ".concat(t.width,"x").concat(t.height)),this.glContext.deleteTexture(t.texture))},t.prototype.toTensorData=function(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error("TensorData type ".concat(t," is not supported"))}},t.prototype.toTextureData=function(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)},t.prototype.toEncoderType=function(t){return"float"},t.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},t}();e.TextureManager=a},5639:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},432:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;var i=n(7273);e.getPackedShape=function(t){var e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=function(t,e,n){return void 0===e&&(e=function(t){return 0}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r,o){var i=0,a=function(){if(t())r();else{i++;var s=e(i);null!=n&&i>=n?o():setTimeout(a,s)}};a()}))]}))}))},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,i.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,i.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){return JSON.parse(JSON.stringify(t)),e},e.getSqueezedParams=function(t,e){return e.map((function(e){return t[e]})).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))},e.getGlChannels=function(t){return void 0===t&&(t=6),["x","y","z","w","u","v"].slice(0,t)}},3389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;var r=n(1315),o=n(3524),i={};function a(t){var e,n=function(){if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var t=document.createElement("canvas");return t.width=1,t.height=1,t}(),i={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(e=n.getContext("webgl2",i)))try{return new o.WebGLContext(e,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(t))}if((!t||"webgl"===t)&&(e=n.getContext("webgl",i)||n.getContext("experimental-webgl",i)))try{return new o.WebGLContext(e,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(t))}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){var n;e&&"webgl2"!==e||!("webgl2"in i)?e&&"webgl"!==e||!("webgl"in i)||(n=i.webgl):n=i.webgl2,n=n||a(e),e=e||1===n.version?"webgl":"webgl2";var r=n.gl;return i[e]=n,r.isContextLost()?(delete i[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=a},3524:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;var u=n(1670),c=i(n(9622)),l=n(432);function f(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=f;var p=function(){function t(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return t.prototype.allocateTexture=function(t,e,n,r){var o=this.gl,i=o.createTexture();o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=r?n.encode(r,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,a),this.checkError(),i},t.prototype.updateTexture=function(t,e,n,r,o){var i=this.gl;i.bindTexture(i.TEXTURE_2D,t);var a=r.encode(o,e*n);i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,a),this.checkError()},t.prototype.attachFramebuffer=function(t,e,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)},t.prototype.readTexture=function(t,e,n,r,o,i){var a=this.gl;i||(i=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);var s=this.getEncoder(o,i),u=s.allocate(e*n);return a.bindTexture(a.TEXTURE_2D,t),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.readPixels(0,0,e,n,a.RGBA,s.textureType,u),this.checkError(),s.decode(u,r)},t.prototype.isFramebufferReady=function(){return!0},t.prototype.getActiveTexture=function(){var t=this.gl,e=t.getParameter(this.gl.ACTIVE_TEXTURE);return"TEXTURE".concat(e-t.TEXTURE0)},t.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},t.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},t.prototype.setVertexAttributes=function(t,e){var n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()},t.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r},t.prototype.compileShader=function(t,e){var n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type ".concat(e));if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(n.getShaderInfoLog(r),"\nShader source:\n").concat(t));return r},t.prototype.deleteShader=function(t){this.gl.deleteShader(t)},t.prototype.bindTextureToUniform=function(t,e,n){var r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()},t.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},t.prototype.checkError=function(){if(u.env.debug){var t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: ".concat(e.toString(16))}throw new Error(n)}},t.prototype.deleteTexture=function(t){this.gl.deleteTexture(t)},t.prototype.deleteProgram=function(t){this.gl.deleteProgram(t)},t.prototype.getEncoder=function(t,e,n){if(void 0===n&&(n=0),2===this.version)return new c.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new c.RGBAFloatDataEncoder(this.gl,e):new c.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new c.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: ".concat(t))}},t.prototype.clearActiveTextures=function(){for(var t=this.gl,e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)},t.prototype.dispose=function(){if(!this.disposed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}},t.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},t.prototype.createVertexbuffer=function(){var t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e},t.prototype.createFramebuffer=function(){var t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t},t.prototype.queryVitalParameters=function(){var t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version},t.prototype.getExtensions=function(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},t.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);var n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),o},t.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Blend=function(){var t,e,n,r,o,i=this.gl;try{t=i.createTexture(),e=i.createFramebuffer(),i.bindTexture(i.TEXTURE_2D,t);var a=2===this.version?i.RGBA32F:i.RGBA;return i.texImage2D(i.TEXTURE_2D,0,a,1,1,0,i.RGBA,i.FLOAT,null),i.bindFramebuffer(i.FRAMEBUFFER,e),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.enable(i.BLEND),!!(n=i.createShader(i.VERTEX_SHADER))&&(i.shaderSource(n,"void main(){}"),i.compileShader(n),!!(r=i.createShader(i.FRAGMENT_SHADER))&&(i.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),i.compileShader(r),!!(o=i.createProgram())&&(i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),i.useProgram(o),i.drawArrays(i.POINTS,0,1),i.getError()===i.NO_ERROR)))}finally{i.disable(i.BLEND),o&&i.deleteProgram(o),n&&i.deleteShader(n),r&&i.deleteShader(r),e&&(i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(e)),t&&(i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(t))}},t.prototype.beginTimer=function(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){var t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")},t.prototype.endTimer=function(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)},t.prototype.isTimerResultAvailable=function(t){var e,n;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var r=this.gl,o=this.disjointTimerQueryWebgl2Extension;return e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(o.GPU_DISJOINT_EXT),e&&!n},t.prototype.getTimerResult=function(t){var e;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");var n=this.gl;return e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t),e/1e6},t.prototype.waitForQueryAndGetTime=function(t){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){switch(n.label){case 0:return[4,(0,l.repeatedTry)((function(){return e.isTimerResultAvailable(t)}))];case 1:return n.sent(),[2,this.getTimerResult(t)]}}))}))},t.prototype.createAndWaitForFence=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){return t=this.createFence(this.gl),[2,this.pollFence(t)]}))}))},t.prototype.createFence=function(t){var e=t,n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),{query:n,isFencePassed:null===n?function(){return!0}:function(){var t=e.clientWaitSync(n,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}}},t.prototype.pollFence=function(t){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){return[2,new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))]}))}))},t.prototype.pollItems=function(){for(var t=f(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1?[2]:[4,(0,l.repeatedTry)((function(){return n.pollItems(),0===n.itemsToPoll.length}))];case 1:return r.sent(),[2]}}))}))},t}();e.WebGLContext=p},6496:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;var u=n(1315),c=function(t,e){this.op=t,this.node=e},l=function(){function t(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}return t.prototype.initialize=function(t){var e=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=e.graph.getNodes();if(n.length!==t.length)throw new Error("The size of nodes and OPs do not match.");e._ops=t.map((function(t,e){return new c(t,n[e])})),e.reset(),e._starter=[],e._ops.forEach((function(t,n){var r,o,a=!0;try{for(var s=i(t.node.inputs),u=s.next();!u.done;u=s.next()){var c=u.value;if(!e._values[c]&&-1===e.graph.getInputIndices().indexOf(c)){a=!1;break}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}a&&e._starter.push(n)}))}))},t.prototype.reset=function(){this._values=this.graph.getValues().map((function(t){return t.tensor}))},t.prototype.execute=function(t,e){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(c){return[2,this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,c,l,f,p,d,h,g,y,b,m,v,w=this;return o(this,(function(_){switch(_.label){case 0:if(this.reset(),n=t.createInferenceHandler(),c=this.graph.getInputIndices(),e.length!==c.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(e.length," expected: ").concat(c.length));e.forEach((function(t,e){var n=c[e];w._values[n]=t})),l=this._starter.slice(0),f=this.graph.getValues(),p=this.graph.getNodes(),d=0,h=function(){var t,e,c,h,y,b;return o(this,(function(m){switch(m.label){case 0:if(t=l[d++],e=g._ops[t],c=e.node.inputs.map((function(t){return w._values[t]})),-1!==c.indexOf(void 0))throw new Error("unresolved input detected: op: ".concat(e.node));return h=c,u.Logger.verbose("ExecPlan","Runing op:".concat(e.node.name," (").concat(h.map((function(t,n){return"'".concat(e.node.inputs[n],"': ").concat(t.type,"[").concat(t.dims.join(","),"]")})).join(", "),")")),[4,g.profiler.event("node",e.node.name,(function(){return r(w,void 0,void 0,(function(){return o(this,(function(t){return[2,e.op.impl(n,h,e.op.context)]}))}))}))];case 1:if((y=m.sent()).length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");return y.forEach((function(t,n){var r=e.node.outputs[n];if(w._values[r])throw new Error("output [".concat(r,"] already has value: op:").concat(e.node.name));w._values[r]=t})),b=new Set,y.forEach((function(t,n){var r,o,a,s,u=e.node.outputs[n];try{for(var c=(r=void 0,i(f[u].to)),l=c.next();!l.done;l=c.next()){var d=l.value,h=p[d],g=!0;try{for(var y=(a=void 0,i(h.inputs)),m=y.next();!m.done;m=y.next()){var v=m.value;if(!w._values[v]){g=!1;break}}}catch(t){a={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g&&b.add(d)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}})),l.push.apply(l,s([],a(b),!1)),[2]}}))},g=this,_.label=1;case 1:return d<l.length?[5,h()]:[3,3];case 2:return _.sent(),[3,1];case 3:y=[],b=0,_.label=4;case 4:if(!(b<this.graph.getOutputIndices().length))return[3,9];if(m=this.graph.getOutputIndices()[b],void 0===(v=this._values[m]))throw new Error("required output [".concat(m,"] does not have value"));return 0!==m?[3,6]:[4,v.getData()];case 5:return _.sent(),[3,7];case 6:v.data,_.label=7;case 7:y.push(v),_.label=8;case 8:return b++,[3,4];case 9:return u.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,y]}}))}))}))]}))}))},t}();e.ExecutionPlan=l},4662:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var o=n(1446),i=n(6874),a=n(1287),s=n(9240),u=n(7273),c=a.onnxruntime.experimental.fbs;e.Graph={from:function(t,e){return new p(t,e)}};var l=function(){function t(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=u.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}return Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),t}(),f=function(t,e){t instanceof o.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new i.Attribute(t.attribute)):t instanceof c.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new i.Attribute(u.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0},p=function(){function t(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}return t.prototype.getInputIndices=function(){return this._allInputIndices},t.prototype.getInputNames=function(){return this._allInputNames},t.prototype.getOutputIndices=function(){return this._allOutputIndices},t.prototype.getOutputNames=function(){return this._allOutputNames},t.prototype.getValues=function(){return this._allData},t.prototype.getNodes=function(){return this._nodes},t.prototype.buildGraph=function(t){if(t instanceof o.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof c.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}},t.prototype.buildGraphFromOnnxFormat=function(t){var e,n,o,i,a,c,p,d,h,g,y,b,m=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var v=new Map;if(!t.input)throw new Error("missing information in graph: input");var w=[];try{for(var _=r(t.input),x=_.next();!x.done;x=_.next()){var T=x.value;if(m.has(T.name))throw new Error("duplicated input name: ".concat(T.name));var S=this._allData.push(new l(T))-1;m.set(T.name,S),w.push(T.name)}}catch(t){e={error:t}}finally{try{x&&!x.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}if(!t.initializer)throw new Error("missing information in graph: initializer");try{for(var A=r(t.initializer),O=A.next();!O.done;O=A.next()){T=O.value;var P=m.get(T.name);if(void 0===P){var E=new l;E.type={shape:{dims:u.ProtoUtil.tensorDimsFromProto(T.dims)},tensorType:u.ProtoUtil.tensorDataTypeFromProto(T.dataType)},P=this._allData.push(E)-1,m.set(T.name,P)}this._allData[P]._from=-1,this._allData[P].tensor=s.Tensor.fromProto(T)}}catch(t){o={error:t}}finally{try{O&&!O.done&&(i=A.return)&&i.call(A)}finally{if(o)throw o.error}}for(T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(w[T]));if(!t.output)throw new Error("missing information in graph: output");try{for(var I=r(t.output),D=I.next();!D.done;D=I.next()){if(T=D.value,m.has(T.name))throw new Error("duplicated output name: ".concat(T.name));S=this._allData.push(new l(T))-1,m.set(T.name,S),this._allOutputIndices.push(S),this._allOutputNames.push(T.name)}}catch(t){a={error:t}}finally{try{D&&!D.done&&(c=I.return)&&c.call(I)}finally{if(a)throw a.error}}if(!t.node)throw new Error("missing information in graph: node");try{for(var k=r(t.node),C=k.next();!C.done;C=k.next()){if(!(U=C.value).name)for(var R=0;;R++){var F="unnamed_".concat(U.opType,"_").concat(R);if(!v.has(F)){U.name=F;break}}if(v.has(U.name))throw new Error("duplicated node name: ".concat(U.name));S=this._nodes.push(new f(U))-1,v.set(U.name,S)}}catch(t){p={error:t}}finally{try{C&&!C.done&&(d=k.return)&&d.call(k)}finally{if(p)throw p.error}}for(T=0;T<this._nodes.length;T++){var M=this._nodes[T];if(!(U=t.node[T]).output)throw new Error("missing output for node: ".concat(U.name));try{for(var N=(h=void 0,r(U.output)),L=N.next();!L.done;L=N.next()){var j=L.value;if(void 0===(G=m.get(j))&&(G=this._allData.push(new l)-1,m.set(j,G)),M.outputs.push(G),void 0!==this._allData[G]._from)throw new Error("multiple nodes output to one data value: ".concat(G));if(this._allData[G]._from=T,"Constant"===U.opType){if(!U.attribute||1!==U.attribute.length||!U.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!U.output||1!==U.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");M.outputs.pop(),M.executeNode=!1,this._allData[G]._from=-1,this._allData[G].tensor=s.Tensor.fromProto(U.attribute[0].t)}}}catch(t){h={error:t}}finally{try{L&&!L.done&&(g=N.return)&&g.call(N)}finally{if(h)throw h.error}}}for(T=0;T<this._nodes.length;T++){var U;if(M=this._nodes[T],!(U=t.node[T]).input)throw new Error("missing input for node: ".concat(U.name));try{for(var B=(y=void 0,r(U.input)),V=B.next();!V.done;V=B.next()){var G,z=V.value;if(void 0===(G=m.get(z))){if(""===z&&3===U.input.length&&"Resize"===U.opType)continue;throw new Error("unrecognized input '".concat(z,"' for node: ").concat(U.name))}M.inputs.push(G),this._allData[G]._to.push(T)}}catch(t){y={error:t}}finally{try{V&&!V.done&&(b=B.return)&&b.call(B)}finally{if(y)throw y.error}}}return!0},t.prototype.buildGraphFromOrtFormat=function(t){var e,n,r,o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];for(var i=new Map,a=[],p=0;p<t.inputsLength();p++){var d=t.inputs(p);if(o.has(d))throw new Error("duplicated input name: ".concat(d));for(var h=0;h<t.nodeArgsLength();h++)if((null===(e=t.nodeArgs(h))||void 0===e?void 0:e.name())===d){var g=new l;if((null===(r=null===(n=t.nodeArgs(h))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==c.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");for(var y=t.nodeArgs(h).type().value(new c.TensorTypeAndShape),b=u.ProtoUtil.tensorDataTypeFromProto(y.elemType()),m=y.shape(),v=[],w=0;w<m.dimLength();w++)v.push(u.LongUtil.longToNumber(m.dim(w).value().dimValue()));g.type={shape:{dims:v},tensorType:b};var _=this._allData.push(g)-1;o.set(d,_),a.push(d)}}for(p=0;p<t.initializersLength();p++){var x=t.initializers(p),T=o.get(x.name());void 0===T&&(g=new l,v=u.ProtoUtil.tensorDimsFromORTFormat(x),b=u.ProtoUtil.tensorDataTypeFromProto(x.dataType()),g.type={shape:{dims:v},tensorType:b},T=this._allData.push(g)-1,o.set(x.name(),T)),this._allData[T]._from=-1,this._allData[T].tensor=s.Tensor.fromOrtTensor(x)}for(p=0;p<this._allData.length;p++)this._allData[p].tensor||(this._allInputIndices.push(p),this._allInputNames.push(a[p]));for(p=0;p<t.outputsLength();p++){var S=t.outputs(p);if(o.has(S))throw new Error("duplicated output name: ".concat(S));_=this._allData.push(new l)-1,o.set(S,_),this._allOutputIndices.push(_),this._allOutputNames.push(S)}if(!t.nodes)throw new Error("missing information in graph: node");for(p=0;p<t.nodesLength();p++){var A=(I=t.nodes(p)).name();if(!A)for(var O=0;A="unnamed_".concat(I.opType(),"_").concat(O),i.has(A);O++);if(i.has(A))throw new Error("duplicated node name: ".concat(A));_=this._nodes.push(new f(I,A))-1,i.set(A,_)}for(p=0;p<this._nodes.length;p++){var P=this._nodes[p];if(null==(I=t.nodes(p)))throw new Error("No node exists at index ".concat(p));if(0===(null==I?void 0:I.outputsLength()))throw new Error("missing output for node: ".concat(I.name));for(h=0;h<(null==I?void 0:I.outputsLength());h++){var E=null==I?void 0:I.outputs(h);if(void 0===(D=o.get(E))&&(D=this._allData.push(new l)-1,o.set(E,D)),P.outputs.push(D),void 0!==this._allData[D]._from)throw new Error("multiple nodes output to one data value: ".concat(D));if(this._allData[D]._from=p,"Constant"===I.opType()){if(1!==I.attributesLength()||!I.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==I.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");P.outputs.pop(),P.executeNode=!1,this._allData[D]._from=-1,this._allData[D].tensor=s.Tensor.fromOrtTensor(I.attributes(0).t())}}}for(p=0;p<this._nodes.length;p++){var I;if(P=this._nodes[p],0===(I=t.nodes(p)).inputsLength())throw new Error("missing input for node: ".concat(I.name));for(h=0;h<I.inputsLength();h++){var D,k=I.inputs(h);if(void 0===(D=o.get(k)))throw new Error("unrecognized input '".concat(k,"' for node: ").concat(I.name()));P.inputs.push(D),this._allData[D]._to.push(p)}}},t.prototype.checkIsAcyclic=function(){var t=this,e=new Set;this._allInputIndices.forEach((function(n){t._allData[n]._to.forEach((function(t){e.add(t)}))}));for(var n=Array.from(e),r=new Array(this._nodes.length).fill("white"),o=function(){var e=n.pop();"gray"===r[e]?r[e]="black":(n.push(e),r[e]="gray",i._nodes[e].outputs.forEach((function(o){var i=t._allData[o];if(void 0!==i.tensor)throw new Error("node outputs should not be initialized");if(i._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach((function(t){if("gray"===r[t])throw new Error("model graph is cyclic");"white"===r[t]&&n.push(t)}))})))},i=this;n.length>0;)o()},t.prototype.transformGraph=function(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()},t.prototype.finalizeGraph=function(){for(var t=this,e=0,n=new Array(this._nodes.length,0),r=0,o=0;o<this._nodes.length;o++)n[o]=r,this._nodes[o].executeNode?(r!==o&&(this._nodes[r]=this._nodes[o]),r++):this._nodes[o].outputs.forEach((function(e){t._allData[e]._from=-2}));for(this._nodes.splice(r,this._nodes.length-r),o=0;o<this._allData.length;o++){var i=this._allData[o];void 0!==i._from&&-1!==i._from&&-2!==i._from&&(i._from=n[i._from]);for(var a=0;a<i._to.length;a++){if(!(i._to[a]>=0))throw new Error("Trying to update a removed node");i._to[a]=n[i._to[a]]}}e=0;var s,u=function(n){if(-2===c._allData[n].from&&-1===c._allOutputIndices.indexOf(n+e))return e++,c._allData.splice(n,1),n--,s=n,"continue";if(e>0){var r=-1;void 0!==c._allData[n].from&&-1!==c._allData[n].from?-1!==(r=c._nodes[c._allData[n].from].outputs.indexOf(n+e))&&(c._nodes[c._allData[n].from].outputs[r]=n):-1!==(r=c._allInputIndices.indexOf(n+e))&&(c._allInputIndices[r]=n),c._allData[n].to.forEach((function(o){-1!==(r=t._nodes[o].inputs.indexOf(n+e))&&(t._nodes[o].inputs[r]=n)})),0===c._allData[n].to.length&&-1!==(r=c._allOutputIndices.indexOf(n+e))&&(c._allOutputIndices[r]=n)}s=n},c=this;for(o=0;o<this._allData.length;o++)u(o),o=s},t.prototype.deleteNode=function(t){var e,n,o=this._nodes[t];if(o.outputs.length>1)for(var i=1;i<o.outputs.length;i++)if(this._allData[o.outputs[i]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");o.executeNode=!1;var a=o.inputs[0],s=o.outputs[0],u=this._allData[s].to;for(i=0;i<o.inputs.length;i++){var c=this._allData[o.inputs[i]].to.indexOf(t);if(-1===c)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[i]].to.splice(c,1)}this._allData[s]._to=[];var l=this._allOutputIndices.indexOf(s);if(-1!==l&&(this._allOutputIndices[l]=a),u&&u.length>0)try{for(var f=r(u),p=f.next();!p.done;p=f.next()){var d=p.value,h=this._nodes[d].inputs.indexOf(s);if(-1===h)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[d].inputs[h]=a,this._allData[a].to.push(d)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}},t.prototype.removeAllDropoutNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),i=o.next();!i.done;i=o.next()){var a=i.value;if("Dropout"===a.opType){if(1!==a.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==a.outputs.length&&2!==a.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===a.outputs.length&&0!==this._allData[a.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.removeAllIdentityNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),i=o.next();!i.done;i=o.next())"Identity"===i.value.opType&&this.deleteNode(n),n++}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.isActivation=function(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}},t.prototype.fuseConvActivationNodes=function(){var t,e;try{for(var n=r(this._nodes),o=n.next();!o.done;o=n.next()){var i=o.value;if("Conv"===i.opType){var a=this._allData[i.outputs[0]]._to;if(1===a.length&&this.isActivation(this._nodes[a[0]])){var s=this._nodes[a[0]];if("Clip"===s.opType)if(1===s.inputs.length)try{i.attributes.set("activation_params","floats",[s.attributes.getFloat("min"),s.attributes.getFloat("max")])}catch(t){i.attributes.set("activation_params","floats",[u.MIN_CLIP,u.MAX_CLIP])}else{if(!(s.inputs.length>=3&&void 0!==this._allData[s.inputs[1]].tensor&&void 0!==this._allData[s.inputs[2]].tensor))continue;i.attributes.set("activation_params","floats",[this._allData[s.inputs[1]].tensor.floatData[0],this._allData[s.inputs[2]].tensor.floatData[0]])}i.attributes.set("activation","string",s.opType),this.deleteNode(a[0])}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t}()},1315:function(t,e){"use strict";var n,r,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;var a=function(){function t(){}return t.prototype.log=function(t,e,n){},t}(),s=function(){function t(){}return t.prototype.log=function(t,e,n){console.log("".concat(this.color(t)," ").concat(n?"[35m"+n+"[0m ":"").concat(e))},t.prototype.color=function(t){switch(t){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: ".concat(t))}},t}(),u={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},c=((n={}).none=new a,n.console=new s,n),l={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},f=((r={})[""]=l,r);function p(t,e,n,r){if(void 0===e)return o=t,{verbose:p.verbose.bind(null,o),info:p.info.bind(null,o),warning:p.warning.bind(null,o),error:p.error.bind(null,o),fatal:p.fatal.bind(null,o)};if(void 0===n)d(t,e);else if("number"==typeof n&&void 0===r)d(t,e);else if("string"==typeof n&&void 0===r)d(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");d(t,n,0,e)}var o}function d(t,e,n,r){var o=f[r||""]||f[""];u[t]<u[o.minimalSeverity]||(o.logDateTime&&(e="".concat((new Date).toISOString(),"|").concat(e)),o.logSourceLocation,c[o.provider].log(t,e,r))}!function(t){function e(t){f={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{var r=f[t]||l;f[t]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){var e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(p||(p={})),e.Logger=p;var h=function(){function t(t,e,n,r,o,i){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=o,this.ctx=i}return t.prototype.end=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){return[2,this.endCallback(this)]}))}))},t.prototype.checkTimer=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),[2,this.ctx.waitForQueryAndGetTime(this.timer)]}))}))},t}(),g=function(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r},y=function(){function t(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return t.create=function(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)},t.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0},t.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},t.prototype.event=function(t,e,n,r){var a=this,s=this._started?this.begin(t,e,r):void 0,u=!1,c=n();if(c&&"function"==typeof c.then)return u=!0,new Promise((function(t,e){c.then((function(e){return o(a,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return s?[4,s.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return t(e),[2]}}))}))}),(function(t){return o(a,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return s?[4,s.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e(t),[2]}}))}))}))}));if(!u&&s){var l=s.end();if(l&&"function"==typeof l.then)return new Promise((function(t,e){l.then((function(){t(c)}),(function(t){e(t)}))}))}return c},t.prototype.begin=function(t,n,r){var a=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){var s=(0,e.now)();return this.flush(s),new h(t,n,s,(function(t){return a.endSync(t)}))}var u=r.beginTimer();return new h(t,n,0,(function(t){return o(a,void 0,void 0,(function(){return i(this,(function(e){return[2,this.end(t)]}))}))}),u,r)},t.prototype.end=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,t.checkTimer()];case 1:return e=n.sent(),this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,e)),this.flush(e)),[2]}}))}))},t.prototype.endSync=function(t){var n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,n)),this.flush(n))},t.prototype.logOneEvent=function(t){e.Logger.verbose("Profiler.".concat(t.category),"".concat((t.endTime-t.startTime).toFixed(2),"ms on event '").concat(t.name,"' at ").concat(t.endTime.toFixed(2)))},t.prototype.flush=function(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),t}();e.Profiler=y,e.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},1745:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=n(5686),o=n(1446),i=n(4662),a=n(1287),s=n(7273),u=a.onnxruntime.experimental.fbs,c=function(){function t(){}return t.prototype.load=function(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)},t.prototype.loadFromOnnxFormat=function(t,e){var n=o.onnx.ModelProto.decode(t);if(s.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(t){return{domain:t.domain,version:s.LongUtil.longToNumber(t.version)}})),this._graph=i.Graph.from(n.graph,e)},t.prototype.loadFromOrtFormat=function(t,e){var n=new r.flatbuffers.ByteBuffer(t),o=u.InferenceSession.getRootAsInferenceSession(n).model();if(s.LongUtil.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(var a=0;a<o.opsetImportLength();a++){var c=o.opsetImport(a);this._opsets.push({domain:null==c?void 0:c.domain(),version:s.LongUtil.longToNumber(c.version())})}this._graph=i.Graph.from(o.graph(),e)},Object.defineProperty(t.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),t}();e.Model=c},6145:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},5881:function(t,e){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function r(t,e){if(e.endsWith("+")){var n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){var r=e.split("-"),o=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(o)&&n<=t&&t<=o}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,o){var i,a,s,u;try{for(var c=n(o),l=c.next();!l.done;l=c.next()){var f=l.value,p=f[0],d=f[1],h=f[2],g=f[3],y=f[4];if(t.opType===p)try{for(var b=(s=void 0,n(e)),m=b.next();!m.done;m=b.next()){var v=m.value;if((v.domain===d||"ai.onnx"===v.domain&&""===d)&&r(v.version,h))return{opImpl:g,opInit:y}}}catch(t){s={error:t}}finally{try{m&&!m.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}throw new TypeError("cannot resolve operator '".concat(t.opType,"' with opsets: ").concat(e.map((function(t){return"".concat(t.domain||"ai.onnx"," v").concat(t.version)})).join(", ")))}},1287:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;var r,o,i,a,s=n(5686);r=e.onnxruntime||(e.onnxruntime={}),o=r.experimental||(r.experimental={}),i=o.fbs||(o.fbs={}),(a=i.AttributeType||(i.AttributeType={}))[a.UNDEFINED=0]="UNDEFINED",a[a.FLOAT=1]="FLOAT",a[a.INT=2]="INT",a[a.STRING=3]="STRING",a[a.TENSOR=4]="TENSOR",a[a.GRAPH=5]="GRAPH",a[a.FLOATS=6]="FLOATS",a[a.INTS=7]="INTS",a[a.STRINGS=8]="STRINGS",a[a.TENSORS=9]="TENSORS",a[a.GRAPHS=10]="GRAPHS",a[a.SPARSE_TENSOR=11]="SPARSE_TENSOR",a[a.SPARSE_TENSORS=12]="SPARSE_TENSORS",function(t){!function(t){!function(t){var e;(e=t.DimensionValueType||(t.DimensionValueType={}))[e.UNKNOWN=0]="UNKNOWN",e[e.VALUE=1]="VALUE",e[e.PARAM=2]="PARAM"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TensorDataType||(t.TensorDataType={}))[e.UNDEFINED=0]="UNDEFINED",e[e.FLOAT=1]="FLOAT",e[e.UINT8=2]="UINT8",e[e.INT8=3]="INT8",e[e.UINT16=4]="UINT16",e[e.INT16=5]="INT16",e[e.INT32=6]="INT32",e[e.INT64=7]="INT64",e[e.STRING=8]="STRING",e[e.BOOL=9]="BOOL",e[e.FLOAT16=10]="FLOAT16",e[e.DOUBLE=11]="DOUBLE",e[e.UINT32=12]="UINT32",e[e.UINT64=13]="UINT64",e[e.COMPLEX64=14]="COMPLEX64",e[e.COMPLEX128=15]="COMPLEX128",e[e.BFLOAT16=16]="BFLOAT16"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.NodeType||(t.NodeType={}))[e.Primitive=0]="Primitive",e[e.Fused=1]="Fused"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TypeInfoValue||(t.TypeInfoValue={}))[e.NONE=0]="NONE",e[e.tensor_type=1]="tensor_type",e[e.sequence_type=2]="sequence_type",e[e.map_type=3]="map_type"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsShape=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dim=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.dimLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startShape=function(t){t.startObject(1)},e.addDim=function(t,e){t.addFieldOffset(0,e,0)},e.createDimVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startDimVector=function(t,e){t.startVector(4,e,4)},e.endShape=function(t){return t.endObject()},e.createShape=function(t,n){return e.startShape(t),e.addDim(t,n),e.endShape(t)},e}();e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimension=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimension=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.value=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimension=function(t){t.startObject(2)},e.addValue=function(t,e){t.addFieldOffset(0,e,0)},e.addDenotation=function(t,e){t.addFieldOffset(1,e,0)},e.endDimension=function(t){return t.endObject()},e.createDimension=function(t,n,r){return e.startDimension(t),e.addValue(t,n),e.addDenotation(t,r),e.endDimension(t)},e}();e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimensionValue=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimensionValue=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dimType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN},e.prototype.dimValue=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.dimParam=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimensionValue=function(t){t.startObject(3)},e.addDimType=function(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)},e.addDimValue=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},e.addDimParam=function(t,e){t.addFieldOffset(2,e,0)},e.endDimensionValue=function(t){return t.endObject()},e.createDimensionValue=function(t,n,r,o){return e.startDimensionValue(t),e.addDimType(t,n),e.addDimValue(t,r),e.addDimParam(t,o),e.endDimensionValue(t)},e}();e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensorTypeAndShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensorTypeAndShape=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.shape=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startTensorTypeAndShape=function(t){t.startObject(2)},e.addElemType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addShape=function(t,e){t.addFieldOffset(1,e,0)},e.endTensorTypeAndShape=function(t){return t.endObject()},e.createTensorTypeAndShape=function(t,n,r){return e.startTensorTypeAndShape(t),e.addElemType(t,n),e.addShape(t,r),e.endTensorTypeAndShape(t)},e}();e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsMapType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsMapType=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.keyType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.valueType=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startMapType=function(t){t.startObject(2)},e.addKeyType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addValueType=function(t,e){t.addFieldOffset(1,e,0)},e.endMapType=function(t){return t.endObject()},e.createMapType=function(t,n,r){return e.startMapType(t),e.addKeyType(t,n),e.addValueType(t,r),e.endMapType(t)},e}();e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSequenceType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSequenceType=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSequenceType=function(t){t.startObject(1)},e.addElemType=function(t,e){t.addFieldOffset(0,e,0)},e.endSequenceType=function(t){return t.endObject()},e.createSequenceType=function(t,n){return e.startSequenceType(t),e.addElemType(t,n),e.endSequenceType(t)},e}();e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.nodeIndex=function(){return this.bb.readUint32(this.bb_pos)},t.prototype.srcArgIndex=function(){return this.bb.readInt32(this.bb_pos+4)},t.prototype.dstArgIndex=function(){return this.bb.readInt32(this.bb_pos+8)},t.createEdgeEnd=function(t,e,n,r){return t.prep(4,12),t.writeInt32(r),t.writeInt32(n),t.writeInt32(e),t.offset()},t}();t.EdgeEnd=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNodeEdge=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNodeEdge=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.nodeIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.inputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.inputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.outputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNodeEdge=function(t){t.startObject(3)},e.addNodeIndex=function(t,e){t.addFieldInt32(0,e,0)},e.addInputEdges=function(t,e){t.addFieldOffset(1,e,0)},e.startInputEdgesVector=function(t,e){t.startVector(12,e,4)},e.addOutputEdges=function(t,e){t.addFieldOffset(2,e,0)},e.startOutputEdgesVector=function(t,e){t.startVector(12,e,4)},e.endNodeEdge=function(t){return t.endObject()},e.createNodeEdge=function(t,n,r,o){return e.startNodeEdge(t),e.addNodeIndex(t,n),e.addInputEdges(t,r),e.addOutputEdges(t,o),e.endNodeEdge(t)},e}();e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNode=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNode=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sinceVersion=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0},e.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.opType=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive},e.prototype.executionProviderType=function(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.attributes=function(e,n){var r=this.bb.__offset(this.bb_pos,24);return r?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.attributesLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCounts=function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.inputArgCountsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCountsArray=function(){var t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.implicitInputs=function(t,e){var n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.implicitInputsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNode=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDomain=function(t,e){t.addFieldOffset(2,e,0)},e.addSinceVersion=function(t,e){t.addFieldInt32(3,e,0)},e.addIndex=function(t,e){t.addFieldInt32(4,e,0)},e.addOpType=function(t,e){t.addFieldOffset(5,e,0)},e.addType=function(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)},e.addExecutionProviderType=function(t,e){t.addFieldOffset(7,e,0)},e.addInputs=function(t,e){t.addFieldOffset(8,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(9,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addAttributes=function(t,e){t.addFieldOffset(10,e,0)},e.createAttributesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startAttributesVector=function(t,e){t.startVector(4,e,4)},e.addInputArgCounts=function(t,e){t.addFieldOffset(11,e,0)},e.createInputArgCountsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},e.startInputArgCountsVector=function(t,e){t.startVector(4,e,4)},e.addImplicitInputs=function(t,e){t.addFieldOffset(12,e,0)},e.createImplicitInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startImplicitInputsVector=function(t,e){t.startVector(4,e,4)},e.endNode=function(t){return t.endObject()},e.createNode=function(t,n,r,o,i,a,s,u,c,l,f,p,d,h){return e.startNode(t),e.addName(t,n),e.addDocString(t,r),e.addDomain(t,o),e.addSinceVersion(t,i),e.addIndex(t,a),e.addOpType(t,s),e.addType(t,u),e.addExecutionProviderType(t,c),e.addInputs(t,l),e.addOutputs(t,f),e.addAttributes(t,p),e.addInputArgCounts(t,d),e.addImplicitInputs(t,h),e.endNode(t)},e}();e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsValueInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsValueInfo=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startValueInfo=function(t){t.startObject(3)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(t,e){t.addFieldOffset(2,e,0)},e.endValueInfo=function(t){return t.endObject()},e.createValueInfo=function(t,n,r,o){return e.startValueInfo(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.endValueInfo(t)},e}();e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTypeInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTypeInfo=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.valueType=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE},e.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null},e.startTypeInfo=function(t){t.startObject(3)},e.addDenotation=function(t,e){t.addFieldOffset(0,e,0)},e.addValueType=function(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)},e.addValue=function(t,e){t.addFieldOffset(2,e,0)},e.endTypeInfo=function(t){return t.endObject()},e.createTypeInfo=function(t,n,r,o){return e.startTypeInfo(t),e.addDenotation(t,n),e.addValueType(t,r),e.addValue(t,o),e.endTypeInfo(t)},e}();e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsOperatorSetId=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsOperatorSetId=function(e,n){return e.setPosition(e.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},t.startOperatorSetId=function(t){t.startObject(2)},t.addDomain=function(t,e){t.addFieldOffset(0,e,0)},t.addVersion=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},t.endOperatorSetId=function(t){return t.endObject()},t.createOperatorSetId=function(e,n,r){return t.startOperatorSetId(e),t.addDomain(e,n),t.addVersion(e,r),t.endOperatorSetId(e)},t}();t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensor=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.dataType=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.rawData=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},e.prototype.rawDataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.rawDataArray=function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.stringData=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringDataLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startTensor=function(t){t.startObject(6)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.addDataType=function(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addRawData=function(t,e){t.addFieldOffset(4,e,0)},e.createRawDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},e.startRawDataVector=function(t,e){t.startVector(1,e,1)},e.addStringData=function(t,e){t.addFieldOffset(5,e,0)},e.createStringDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringDataVector=function(t,e){t.startVector(4,e,4)},e.endTensor=function(t){return t.endObject()},e.createTensor=function(t,n,r,o,i,a,s){return e.startTensor(t),e.addName(t,n),e.addDocString(t,r),e.addDims(t,o),e.addDataType(t,i),e.addRawData(t,a),e.addStringData(t,s),e.endTensor(t)},e}();e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSparseTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSparseTensor=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.values=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.indices=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSparseTensor=function(t){t.startObject(3)},e.addValues=function(t,e){t.addFieldOffset(0,e,0)},e.addIndices=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.endSparseTensor=function(t){return t.endObject()},e.createSparseTensor=function(t,n,r,o){return e.startSparseTensor(t),e.addValues(t,n),e.addIndices(t,r),e.addDims(t,o),e.endSparseTensor(t)},e}();e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsAttribute=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsAttribute=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED},e.prototype.f=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0},e.prototype.i=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.s=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.t=function(e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.g=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.floats=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.floatsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.floatsArray=function(){var t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.ints=function(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.intsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.strings=function(t,e){var n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringsLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.tensors=function(e,n){var r=this.bb.__offset(this.bb_pos,26);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.tensorsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.graphs=function(e,n){var r=this.bb.__offset(this.bb_pos,28);return r?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.graphsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startAttribute=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)},e.addF=function(t,e){t.addFieldFloat32(3,e,0)},e.addI=function(t,e){t.addFieldInt64(4,e,t.createLong(0,0))},e.addS=function(t,e){t.addFieldOffset(5,e,0)},e.addT=function(t,e){t.addFieldOffset(6,e,0)},e.addG=function(t,e){t.addFieldOffset(7,e,0)},e.addFloats=function(t,e){t.addFieldOffset(8,e,0)},e.createFloatsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},e.startFloatsVector=function(t,e){t.startVector(4,e,4)},e.addInts=function(t,e){t.addFieldOffset(9,e,0)},e.createIntsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startIntsVector=function(t,e){t.startVector(8,e,8)},e.addStrings=function(t,e){t.addFieldOffset(10,e,0)},e.createStringsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringsVector=function(t,e){t.startVector(4,e,4)},e.addTensors=function(t,e){t.addFieldOffset(11,e,0)},e.createTensorsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startTensorsVector=function(t,e){t.startVector(4,e,4)},e.addGraphs=function(t,e){t.addFieldOffset(12,e,0)},e.createGraphsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startGraphsVector=function(t,e){t.startVector(4,e,4)},e.endAttribute=function(t){return t.endObject()},e.createAttribute=function(t,n,r,o,i,a,s,u,c,l,f,p,d,h){return e.startAttribute(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.addF(t,i),e.addI(t,a),e.addS(t,s),e.addT(t,u),e.addG(t,c),e.addFloats(t,l),e.addInts(t,f),e.addStrings(t,p),e.addTensors(t,d),e.addGraphs(t,h),e.endAttribute(t)},e}();e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsGraph=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsGraph=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.initializers=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.initializersLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodeArgs=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeArgsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodes=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.maxNodeIndex=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.nodeEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,12);return r?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.sparseInitializers=function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.sparseInitializersLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startGraph=function(t){t.startObject(8)},e.addInitializers=function(t,e){t.addFieldOffset(0,e,0)},e.createInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInitializersVector=function(t,e){t.startVector(4,e,4)},e.addNodeArgs=function(t,e){t.addFieldOffset(1,e,0)},e.createNodeArgsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeArgsVector=function(t,e){t.startVector(4,e,4)},e.addNodes=function(t,e){t.addFieldOffset(2,e,0)},e.createNodesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodesVector=function(t,e){t.startVector(4,e,4)},e.addMaxNodeIndex=function(t,e){t.addFieldInt32(3,e,0)},e.addNodeEdges=function(t,e){t.addFieldOffset(4,e,0)},e.createNodeEdgesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeEdgesVector=function(t,e){t.startVector(4,e,4)},e.addInputs=function(t,e){t.addFieldOffset(5,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(6,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addSparseInitializers=function(t,e){t.addFieldOffset(7,e,0)},e.createSparseInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSparseInitializersVector=function(t,e){t.startVector(4,e,4)},e.endGraph=function(t){return t.endObject()},e.createGraph=function(t,n,r,o,i,a,s,u,c){return e.startGraph(t),e.addInitializers(t,n),e.addNodeArgs(t,r),e.addNodes(t,o),e.addMaxNodeIndex(t,i),e.addNodeEdges(t,a),e.addInputs(t,s),e.addOutputs(t,u),e.addSparseInitializers(t,c),e.endGraph(t)},e}();e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsModel=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsModel=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.irVersion=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.opsetImport=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.opsetImportLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.producerName=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.producerVersion=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.modelVersion=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.graph=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.graphDocString=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},e.startModel=function(t){t.startObject(9)},e.addIrVersion=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addOpsetImport=function(t,e){t.addFieldOffset(1,e,0)},e.createOpsetImportVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOpsetImportVector=function(t,e){t.startVector(4,e,4)},e.addProducerName=function(t,e){t.addFieldOffset(2,e,0)},e.addProducerVersion=function(t,e){t.addFieldOffset(3,e,0)},e.addDomain=function(t,e){t.addFieldOffset(4,e,0)},e.addModelVersion=function(t,e){t.addFieldInt64(5,e,t.createLong(0,0))},e.addDocString=function(t,e){t.addFieldOffset(6,e,0)},e.addGraph=function(t,e){t.addFieldOffset(7,e,0)},e.addGraphDocString=function(t,e){t.addFieldOffset(8,e,0)},e.endModel=function(t){return t.endObject()},e.createModel=function(t,n,r,o,i,a,s,u,c,l){return e.startModel(t),e.addIrVersion(t,n),e.addOpsetImport(t,r),e.addProducerName(t,o),e.addProducerVersion(t,i),e.addDomain(t,a),e.addModelVersion(t,s),e.addDocString(t,u),e.addGraph(t,c),e.addGraphDocString(t,l),e.endModel(t)},e}();e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsKernelCreateInfos=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsKernelCreateInfos=function(e,n){return e.setPosition(e.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.nodeIndices=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.nodeIndicesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.nodeIndicesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.kernelDefHashes=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},t.prototype.kernelDefHashesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startKernelCreateInfos=function(t){t.startObject(2)},t.addNodeIndices=function(t,e){t.addFieldOffset(0,e,0)},t.createNodeIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},t.startNodeIndicesVector=function(t,e){t.startVector(4,e,4)},t.addKernelDefHashes=function(t,e){t.addFieldOffset(1,e,0)},t.createKernelDefHashesVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},t.startKernelDefHashesVector=function(t,e){t.startVector(8,e,8)},t.endKernelCreateInfos=function(t){return t.endObject()},t.createKernelCreateInfos=function(e,n,r){return t.startKernelCreateInfos(e),t.addNodeIndices(e,n),t.addKernelDefHashes(e,r),t.endKernelCreateInfos(e)},t}();t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSubGraphSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSubGraphSessionState=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.graphId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSubGraphSessionState=function(t){t.startObject(2)},e.addGraphId=function(t,e){t.addFieldOffset(0,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(1,e,0)},e.endSubGraphSessionState=function(t){var e=t.endObject();return t.requiredField(e,4),e},e.createSubGraphSessionState=function(t,n,r){return e.startSubGraphSessionState(t),e.addGraphId(t,n),e.addSessionState(t,r),e.endSubGraphSessionState(t)},e}();e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSessionState=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.kernels=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.subGraphSessionStates=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.subGraphSessionStatesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSessionState=function(t){t.startObject(2)},e.addKernels=function(t,e){t.addFieldOffset(0,e,0)},e.addSubGraphSessionStates=function(t,e){t.addFieldOffset(1,e,0)},e.createSubGraphSessionStatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSubGraphSessionStatesVector=function(t,e){t.startVector(4,e,4)},e.endSessionState=function(t){return t.endObject()},e.createSessionState=function(t,n,r){return e.startSessionState(t),e.addKernels(t,n),e.addSubGraphSessionStates(t,r),e.endSessionState(t)},e}();e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsInferenceSession=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsInferenceSession=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.bufferHasIdentifier=function(t){return t.__has_identifier("ORTM")},e.prototype.ortVersion=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.model=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startInferenceSession=function(t){t.startObject(3)},e.addOrtVersion=function(t,e){t.addFieldOffset(0,e,0)},e.addModel=function(t,e){t.addFieldOffset(1,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(2,e,0)},e.endInferenceSession=function(t){return t.endObject()},e.finishInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM")},e.finishSizePrefixedInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM",!0)},e.createInferenceSession=function(t,n,r,o){return e.startInferenceSession(t),e.addOrtVersion(t,n),e.addModel(t,r),e.addSessionState(t,o),e.endInferenceSession(t)},e}();e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},1723:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;var i=n(1670),a=n(9240),s=function(){function t(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}return t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var e,n,r,s,u;return o(this,(function(o){switch(o.label){case 0:for(n in e=new Map,t)Object.hasOwnProperty.call(t,n)&&(r=t[n],e.set(n,new a.Tensor(r.dims,r.type,void 0,void 0,r.data)));return[4,this.session.run(e)];case 1:return s=o.sent(),u={},s.forEach((function(t,e){u[e]=new i.Tensor(t.type,t.data,t.dims)})),[2,u]}}))}))},t.prototype.startProfiling=function(){this.session.startProfiling()},t.prototype.endProfiling=function(){this.session.endProfiling()},t}();e.OnnxjsSessionHandler=s},6027:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var i=n(7067),a=n(1296),s=n(1975),u=n(6496),c=n(1315),l=n(1745),f=function(){function t(t){void 0===t&&(t={}),this._initialized=!1,this.backendHint=t.backendHint,this.profiler=c.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return Object.defineProperty(t.prototype,"inputNames",{get:function(){return this._model.graph.getInputNames()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputNames",{get:function(){return this._model.graph.getOutputNames()},enumerable:!1,configurable:!0}),t.prototype.startProfiling=function(){this.profiler.start()},t.prototype.endProfiling=function(){this.profiler.stop()},t.prototype.loadModel=function(t,e,n){return r(this,void 0,void 0,(function(){var u=this;return o(this,(function(c){switch(c.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(u,void 0,void 0,(function(){var r,u,c,f;return o(this,(function(o){switch(o.label){case 0:return[4,(0,s.resolveBackend)(this.backendHint)];case 1:return r=o.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new l.Model,"string"!=typeof t?[3,7]:(u=t.endsWith(".ort"),"undefined"!=typeof fetch?[3,3]:[4,(0,a.promisify)(i.readFile)(t)]);case 2:return c=o.sent(),this.initialize(c,u),[3,6];case 3:return[4,fetch(t)];case 4:return[4,o.sent().arrayBuffer()];case 5:c=o.sent(),this.initialize(new Uint8Array(c),u),o.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(t)?this.initialize(t):(f=new Uint8Array(t,e||0,n||t.byteLength),this.initialize(f)),o.label=8;case 8:return[2]}}))}))}))];case 1:return c.sent(),[2]}}))}))},t.prototype.initialize=function(t,e){var n=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var r=n.sessionHandler.transformGraph?n.sessionHandler:void 0;n._model.load(t,r,e),n.sessionHandler.onGraphInitialized&&n.sessionHandler.onGraphInitialized(n._model.graph),n.initializeOps(n._model.graph),n._executionPlan=new u.ExecutionPlan(n._model.graph,n._ops,n.profiler)})),this._initialized=!0},t.prototype.run=function(t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(n){if(!this._initialized)throw new Error("session not initialized yet");return[2,this.profiler.event("session","Session.run",(function(){return r(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=this.normalizeAndValidateInputs(t),[4,this._executionPlan.execute(this.sessionHandler,e)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))]}))}))},t.prototype.normalizeAndValidateInputs=function(t){var e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error("incorrect input array length: expected ".concat(e.length," but got ").concat(t.length))}else{if(t.size!==e.length)throw new Error("incorrect input map size: expected ".concat(e.length," but got ").concat(t.size));for(var n=new Array(t.size),r=0,o=0;o<e.length;++o){var i=t.get(e[o]);if(!i)throw new Error("missing input tensor for: '".concat(name,"'"));n[r++]=i}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{var a=this._model.graph.getInputIndices(),s=this._model.graph.getValues(),u=new Array(a.length);for(o=0;o<a.length;++o){var c=s[a[o]];u[o]=c.type.shape.dims,this.context.graphInputTypes.push(c.type.tensorType),this.context.graphInputDims.push(t[o].dims)}this.validateInputTensorDims(u,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t},t.prototype.validateInputTensorTypes=function(t,e){for(var n=0;n<e.length;n++){var r=t[n],o=e[n].type;if(r!==o)throw new Error("input tensor[".concat(n,"] check failed: expected type '").concat(r,"' but got ").concat(o))}},t.prototype.validateInputTensorDims=function(t,e,n){for(var r=0;r<e.length;r++){var o=t[r],i=e[r].dims;if(!this.compareTensorDims(o,i,n))throw new Error("input tensor[".concat(r,"] check failed: expected shape '[").concat(o.join(","),"]' but got [").concat(i.join(","),"]"))}},t.prototype.compareTensorDims=function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0},t.prototype.createOutput=function(t){var e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<e.length;++r)n.set(e[r],t[r]);return n},t.prototype.initializeOps=function(t){var e=t.getNodes();this._ops=new Array(e.length);for(var n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)},t}();e.Session=f},9240:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var a=n(3442),s=i(n(3720)),u=n(1446),c=n(1287),l=n(7273),f=c.onnxruntime.experimental.fbs,p=function(){function t(t,e,n,r,o,i){void 0===i&&(i=a.Guid.create()),this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=o,this.dataId=i,this.size=l.ShapeUtil.validateDimsAndCalcSize(t);var s=this.size,u=void 0===n&&void 0===r&&void 0===o;if(void 0!==o&&o.length!==s)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===o||Array.isArray(o)&&o.every((function(t){return"string"==typeof t}))))throw new TypeError("cache should be a string array");u&&(this.cache=new Array(s))}else{if(void 0!==o){var c=h(e);if(!(o instanceof c))throw new TypeError("cache should be type ".concat(c.name))}if(u){var f=new ArrayBuffer(s*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(t))}}(e));this.cache=function(t,e){return new(h(e))(t)}(f,e)}}}return Object.defineProperty(t.prototype,"data",{get:function(){if(void 0===this.cache){var t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]},t.prototype.set=function(t,e){this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]=e},t.prototype.getData=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return void 0!==this.cache?[3,2]:(t=this,[4,this.asyncDataProvider(this.dataId)]);case 1:t.cache=e.sent(),e.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(t.prototype,"strides",{get:function(){return this._strides||(this._strides=l.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),t.fromProto=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDataTypeFromProto(e.dataType),r=new t(l.ProtoUtil.tensorDimsFromProto(e.dims),n);if("string"===n)e.stringData.forEach((function(t,e){r.data[e]=(0,l.decodeUtf8String)(t)}));else if(e.rawData&&"number"==typeof e.rawData.byteLength&&e.rawData.byteLength>0){var o=r.data,i=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),a=d(e.dataType),c=e.rawData.byteLength/a;if(e.rawData.byteLength%a!=0)throw new Error("invalid buffer length");if(o.length!==c)throw new Error("buffer length mismatch");for(var f=0;f<c;f++){var p=y(i,e.dataType,f*a);o[f]=p}}else{var h=void 0;switch(e.dataType){case u.onnx.TensorProto.DataType.FLOAT:h=e.floatData;break;case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.INT16:case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.BOOL:h=e.int32Data;break;case u.onnx.TensorProto.DataType.INT64:h=e.int64Data;break;case u.onnx.TensorProto.DataType.DOUBLE:h=e.doubleData;break;case u.onnx.TensorProto.DataType.UINT32:case u.onnx.TensorProto.DataType.UINT64:h=e.uint64Data;break;default:throw new Error("unspecific error")}if(null==h)throw new Error("failed to populate data from a tensorproto value");var b=r.data;if(b.length!==h.length)throw new Error("array length mismatch");for(f=0;f<h.length;f++){var m=h[f];s.default.isLong(m)?b[f]=g(m,e.dataType):b[f]=m}}return r},t.fromData=function(e,n,r){return new t(n,r,void 0,void 0,e)},t.fromOrtTensor=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDimsFromORTFormat(e),r=l.ProtoUtil.tensorDataTypeFromProto(e.dataType()),o=new t(n,r);if("string"===r)for(var i=0;i<e.stringDataLength();i++)o.data[i]=e.stringData(i);else if(e.rawDataArray()&&"number"==typeof e.rawDataLength()&&e.rawDataLength()>0){var a=o.data,s=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),u=d(e.dataType()),c=e.rawDataLength()/u;if(e.rawDataLength()%u!=0)throw new Error("invalid buffer length");if(a.length!==c)throw new Error("buffer length mismatch");for(i=0;i<c;i++){var f=y(s,e.dataType(),i*u);a[i]=f}}return o},t}();function d(t){switch(t){case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.BOOL:return 1;case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT16:return 2;case u.onnx.TensorProto.DataType.FLOAT:case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.UINT32:return 4;case u.onnx.TensorProto.DataType.INT64:case u.onnx.TensorProto.DataType.DOUBLE:case u.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(u.onnx.TensorProto.DataType[t]))}}function h(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g(t,e){if(e===u.onnx.TensorProto.DataType.INT64||e===f.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==u.onnx.TensorProto.DataType.UINT32&&e!==f.TensorDataType.UINT32&&e!==u.onnx.TensorProto.DataType.UINT64&&e!==f.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(u.onnx.TensorProto.DataType[e]));if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function y(t,e,n){switch(e){case u.onnx.TensorProto.DataType.BOOL:case u.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case u.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case u.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case u.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case u.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case u.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case u.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case u.onnx.TensorProto.DataType.INT64:return g(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case u.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case u.onnx.TensorProto.DataType.UINT64:return g(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type ".concat(u.onnx.TensorProto.DataType[e]))}}e.Tensor=p},7273:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;var a=n(5686),s=i(n(3720)),u=n(1446),c=n(9240);e.checkInputsShape=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].dims||t[r].dims.length!==e[r])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())};var l=function(){function t(){}return t.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t}();e.ArrayUtil=l;var f=function(){function t(){}return t.preprocessInputShapes=function(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]},t.postprocessOutputShape=function(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()},t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=f;var p=function(){function t(){}return t.calcShape=function(t,e,n){var o;void 0===n&&(n=!1);var i=t.length,a=e.length;if(0===i)return e;if(0===a)return t;var s=Math.max(t.length,e.length),u=new Array(s);if(n){if(i<2||a<2)return;var c=f.calcMatMulShape([t[i-2],t[i-1]],[e[a-2],e[a-1]]);if(void 0===c)return;o=r(c,2),u[s-2]=o[0],u[s-1]=o[1]}for(var l=n?3:1;l<=s;l++){var p=i-l<0?1:t[i-l],d=a-l<0?1:e[a-l];if(p!==d&&p>1&&d>1)return;u[s-l]=Math.max(p,d)}return u},t.index=function(e,n){var r=new Array(n.length);return t.fillIndex(e,n,r),r},t.fillIndex=function(t,e,n){for(var r=t.length-e.length,o=0;o<e.length;o++)n[o]=t[r+o]%e[o]},t.calc=function(e,n,r,o,i){var a=t.calcShape(e.dims,n.dims);if(a){if(o&&!y.areEqual(a,e.dims))return;var s=y.size(a),u=o?e:new c.Tensor(a,i||e.type);if(0===a.length)u.set([],r(e.get([]),n.get([])));else{var l=new Array(a.length),f=new Array(e.dims.length),p=new Array(n.dims.length),d=0,h=0,g=!1,b=!1;0===e.dims.length&&(d=e.get([]),g=!0),0===n.dims.length&&(h=n.get([]),b=!0);for(var m=void 0,v=0;v<s;v++){m=v;for(var w=a.length-1;w>=0;w--)l[w]=m%a[w],m=Math.floor(m/a[w]);g||(t.fillIndex(l,e.dims,f),d=e.get(f)),b||(t.fillIndex(l,n.dims,p),h=n.get(p)),u.set(l,r(d,h))}}return u}},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var i=n-1-o,a=t[i]||1;(e[e.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r},t}();e.BroadcastUtil=p,e.arrayCopyHelper=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]=e[r+i]};var d=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,o){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var i,a,s;e?(i=t[1],a=t[0]):(i=t[0],a=t[1]);var u=-1;if(r?(s=n[0],u=1):(s=n[1],u=0),n[u]!==a)throw new Error("dimension mismatch");if(i<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(o&&!p.isValidBroadcast(o,[i,s]))throw new Error("gemm: invalid bias shape for broadcast");return[i,s,a]},t}();e.GemmUtil=d;var h=function(){function t(){}return t.tensorDataTypeFromProto=function(t){switch(t){case u.onnx.TensorProto.DataType.INT8:return"int8";case u.onnx.TensorProto.DataType.UINT8:return"uint8";case u.onnx.TensorProto.DataType.BOOL:return"bool";case u.onnx.TensorProto.DataType.INT16:return"int16";case u.onnx.TensorProto.DataType.UINT16:return"uint16";case u.onnx.TensorProto.DataType.INT32:return"int32";case u.onnx.TensorProto.DataType.UINT32:return"uint32";case u.onnx.TensorProto.DataType.FLOAT:return"float32";case u.onnx.TensorProto.DataType.DOUBLE:return"float64";case u.onnx.TensorProto.DataType.STRING:return"string";case u.onnx.TensorProto.DataType.INT64:return"int32";case u.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(u.onnx.TensorProto.DataType[t]))}},t.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return u.onnx.TensorProto.DataType.INT8;case"uint8":return u.onnx.TensorProto.DataType.UINT8;case"bool":return u.onnx.TensorProto.DataType.BOOL;case"int16":return u.onnx.TensorProto.DataType.INT16;case"uint16":return u.onnx.TensorProto.DataType.UINT16;case"int32":return u.onnx.TensorProto.DataType.INT32;case"uint32":return u.onnx.TensorProto.DataType.UINT32;case"float16":return u.onnx.TensorProto.DataType.FLOAT16;case"float32":return u.onnx.TensorProto.DataType.FLOAT;case"float64":return u.onnx.TensorProto.DataType.DOUBLE;case"string":return u.onnx.TensorProto.DataType.STRING;case"int64":return u.onnx.TensorProto.DataType.INT64;case"uint64":return u.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(t))}},t.tensorDimsFromProto=function(t){return t.map((function(t){return s.default.isLong(t)?t.toNumber():t}))},t.tensorValueTypeFromProto=function(e){return{tensorType:t.tensorDataTypeFromProto(e.elemType),shape:{dims:t.tensorDimsFromProto(e.shape.dim.map((function(t){return t.dimValue})))}}},t.tensorDimsFromORTFormat=function(t){for(var e=[],n=0;n<t.dimsLength();n++)e.push(g.longToNumber(t.dims(n)));return e},t.tensorAttributesFromORTFormat=function(t){for(var e=[],n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e},t}();e.ProtoUtil=h;var g=function(){function t(){}return t.longToNumber=function(t,e){return s.default.isLong(t)?t.toNumber():t instanceof a.flatbuffers.Long?s.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t},t.isLong=function(t){return s.default.isLong(t)||t instanceof a.flatbuffers.Long},t}();e.LongUtil=g;var y=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.transpose=function(t){return t.slice().reverse()},t.indicesToOffset=function(t,e,n){void 0===n&&(n=t.length);for(var r=0,o=0;o<n;++o)r+=e[o]*t[o];return r},t.offsetToIndices=function(t,e){var n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];for(var r=new Array(e.length),o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(t){return n.normalizeAxis(t,e)}))},t.incrementIndex=function(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0},t.calculateReshapedDims=function(e,n){if(0===n.length){if(0===e.length||1===t.size(e))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,o=new Array(r),i=-1,a=1,s=0;s<r;s++){if(n[s]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[s]){if(-1!==i)throw new Error("at most one dimension in shape hints can be -1");i=s}else{if(0===n[s]){if(s>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[s]=e[s]}else o[s]=n[s];a*=o[s]}}var u=t.size(e);if(-1!==i){if(u%a!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(e,"] Output shape: [").concat(n,"]"));o[i]=u/a}else if(a!==u)throw new Error("reshapedDims and originalDims don't have matching sizes");return o},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t.validateDimsAndCalcSize=function(t){var e,n;if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var i=o(t),a=i.next();!a.done;a=i.next()){var s=a.value;if(!Number.isInteger(s))throw new TypeError("Invalid shape: ".concat(s," is not an integer"));if(s<0||s>2147483647)throw new TypeError("Invalid shape: length ".concat(s," is not allowed"));r*=s}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.flattenShape=function(t,e){e<0&&(e+=t.length);var n=t.reduce((function(t,e){return t*e}),1),r=t.slice(e).reduce((function(t,e){return t*e}),1);return[n/r,r]},t.squeezeShape=function(e,n){var r=new Array;n=t.normalizeAxes(n,e.length);for(var o=0;o<e.length;o++){var i=n.indexOf(o)>=0;if(i&&1!==e[o])throw new Error("squeeze an axis of size different than 1");(0===n.length&&e[o]>1||n.length>0&&!i)&&r.push(e[o])}return r},t.unsqueezeShape=function(e,n){var r=new Array(e.length+n.length);r.fill(0);for(var o=0;o<n.length;o++){var i=t.normalizeAxis(n[o],r.length);if(i>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[i])throw new Error("'axes' has a duplicate axis");r[i]=1}var a=0;for(o=0;o<r.length;o++)0===r[o]&&(r[o]=e[a++]);if(a!==e.length)throw new Error("the unsqueezed dimension could not be established");return r},t}();e.ShapeUtil=y;var b=function(){function t(){}return t.sqr=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]+=Math.pow(e[r+i],2)},t.axpy=function(t,e,n,r,o,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]+=i*e[r+a]},t.powx=function(t,e,n,r,o,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]=Math.pow(e[r+a],i)},t.mul=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]=e[r+i]*t[n+i]},t}();e.MathUtil=b;var m=function(){function t(){}return t.splitShape=function(e,n,r,o){if(0===r.length){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(e[n],o,r)}for(var i=[],a=[0],s=0;s<r.length;++s){0!==s&&a.push(a[s-1]+r[s-1]);var u=e.slice();u[n]=r[s],i.push(u)}return[i,a]},t.determineSplit=function(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<e;++r)n.push(t/e)},t}();e.SplitUtil=m;var v=function(){function t(){}return t.calcReduce=function(e,n,r,o,i){var a=e.dims.slice(0);0===n.length&&a.forEach((function(t,e){return n.push(e)}));for(var s=t.calcReduceShape(a,n,!0),u=y.size(s),l=new c.Tensor(s,e.type),f=y.computeStrides(s),d=y.computeStrides(a),h=new Array(a.length),g=0;g<u;g++){var b=y.offsetToIndices(g,f);p.fillIndex(b,a,h),l.set(b,t.calcReduceByAxis(e.numberData,n,a,0,y.indicesToOffset(h,d),o,i))}return r?l:new c.Tensor(t.calcReduceShape(a,n,r),l.type,void 0,void 0,l.data,l.dataId)},t.calcReduceByAxis=function(e,n,r,o,i,a,s){var u=0;if(o>=n.length)return a(e[i]);for(var c=n[o],l=c>=r.length?1:y.size(r.slice(c+1)),f=0;f<r[c];f++)u=0===f?t.calcReduceByAxis(e,n,r,o+1,i,a,s):s(u,t.calcReduceByAxis(e,n,r,o+1,i,a,s)),i+=l;return u},t.calcReduceShape=function(t,e,n){for(var r=t.slice(),o=0;o<e.length;o++)r[e[o]]=n?1:0;return r.filter((function(t){return 0!==t}))},t}();e.ReduceUtil=v;var w=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,i){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var a=0;a<e.length-2;a++)a>=n.length?n.push(e[a+2]):n[a]=e[a+2];for(a=0;a<n.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(a=0;a<n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(a=0;a<2*n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[a]>=n[a]||i[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,i,a){if(a){if(i.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<e.length-2;s++)t.adjustPadAndReturnShape(e[s+2],n[s],r[s],o[s],i,s,s+e.length-2,a)}},t.computePoolOutputShape=function(e,n,r,o,i,a,s){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return t.computeShapeHelper(e,n,u,r,o,i,a,s),u},t.computeConvOutputShape=function(e,n,r,o,i,a,s){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[e[0],n[0]];return t.computeShapeHelper(!1,e,u,r,o,i,a,s),u},t.computeShapeHelper=function(e,n,r,o,i,a,s,u){if(e)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(t.adjustPadAndReturnShape(n[c+2],o[c],i[c],a[c],s,c,c+n.length-2,u))},t.adjustPadAndReturnShape=function(t,e,n,r,o,i,a,s){var u=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+o[i]+o[a]-u)/e+1);switch(s){case"VALID":return o[i]=0,o[a]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((t+e-1)/e-1)*e+r-t;return o[i]="SAME_LOWER"===s?Math.floor((c+1)/2):Math.floor(c/2),o[a]=c-o[i],Math.floor((t+c-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=w,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},3838:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGpuBackend=void 0;var s=n(1670),u=n(4955),c=n(7771),l=n(8510),f=n(8305),p=function(){function t(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}return Object.defineProperty(t.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){return r(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){switch(r.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(t=r.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return e={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize}},t.features.has("timestamp-query-inside-passes")&&"default"===s.env.webgpu.profilingMode&&(this.profilingEnabled=!0,e.requiredFeatures=["timestamp-query-inside-passes"]),n=this,[4,t.requestDevice(e)];case 2:return n.device=r.sent(),this.gpuDataManager=(0,c.createGpuDataManager)(this),this.programManager=new f.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,this.device.onuncapturederror=function(t){t.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(t.error.message))},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),[2]}}))}))},t.prototype.dispose=function(){},t.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},t.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},t.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},t.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},t.prototype.run=function(t,e,n,r,o){if(e.length!==t.inputTypes.length)throw new Error("Input size must be equal to ".concat(t.inputTypes.length,"."));for(var i=[],a=0;a<e.length;++a){if(!(h=this.gpuDataManager.get(e[a].data)))throw new Error("no GPU data for input: ".concat(e[a].data));i[a]=h}var s=function(t,e,n){var r=e.map((function(t){return"".concat(t.join(","))})).join("_"),o=n.join("_"),i=t.name;return t.cacheHint&&(i+="["+t.cacheHint+"]"),i+":"+r+";"+o}(t,e.map((function(t){return t.dims})),i.map((function(t){return t.type}))),c=this.programManager.getArtifact(s),l=c?c.programInfo:"function"==typeof t.get?t.get():t,f=0===n.length?l.outputs.map((function(t,e){return e})):n;if(f.length!==l.outputs.length)throw new Error("Output size ".concat(f.length," must be equal to ").concat(l.outputs.length,"."));var p=[],d=[];for(a=0;a<l.outputs.length;++a){if(!Number.isInteger(f[a])||f[a]<-2||f[a]>=l.outputs.length)throw new Error("Invalid output index: ".concat(f[a]));var h,g=-1===f[a],y=-2===f[a],b=g||y?o(l.outputs[a].dataType,l.outputs[a].dims):r(f[a],l.outputs[a].dataType,l.outputs[a].dims);if(!(h=this.gpuDataManager.get(b.data)))throw new Error("no GPU data for output: ".concat(b.data));if(g&&this.temporaryData.push(h),y){var m=this.kernelPersistentData.get(this.currentKernelId);m||(m=[],this.kernelPersistentData.set(this.currentKernelId,m)),m.push(h)}p.push(b),d.push(h)}var v=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(e));return c||(c=this.programManager.build(l,v),this.programManager.setArtifact(s,c)),(0,u.LOG_DEBUG)("info",(function(){return'[ProgramManager] run "'.concat(l.name,'" (key=').concat(s,") with ").concat(v[0],"x").concat(v[1],"x").concat(v[2])})),this.programManager.run(c,i,d,v),p},t.prototype.upload=function(t,e){this.gpuDataManager.upload(t,e)},t.prototype.memcpy=function(t,e){this.gpuDataManager.memcpy(t,e)},t.prototype.download=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,this.gpuDataManager.download(t)];case 1:return n=r.sent(),e.set(new Uint8Array(n)),[2]}}))}))},t.prototype.alloc=function(t){return this.gpuDataManager.create(t).id},t.prototype.free=function(t){return this.gpuDataManager.release(t)},t.prototype.createKernel=function(t,e,n){var r=l.WEBGPU_OP_RESOLVE_RULES.get(t);if(!r)throw new Error("kernel not implemented: ".concat(t));this.kernels.set(e,[t,r[0],[r[1],n]])},t.prototype.releaseKernel=function(t){var e,n,r=this.kernelPersistentData.get(t);if(r){try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var s=a.value;this.gpuDataManager.release(s.id)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)},t.prototype.computeKernel=function(t,e){var n,r,o=this.kernels.get(t);if(!o)throw new Error("kernel not created: ".concat(t));var s=a(o,3),c=s[0],l=s[1],f=s[2];if(null!==this.currentKernelId)throw new Error('kernel "'.concat(c,'" is not allowed to be called recursively'));this.currentKernelId=t,f[0]&&(f[1]=f[0](f[1]),f[0]=void 0),(0,u.LOG_DEBUG)("info",(function(){return'[WebGPU] Start to run kernel "'.concat(c,'"...')})),this.temporaryData=[];try{return l(e,f[1]),0}catch(t){return(0,u.LOG_DEBUG)("warning",'[WebGPU] Kernel "'.concat(c,'" failed. Error: ').concat(t)),1}finally{try{for(var p=i(this.temporaryData),d=p.next();!d.done;d=p.next()){var h=d.value;this.gpuDataManager.release(h.id)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}this.temporaryData=[],this.currentKernelId=null}},t}();e.WebGpuBackend=p},7675:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var i=n(7917),a=n(3838),s=n(4955),u=n(6952),c=function(){function t(t,e,n,r){this.module=t,this.dataType=e,this.data=n,this.dims=r}return t.prototype.getFloat32Array=function(){return new Float32Array(this.module.HEAP8.buffer,this.data,u.ShapeUtil.size(this.dims))},t.prototype.reshape=function(e){if(u.ShapeUtil.size(e)!==u.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new t(this.module,this.dataType,this.data,e)},t}(),l=function(){function t(t,e,n){this.module=t,this.backend=e;var r=t.HEAPU32,o=n>>2;this.opKernelContext=r[o++];for(var i=r[o++],a=[],s=0;s<i;s++){for(var u=r[o++],l=r[o++],f=r[o++],p=[],d=0;d<f;d++)p.push(r[o++]);a.push(new c(t,u,l,p))}this.inputs=a}return Object.defineProperty(t.prototype,"customData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),t.prototype.compute=function(t,e){var n,r,o,a=this,s=null!==(r=null===(n=null==e?void 0:e.inputs)||void 0===n?void 0:n.map((function(t){return"number"==typeof t?a.inputs[t]:t})))&&void 0!==r?r:this.inputs,l=null!==(o=null==e?void 0:e.outputs)&&void 0!==o?o:[];return this.backend.run(t,s,l,(function(t,e,n){return new c(a.module,e,a.output(t,n),n)}),(function(t,e){var n=(0,i.getTensorElementSize)(t);if(!n)throw new Error("Unsupported data type: ".concat(t));var r=n*u.ShapeUtil.size(e);return new c(a.module,t,a.backend.gpuDataManager.create(r).id,e)}))},t.prototype.output=function(t,e){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+e.length)),o=r>>2;this.module.HEAPU32[o++]=e.length;for(var i=0;i<e.length;i++)this.module.HEAPU32[o++]=e[i];return this.module._JsepOutput(this.opKernelContext,t,r)}finally{this.module.stackRestore(n)}},t}();e.init=function(t){return r(void 0,void 0,void 0,(function(){var e,n;return o(this,(function(i){switch(i.label){case 0:return(e=t.jsepInit)&&navigator.gpu?[4,(n=new a.WebGpuBackend).initialize()]:[3,2];case 1:i.sent(),e({backend:n},(function(t){return n.alloc(t)}),(function(t){return n.free(t)}),(function(e,r,o,i){if(void 0===i&&(i=!1),i)(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(e,", dst=").concat(r,", size=").concat(o)})),n.memcpy(e,r);else{(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(e,", gpuDataId=").concat(r,", size=").concat(o)}));var a=t.HEAPU8.subarray(e,e+o);n.upload(r,a)}}),(function(e,i,a){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r=t.HEAPU8.subarray(i,i+a),(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(e,", dataOffset=").concat(i,", size=").concat(a)})),[4,n.download(e,r)];case 1:return o.sent(),[2]}}))}))}),(function(t,e,r){return n.createKernel(t,e,r)}),(function(t){return n.releaseKernel(t)}),(function(e,r){(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: kernel=".concat(e,", contextDataOffset=").concat(r)}));var o=new l(t,n,r);return n.computeKernel(e,o)})),i.label=2;case 2:return[2]}}))}))}},4955:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.LOG_DEBUG=e.LOG=void 0;var i=n(1670),a=n(7917),s=["V","I","W","E","F"];e.LOG=function(t,e){var n,r,o=(0,a.logLevelStringToEnum)(t);o>=(0,a.logLevelStringToEnum)(i.env.logLevel)&&(n=o,r="function"==typeof e?e():e,console.log("[".concat(s[n],",").concat((new Date).toISOString(),"]").concat(r)))},e.LOG_DEBUG=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.env.debug&&e.LOG.apply(void 0,o([],r(t),!1))}},6952:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_CLIP=e.MIN_CLIP=e.GemmUtil=e.PoolConvUtil=e.ShapeUtil=e.BroadcastUtil=e.MatMulUtil=void 0;var r=function(){function t(){}return t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=r;var o=function(){function t(){}return t.calcShape=function(t,e,o){var i;void 0===o&&(o=!1);var a=t.length,s=e.length;if(0===a)return e;if(0===s)return t;var u=Math.max(t.length,e.length),c=new Array(u);if(o){if(a<2||s<2)return;var l=r.calcMatMulShape([t[a-2],t[a-1]],[e[s-2],e[s-1]]);if(void 0===l)return;i=n(l,2),c[u-2]=i[0],c[u-1]=i[1]}for(var f=o?3:1;f<=u;f++){var p=a-f<0?1:t[a-f],d=s-f<0?1:e[s-f];if(p!==d&&p>1&&d>1)return;c[u-f]=Math.max(p,d)}return c},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t}();e.BroadcastUtil=o;var i=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(r){return n.normalizeAxis(r,null!=e?e:t.length)}))},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t}();e.ShapeUtil=i;var a=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,i){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var a=0;a<e.length-2;a++)a>=n.length?n.push(e[a+2]):n[a]=e[a+2];for(a=0;a<n.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(a=0;a<n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(a=0;a<2*n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[a]>=n[a]||i[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,i,a,s){if(s){if(i.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<e.length-2;u++)t.adjustPadAndReturnShape(e[u+(a?1:2)],n[u],r[u],o[u],i,u,u+e.length-2,s)}},t.computePoolOutputShape=function(e,n,r,o,i,a,s){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return t.computeShapeHelper(e,n,u,r,o,i,a,s),u},t.computeConvOutputShape=function(e,n,r,o,i,a,s){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[e[0],n[0]];return t.computeShapeHelper(!1,e,u,r,o,i,a,s),u},t.computeShapeHelper=function(e,n,r,o,i,a,s,u){if(e)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(t.adjustPadAndReturnShape(n[c+2],o[c],i[c],a[c],s,c,c+n.length-2,u))},t.adjustPadAndReturnShape=function(t,e,n,r,o,i,a,s){var u=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+o[i]+o[a]-u)/e+1);switch(s){case"VALID":return o[i]=0,o[a]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((t+e-1)/e-1)*e+r-t;return o[i]="SAME_LOWER"===s?Math.floor((c+1)/2):Math.floor(c/2),o[a]=c-o[i],Math.floor((t+c-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=a;var s=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,i){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var a,s,u;e?(a=t[1],s=t[0]):(a=t[0],s=t[1]);var c=-1;if(r?(u=n[0],c=1):(u=n[1],c=0),n[c]!==s)throw new Error("dimension mismatch");if(a<=0||u<=0||s<=0)throw new Error("invalid shape specified");if(i&&!o.isValidBroadcast(i,[a,u]))throw new Error("gemm: invalid bias shape for broadcast");return[a,u,s]},t}();e.GemmUtil=s,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22},387:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},7771:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createGpuDataManager=void 0;var u=n(4955),c=n(1163),l=function(t){return 16*Math.ceil(t/16)},f=0,p=function(){function t(t){this.backend=t,this.storageCache=new Map,this.downloadCache=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return t.prototype.upload=function(t,e){var n=e.buffer,r=e.byteOffset,o=e.byteLength,i=l(o),a=this.storageCache.get(t);if(!a)throw new Error("gpu data for uploading does not exist");if(a.originalSize!==o)throw new Error("inconsistent data size. gpu data size=".concat(a.originalSize,", data size=").concat(o));var s=this.backend.device.createBuffer({mappedAtCreation:!0,size:i,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),c=s.getMappedRange();new Uint8Array(c).set(new Uint8Array(n,r,o)),s.unmap();var f=this.backend.getCommandEncoder();this.backend.endComputePass(),f.copyBufferToBuffer(s,0,a.gpuData.buffer,0,i),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(t,")")})),this.buffersForUploadingPending.push(s)},t.prototype.memcpy=function(t,e){var n=this.storageCache.get(t);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(e);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var o=l(n.originalSize);this.backend.getCommandEncoder().copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,o)},t.prototype.create=function(t,e){void 0===e&&(e=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n=l(t),r=this.backend.device.createBuffer({size:n,usage:e}),o={id:f++,type:c.GpuDataType.default,buffer:r};return this.storageCache.set(o.id,{gpuData:o,originalSize:t}),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(t,") => id=").concat(o.id)})),o},t.prototype.get=function(t){var e;return null===(e=this.storageCache.get(t))||void 0===e?void 0:e.gpuData},t.prototype.release=function(t){var e=this.storageCache.get(t);if(!e)throw new Error("releasing data does not exist");return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(t,"), gpuDataId=").concat(e.gpuData.id)})),this.storageCache.delete(t),this.buffersPending.push(e.gpuData.buffer),this.downloadCache.get(t)&&this.downloadCache.delete(t),e.originalSize},t.prototype.download=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,a;return o(this,(function(o){if(e=this.downloadCache.get(t))return[2,e.data];if(!(n=this.storageCache.get(t)))throw new Error("data does not exist");return r=this.backend.getCommandEncoder(),this.backend.endComputePass(),i=this.backend.device.createBuffer({size:n.originalSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r.copyBufferToBuffer(n.gpuData.buffer,0,i,0,n.originalSize),this.backend.flush(),a=new Promise((function(t){i.mapAsync(GPUMapMode.READ).then((function(){var e=i.getMappedRange().slice(0);i.destroy(),t(e)}))})),this.downloadCache.set(t,{data:a}),[2,a]}))}))},t.prototype.refreshPendingBuffers=function(){var t,e,n,r;try{for(var o=i(this.buffersForUploadingPending),a=o.next();!a.done;a=o.next())a.value.destroy()}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}try{for(var s=i(this.buffersPending),u=s.next();!u.done;u=s.next())u.value.destroy()}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t}();e.createGpuDataManager=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(p.bind.apply(p,s([void 0],a(t),!1)))}},8510:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGPU_OP_RESOLVE_RULES=void 0;var a=i(n(504)),s=n(9770),u=n(4271),c=n(1522),l=i(n(5262)),f=n(2625),p=i(n(9302));e.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[p.abs]],["Acos",[p.acos]],["Acosh",[p.acosh]],["Add",[a.add]],["Asin",[p.asin]],["Asinh",[p.asinh]],["Atan",[p.atan]],["Atanh",[p.atanh]],["AveragePool",[l.averagePool,l.parseAveragePoolAttributes]],["Ceil",[p.ceil]],["ClipV10",[p.clipV10]],["Clip",[p.clip]],["Conv",[s.conv,s.parseConvAttributes]],["Cos",[p.cos]],["Cosh",[p.cosh]],["Div",[a.div]],["Elu",[p.elu,p.parseEluAttributes]],["Erf",[p.erf]],["Floor",[p.floor]],["Gemm",[u.gemm,u.parseGemmAttributes]],["GlobalAveragePool",[l.globalAveragePool,l.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[l.globalMaxPool,l.parseGlobalMaxPoolAttributes]],["MatMul",[c.matMul]],["MaxPool",[l.maxPool,l.parseMaxPoolAttributes]],["Mul",[a.mul]],["Neg",[p.neg]],["Pow",[a.pow]],["Reciprocal",[p.reciprocal]],["Sigmoid",[p.sigmoid]],["Sin",[p.sin]],["Sinh",[p.sinh]],["Sqrt",[p.sqrt]],["Sub",[a.sub]],["Tan",[p.tan]],["Tanh",[p.tanh]],["Transpose",[f.transpose,f.parseTransposeAttributes]]])},1427:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.biasActivationSnippet=e.activationFnSnippet=e.typeSnippet=void 0,e.typeSnippet=function(t){switch(t){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(t,"-component is not supported."))}},e.activationFnSnippet=function(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},e.biasActivationSnippet=function(t,e){return"\n      ".concat(t?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(e?"value = activation(value, coords);":"","\n      ")}},9456:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfo=void 0;var o=n(4955),i=n(6952),a=n(1163),s=n(1427),u=n(4085),c=n(158);e.createConv2DMatMulProgramInfo=function(t,e,n,l,f,p,d,h,g){var y="NHWC"===n.format,b=y?t[0].dims[3]:t[0].dims[1],m=l[0],v=y?l[2]:l[3],w=y?l[1]:l[2],_=y?l[3]:l[1],x=((b%4==0||b%3==0)&&y||v%4==0&&!y)&&_%4==0,T=y?_:v*w,S=y?v*w:_,A=x?[8,8,1]:[T<=4?4:16,T>4&&S<=4?4:16,1],O=x?[4,4,1]:[T<=4?1:2,T>4&&S<=4?1:2,1],P=[Math.ceil(T/A[0]/O[0]),Math.ceil(S/A[1]/O[1]),Math.ceil(m/A[2]/O[1])];(0,o.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(P)}));var E=x?y&&b%4!=0?3:4:O[0],I=A[1]*O[1],D=A[0]*O[0],k=Math.max(A[0]*E,A[1]),C=f%I==0,R=p%D==0,F=d%k==0,M=x?[E,4,4]:[1,1,1],N=["@group(0) @binding(0) var<storage, read> x: array<".concat(x&&4===E?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(x?"vec4<f32>":"f32",">;")],L="\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(x?"vec4<f32>":"f32",") {\n        result[flatIndex] = ").concat(x?"vec4<f32>":"f32","(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(x?"vec4<f32>":"f32",") {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ").concat(x?"/ 4":"",", value);\n      }");return h&&(N.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(x?"vec4<f32>":"f32",">;")),L+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(x?"vec4<f32>":"f32"," {\n          return bias[coords.").concat(y?"w":"y").concat(x?"/ 4":"","];\n        }")),r(r({},e),{outputs:[{dims:l,dataType:t[0].dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:P[0],y:P[1],z:P[2]}},getShaderSource:function(){return"\n        ".concat(u.utilFunctions,"\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ").concat(N.join(""),"\n        @group(0) @binding(").concat(N.length,") var<storage, read_write> result: array<").concat(x?"vec4<f32>":"f32",">;\n        //@group(0) @binding(").concat(N.length+1,") var<uniform> uniforms: Uniforms;\n\n        const xShape : vec4<i32> = vec4<i32>(").concat(t[0].dims.join(","),");\n        const wShape : vec4<i32> = vec4<i32>(").concat(t[1].dims.join(","),");\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(i.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n        const dimAOuter : i32 = ").concat(f,";\n        const dimBOuter : i32 = ").concat(p,";\n        const dimInner : i32 = ").concat(d,";\n        ").concat(L,"\n        ").concat(function(t,e,n,r,o,i,a,u,c,l){void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===u&&(u=4),void 0===c&&(c=4),void 0===l&&(l=4);var f=t?"\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    ":"\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    ",p=t?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",d=t?"xShape[1]":"xShape[2]",h=t?"xShape[2]":"xShape[3]",g=t?"row":"col",y=t?"col":"row",b="\n    let inChannels = wShape[2];\n    let outWidth = ".concat(t?"outShape[2]":"outShape[3]",";\n    let outRow = ").concat(g," / outWidth;\n    let outCol = ").concat(g," % outWidth;\n\n    let WRow = ").concat(y," / (filterDims[1] * inChannels);\n    let WCol = ").concat(y," / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ").concat(y," % inChannels;\n    var resData = ").concat((0,s.typeSnippet)(u),"(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the 'same' padding type.\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\n      ").concat(f,"\n      let xIndex = getIndexFromCoords4D(coord, xShape);\n      ").concat(function(t){switch(t){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(u),"\n    }\n    return resData;"),m=t?e&&r?"\n    let col = colIn * ".concat(u,";\n    ").concat(b):"\n    let col = colIn * ".concat(u,";\n    if (row < dimAOuter && col < dimInner) {\n      ").concat(b,"\n    }\n    return ").concat((0,s.typeSnippet)(u),"(0.0);"):r&&n?"\n    let col = colIn * ".concat(u,";\n    ").concat(b):"\n    let col = colIn * ".concat(u,";\n    if (row < dimInner && col < dimBOuter) {\n      ").concat(b,"\n    }\n    return ").concat((0,s.typeSnippet)(u),"(0.0);"),v="".concat(function(t){switch(t){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(c)),w=(0,s.typeSnippet)(l),_=t?(0,s.typeSnippet)(u):(0,s.typeSnippet)(c),x=t?(0,s.typeSnippet)(c):(0,s.typeSnippet)(u);return"\n    ".concat((0,s.activationFnSnippet)(i,a,4===l,4),"\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\n      ").concat(t?m:v,"\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(x," {\n      ").concat(t?v:m,"\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\n      let col = colIn * ").concat(l,";\n      if (row < dimAOuter && col < dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ").concat(t?"outShape[2]":"outShape[3]",";\n      ").concat(p,"\n      ").concat((0,s.biasActivationSnippet)(o,i),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }")}(y,C,R,F,h,void 0,!1,M[0],M[1],M[2]),"\n            ").concat(x?(0,c.makeMatMulPackedVec4Source)(O,A,!y,k):(0,c.makeMatMulPackedSource)(O,A,!y,k,!1,void 0,g))}})}},4085:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utilFunctions=void 0,e.utilFunctions="\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\n}\n"},158:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeMatMulPackedSource=e.makeMatMulPackedVec4Source=void 0,e.makeMatMulPackedVec4Source=function(t,e,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=32),void 0===o&&(o=!1),void 0===i&&(i=32),void 0===a&&(a=!1);var s,u=e[1]*t[1],c=e[0]*t[0],l=n?u:r,f=n?r:u,p=l/e[0],d=r/e[1];if((!n||4!==p||4!==t[1])&&(n||3!==p&&4!==p)||l%e[0]!=0||r%e[1]!=0||4!==t[0])throw new Error("If transposeA ".concat(n," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(t[1]," must be 4.\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\n  tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(e[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(e[1],". colPerThread ").concat(t[0]," must be 4."));return"\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(l/p,">, ").concat(f,">;\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(c/t[0],">, ").concat(r,">;\n\nconst rowPerThread = ").concat(t[1],";\nconst colPerThread = ").concat(t[0],";\nconst innerElementSize = ").concat(p,";\nconst tileInner = ").concat(r,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = ").concat(a?"0":"localRow * rowPerThread",";\n  let tileCol = i32(localId.x);\n\n  let globalRow = ").concat(a?"0":"i32(globalId.y) * rowPerThread",";\n  let globalCol = i32(globalId.x);\n  let batch = ").concat(o?"0":"i32(globalId.z)",";\n  let globalRowStart = i32(workgroupId.y) * ").concat(u,";\n\n  let numTiles = ").concat(o?"".concat(Math.ceil(i/r)):"(dimInner - 1) / tileInner + 1",";\n  var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\n\n  var acc: array<vec4<f32>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ").concat(d,";\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ").concat((s=n,s?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol);\n        "),"\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\n\n          ").concat(function(t,e){return t?"\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ".concat(3===e?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ").concat(3===e?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ".concat(3===e?"":"acc[i] = BCached3 * ACached.w + acc[i];","\n        }")}(n,p),"\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}")};var n=function(t){return t?"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol);\n            ":"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol);\n            "};e.makeMatMulPackedSource=function(t,e,r,o,i,a,s){void 0===r&&(r=!1),void 0===o&&(o=32),void 0===i&&(i=!1),void 0===a&&(a=32),void 0===s&&(s=!1);var u=t[1]*e[1],c=t[0]*e[0],l=r?u:o,f=r?o:u;if(f%e[1]!=0||l%e[0]!=0||o%e[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(e[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(e[0],", tileInner ").concat(o," must be divisible by workgroupSize[1]").concat(e[1]));var p=f/e[1],d=l/e[0],h=o/e[1],g=s?"\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ".concat(u,";\n    let globalColStart = i32(workgroupId.x) * ").concat(c,";\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(e[1],") {\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(e[0],") {\n          ").concat(n(r),"\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(o,"; inputRow = inputRow + ").concat(e[1],") {\n            for (var inputCol = localCol; inputCol < ").concat(c,"; inputCol = inputCol + ").concat(e[0],") {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol);\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<f32, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(e[0],"];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(e[1],"];"):"mm_Asub[localRow + innerRow * ".concat(e[1],"][k];"),"\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ").concat(e[1],";\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ").concat(e[0],";\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    "):"\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ".concat(u,";\n\nlet tileRowA = i32(localId.y) * ").concat(p,";\nlet tileColA = i32(localId.x) * ").concat(d,";\nlet tileRowB = i32(localId.y) * ").concat(h,";\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ").concat(p,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ").concat(d,"; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ").concat(n(r),"\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ").concat(h,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol);\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<f32, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ").concat(function(t){return t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n");return"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(c,">, ").concat(o,">;\n  const rowPerThread = ").concat(t[1],";\n  const colPerThread = ").concat(t[0],";\n  const tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ").concat(i?"0":"i32(globalId.z)",";\n    let numTiles = ").concat(i?"".concat(Math.ceil(a/o)):"(dimInner - 1) / tileInner + 1",";\n    var kStart = ").concat(i?"i32(globalId.z) * ".concat(a):"0",";\n\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ").concat(g,"\n  }\n")}},504:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.pow=e.mul=e.div=e.add=void 0;var o=n(6952),i=n(1163),a=n(2075),s=function(t,e,n,s,u){var c={name:e,inputTypes:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:u};return r(r({},c),{get:function(){return function(t,e,n,s,u,c){var l,f;void 0===c&&(c=e.dataType);var p=!o.ShapeUtil.areEqual(e.dims,n.dims),d=e.dims,h=o.ShapeUtil.size(e.dims),g=!1;if(p){var y=o.BroadcastUtil.calcShape(e.dims,n.dims,!1);if(!y)throw new Error("Can't perform binary op on the given tensors");d=y,h=o.ShapeUtil.size(d);for(var b=1,m=0;m<d.length;m++){var v=null!==(l=e.dims[e.dims.length-m])&&void 0!==l?l:1;if(v!==(null!==(f=n.dims[n.dims.length-m])&&void 0!==f?f:1))break;b*=v}b%4==0&&(g=!0)}else g=!0;return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r,i,s,u,c,l,f,p){void 0===l&&(l="f32"),void 0===f&&(f="f32"),void 0===p&&(p="f32");var d,h,g=o.ShapeUtil.size(r),y=Math.ceil(g/4);"string"==typeof u?d=h=function(t,e){return"".concat(u,"((").concat(t,"),(").concat(e,"))")}:"function"==typeof u?d=h=u:(d=u.scalar,h=u.vector);var b,m="",v=(0,a.createIndicesHelper)("output",r);if(s){var w=function(t){for(var e=o.ShapeUtil.computeStrides(t),n=[],i=t.length-1;i>=0;i--){var a=0===r.length?"0u":1===r.length?"(*outputIndices)":"(*outputIndices)[".concat(i+r.length-t.length,"]");n.push("".concat(e[i],"u * (").concat(a," % ").concat(t[i],"u)"))}return n.length>0?n.join("+"):"0u"};m="\n  ".concat(v.o2iImpl,"\n\n  fn calcOffsetA(outputIndices: ptr<function, ").concat(v.iType,">) -> u32 {\n    return ").concat(w(e),";\n  }\n\n  fn calcOffsetB(outputIndices: ptr<function, ").concat(v.iType,">) -> u32 {\n    return ").concat(w(n),";\n  }\n  ")}if(i)b=s?"\n      ".concat(v.indicesVariableDeclaration("outputIndices"),"\n      ").concat(v.o2iCall("global_idx * 4u","outputIndices"),"\n      let offsetA = calcOffsetA(&outputIndices);\n      let offsetB = calcOffsetB(&outputIndices);\n      outputData[global_idx] = ").concat(h("aData[offsetA / 4u]","bData[offsetB / 4u]"),";"):"outputData[global_idx] = ".concat(h("aData[global_idx]","bData[global_idx]"),";");else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _=function(t){var e="aData[indexA".concat(t,"][componentA").concat(t,"]"),n="bData[indexB".concat(t,"][componentB").concat(t,"]");return"\n      ".concat(v.o2iCall("global_idx * 4u + ".concat(t,"u"),"outputIndices"),"\n      let offsetA").concat(t," = calcOffsetA(&outputIndices);\n      let offsetB").concat(t," = calcOffsetB(&outputIndices);\n      let indexA").concat(t," = offsetA").concat(t," / 4u;\n      let indexB").concat(t," = offsetB").concat(t," / 4u;\n      let componentA").concat(t," = offsetA").concat(t," % 4u;\n      let componentB").concat(t," = offsetB").concat(t," % 4u;\n      outputData[global_idx][").concat(t,"] = ").concat(d(e,n),";")};b="\n      ".concat(v.indicesVariableDeclaration("outputIndices"),"\n      ").concat(_(0),"\n      ").concat(_(1),"\n      ").concat(_(2),"\n      ").concat(_(3))}return"\n  @group(0) @binding(0) var<storage, read> aData : array<vec4<".concat(l,">>;\n  @group(0) @binding(1) var<storage, read> bData : array<vec4<").concat(f,">>;\n  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<").concat(p,">>;\n\n  ").concat(null!=c?c:"","\n  ").concat(m,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(y),"\n    ").concat(b,"\n  }")}(t,e.dims,n.dims,d,g,p,s,u)},outputs:[{dims:d,dataType:c,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/(g?4:1))}}})}(c,t[0],t[1],n,s)}})};e.add=function(t){t.compute(s(t.inputs,"Add",(function(t,e){return"".concat(t,"+").concat(e)})))},e.div=function(t){t.compute(s(t.inputs,"Div",(function(t,e){return"".concat(t,"/").concat(e)})))},e.mul=function(t){t.compute(s(t.inputs,"Mul",(function(t,e){return"".concat(t,"*").concat(e)})))},e.pow=function(t){t.compute(s(t.inputs,"Pow",{scalar:function(t,e){return"pow_f32(".concat(t,",").concat(e,")")},vector:function(t,e){return"pow_vf32(".concat(t,",").concat(e,")")}},"\n    fn pow_f32(a : f32, b : f32) -> f32 {\n      if (b == 0.0) {\n        return 1.0;\n      } else if (a < 0.0 && b != floor(b)) {\n        return pow(a, b); // NaN\n      }\n      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);\n    }\n    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\n      // TODO: implement vectorized pow\n      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));\n    }\n      "))},e.sub=function(t){t.compute(s(t.inputs,"Sub",(function(t,e){return"".concat(t,"-").concat(e)})))}},2075:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createShaderHelper=e.createIndicesHelper=e.WORKGROUP_SIZE=void 0;var r=n(6952);e.WORKGROUP_SIZE=64,e.createIndicesHelper=function(t,e){for(var n=e.length<2?"u32":"array<u32, ".concat(e.length,">"),o=r.ShapeUtil.computeStrides(e),i="",a=0;a<e.length-1;a++)i+="\n    let dim".concat(a," = current / ").concat(o[a],"u;\n    let rest").concat(a," = current % ").concat(o[a],"u;\n    (*indices)[").concat(a,"] = dim").concat(a,";\n    current = rest").concat(a,";\n    ");i+="(*indices)[".concat(e.length-1,"] = current;");var s=e.length<2?"":"\n  fn ih_o2i_".concat(t,"(offset: u32, indices: ptr<function, ").concat(n,">) {\n    var current = offset;\n    ").concat(i,"\n  }"),u=[];if(0===e.length)u.push("0u");else if(e.length<2)u.push("(*indices)");else for(a=e.length-1;a>=0;a--)u.push("".concat(o[a],"u * ((*indices)[").concat(a,"])"));return{o2iImpl:s,o2iCall:function(n,r){return e.length<2?"".concat(r,"=").concat(n,";"):"ih_o2i_".concat(t,"(").concat(n,", &").concat(r,");")},i2oImpl:e.length<2?"":"\n  fn ih_i2o_".concat(t,"(indices: ptr<function, ").concat(n,">) -> u32 {\n    return ").concat(u.join("+"),";\n  }"),i2oExpression:function(n,r){return e.length<2?"(".concat(r?"*":"").concat(n,")"):"ih_i2o_".concat(t,"(").concat(r?"":"&").concat(n,")")},indicesVariableDeclaration:function(t,e){return"var ".concat(t,":").concat(n).concat(e?"=".concat(n,"(").concat(e.join(","),")"):"",";")},iType:n}};var o=function(){function t(t){this.normalizedDispatchGroup=t}return t.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(t){var e="number"==typeof t?"".concat(t,"u"):t;return"if (global_idx >= ".concat(e,") { return; }")},t.prototype.mainStart=function(t){void 0===t&&(t=e.WORKGROUP_SIZE);var n="number"==typeof t?t:t[0],r="number"==typeof t?1:t[1],o="number"==typeof t?1:t[2],i=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],a=i?"@builtin(global_invocation_id) global_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",s=i?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*o,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(o,")\n  fn main(").concat(a,") {\n    ").concat(s,"\n  ")},t}();e.createShaderHelper=function(t){return new o(t)}},9192:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createGroupedConvProgramInfoLoader=void 0;var o=n(6952),i=n(1163),a=n(2075),s=n(9770),u=n(3997);e.createGroupedConvProgramInfoLoader=function(t,e,n){var c,l,f=(c=t.length>2,l=e.cacheKey,{name:"GroupedConv",inputTypes:c?[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=t.length>2,f=l?"value += b[output_channel];":"",p=t[0].dims,d=t[1].dims,h=d[0]/n.group,g="f32",y=(0,u.getActicationSnippet)(n),b=y.activationFunction,m=y.applyActivation,v=["@group(0) @binding(0) var<storage, read> x : array<".concat(g,">;"),"@group(0) @binding(1) var<storage, read> w : array<".concat(g,">;")];l&&v.push("@group(0) @binding(2) var<storage, read> b : array<".concat(g,">;"));var w="NHWC"===n.format,_=(0,s.calculateOutputShape)(p,d,n.dilations,n.pads,n.strides,w),x=o.ShapeUtil.size(_),T=(0,a.createIndicesHelper)("output",_),S=(0,a.createIndicesHelper)("x",p),A=(0,a.createIndicesHelper)("w",d);return r(r({},e),{outputs:[{dims:c?c(_):_,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(t){return"\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\n\n  ").concat(v.join("\n"),"\n  @group(0) @binding(").concat(v.length,") var<storage, read_write> output : array<").concat(g,">;\n\n  ").concat(b,"\n  ").concat(T.o2iImpl,"\n  ").concat(S.i2oImpl,"\n  ").concat(A.i2oImpl,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(x),"\n\n    ").concat(T.indicesVariableDeclaration("outputIndices"),"\n    ").concat(T.o2iCall("global_idx","outputIndices"),"\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\n    let group_id: u32 = output_channel / ").concat(h,"u;\n\n    var value: ").concat(g," = ").concat(g,"(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(d[1],"u; wInChannel++) {\n      let input_channel = group_id * ").concat(d[1],"u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ").concat(d[2],"u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\n\n        if (xHeight < 0u || xHeight >= ").concat(p[w?1:2],"u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ").concat(d[3],"u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\n          if (xWidth < 0u || xWidth >= ").concat(p[w?2:3],"u) {\n            continue;\n          }\n\n          ").concat(S.indicesVariableDeclaration("xIndices",w?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"]),"\n          let xVal = x[").concat(S.i2oExpression("xIndices"),"];\n          ").concat(A.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"]),"\n          let wVal = w[").concat(A.i2oExpression("wIndices"),"];\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(f,"\n    ").concat(m,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(x/64)}}})}(t,f,e,n)}})}},9770:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.conv=e.parseConvAttributes=e.calculateOutputShape=void 0;var o=n(6952),i=n(387),a=n(9192),s=n(3822),u=n(3997),c=n(2625);e.calculateOutputShape=function(t,e,n,r,o,i){var a=t[0],s=t.slice(i?1:2,i?3:4),u=s.length,c=e[0],l=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),f=s.map((function(t,e){return t+r[e]+r[e+u]})).map((function(t,e){return Math.floor((t-l[e]+o[e])/o[e])}));return f.splice(0,0,a),f.splice(i?3:1,0,c),f};var l=(0,i.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(t,e){for(var n=t.kernelShape.slice(),r=2;r<e[1].dims.length;++r)0===n[r-2]&&(n[r-2]=e[1].dims[r]);var i=t.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,i,"NHWC"===t.format,t.autoPad);var a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:i,cacheKey:t.cacheKey}),a};e.parseConvAttributes=function(t){var e=(0,u.parseInternalActivationAttributes)(t),n=t.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],a=t.dilations,s=t.group,c=t.kernel_shape,l=t.pads,f=t.strides,p=t.w_is_const();return(0,i.createAttributeWithCacheKey)(r({autoPad:o,format:n,dilations:a,group:s,kernelShape:c,pads:l,strides:f,wIsConst:p},e))},e.conv=function(t,n){!function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length&&3!==t[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");if(t[0].dims["NHWC"===e.format?t[0].dims.length-1:1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&1!==t[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(t.inputs,n),3===t.inputs[0].dims.length?function(t,e){var n="NHWC"===e.format,o=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];3===t.inputs.length&&o.push(t.inputs[2]);var i=[0,e.pads[0],0,e.pads[1]],s=[1].concat(e.strides),u=[1].concat(e.dilations),c=[1].concat(e.kernelShape),l=f(r(r({},e),{pads:i,strides:s,dilations:u,kernelShape:c}),o);t.compute((0,a.createGroupedConvProgramInfoLoader)(o,l,(function(t){return n?[t[0],t[2],t[3]]:[]})))}(t,n):function(t,n,o){var i,u=f(o,n),p=3===n.length,d="NHWC"===o.format,h=n[0].dims[d?1:2],g=n[0].dims[d?2:3],y=n[0].dims[d?3:1],b=n[1].dims[2],m=n[1].dims[3],v=(0,e.calculateOutputShape)(n[0].dims,n[1].dims,o.dilations,u.pads,o.strides,d),w=v[d?1:2],_=v[d?2:3],x=v[d?3:1];if(d&&b===h&&m===g&&"VALID"===o.autoPad||1===b&&1===m&&1===o.dilations[0]&&1===o.dilations[1]&&1===o.strides[0]&&1===o.strides[1]&&("SAME_UPPER"===o.autoPad||"SAME_LOWER"===o.autoPad||"VALID"===o.autoPad))t.compute((0,a.createGroupedConvProgramInfoLoader)(n,u));else if(d&&1===o.group){var T=d?w*_:x,S=d?x:w*_,A=b*m*y,O=null!==(i=t.customData.wT)&&void 0!==i?i:t.compute(r(r({},c.transposeProgramMetadata),{cacheHint:l.cacheKey,get:function(){return(0,c.createTransposeProgramInfo)(n[1],l.perm)}}),{inputs:[1],outputs:[o.wIsConst?-2:-1]})[0];o.wIsConst&&!t.customData.wT&&(t.customData.wT=O);var P=[n[0],O];p&&(d||1!==n[2].dims.length?P.push(n[2]):P.push(n[2].reshape([n[2].dims[0],1,1]))),t.compute((0,s.createConv2DMatMulProgramInfoLoader)(P,u,v,T,S,A,p,!0),{inputs:P})}else t.compute((0,a.createGroupedConvProgramInfoLoader)(n,u))}(t,t.inputs,n)}},3822:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfoLoader=void 0;var o=n(1163),i=n(9456);e.createConv2DMatMulProgramInfoLoader=function(t,e,n,a,s,u,c,l){var f=function(t,e){return{name:"Conv2DMatMul",inputTypes:t?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:e}}(c,e.cacheKey);return r(r({},f),{get:function(){return(0,i.createConv2DMatMulProgramInfo)(t,f,e,n,a,s,u,c,l)}})}},3997:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActicationSnippet=void 0;var o=n(6952);e.getActicationSnippet=function(t){switch(t.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(t.clipMin,");const clip_max_=f32(").concat(t.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},e.parseInternalActivationAttributes=function(t){var e=(null==t?void 0:t.activation)||"";if("Clip"===e){var n=r((null==t?void 0:t.activation_params)||[o.MIN_CLIP,o.MAX_CLIP],2),i=n[0],a=n[1];return{activation:e,clipMax:a,clipMin:i,activationCacheKey:"".concat(e,":").concat(i,",").concat(a)}}return{activation:e,activationCacheKey:e}}},4271:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributes=e.gemm=void 0;var i=n(6952),a=n(387),s=n(1163);e.gemm=function(t,e){!function(t){if(!t)throw new Error("Input is missing");if(t.length<2||t.length>3)throw new Error("Invaid input number.");if(3===t.length&&t[2].dims.length>2)throw new Error("Invalid input shape of C");if(1!==t[0].dataType||1!==t[1].dataType||3===t.length&&1!==t[2].dataType)throw new Error("Invalid input type.");if(t[0].dataType!==t[1].dataType||3===t.length&&t[0].dataType!==t[2].dataType)throw new Error("Input types are mismatched")}(t.inputs),t.compute(function(t,e){var n={name:"Gemm",inputTypes:3===t.length?[s.GpuDataType.default,s.GpuDataType.default,s.GpuDataType.default]:[s.GpuDataType.default,s.GpuDataType.default],cacheHint:e.cacheKey};return r(r({},n),{get:function(){return function(t,e,n){var a=e[0].dims.slice(),u=e[1].dims.slice(),c=o(i.GemmUtil.getShapeOfGemmResult(a,n.transA,u,n.transB,3===e.length?e[2].dims:void 0),3),l=c[0],f=c[1],p=c[2],d=[l,f];if(!d)throw new Error("Can't use gemm on the given tensors");var h=i.ShapeUtil.size(d),g="";n.transA&&n.transB?g="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?g="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?g="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(g="value += a[m * K + k] * b[k * N + n];");var y="f32",b=1===n.alpha?"":"value *= alpha;",m=3===e.length?"value += beta * c[".concat(function(t,e,n){if(0===n.length)return"0u";var r=1===n.length&&1!==t||2===n.length&&n[0]!==t,o=n[n.length-1]!==e,i="0u";return r||(i+="+ m * ".concat(n[n.length-1],"u")),o||(i+="+n"),i}(l,f,e[2].dims),"];"):"",v=["@group(0) @binding(0) var<storage, read> a : array<".concat(y,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(y,">;")];return 3===e.length&&v.push("@group(0) @binding(2) var<storage, read> c : array<".concat(y,">;")),r(r({},t),{outputs:[{dims:d,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n  const M: u32 = ".concat(l,"u;\n  const N: u32 = ").concat(f,"u;\n  const K: u32 = ").concat(p,"u;\n  const alpha = ").concat(y,"(").concat(n.alpha,");\n  const beta = ").concat(y,"(").concat(n.beta,");\n\n  ").concat(v.join("\n"),"\n  @group(0) @binding(").concat(e.length,") var<storage, read_write> output : array<").concat(y,">;\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n\n    let m = global_id.x / N;\n    let n = global_id.x % N;\n\n    var value = ").concat(y,"(0);\n    for (var k: u32 = 0u; k<").concat(p,"u; k++) {\n      ").concat(g,"\n    }\n\n    ").concat(b,"\n    ").concat(m,"\n    output[global_id.x] = value;\n\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,t,e)}})}(t.inputs,e))},e.parseGemmAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)}},1522:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.matMul=e.createMatmulProgramInfoLoader=void 0;var o=n(6952),i=n(1163),a=n(3997);e.createMatmulProgramInfoLoader=function(t,e){var n,s,u=(n=t.length>2,s=e.activationCacheKey,{name:"MatMul",inputTypes:n?[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:s});return r(r({},u),{get:function(){return function(t,e,n){var s=e[0].dims,u=e[1].dims,c=o.BroadcastUtil.calcShape(s,u,!0);if(!c)throw new Error("Can't use matmul on the given tensors");var l=o.ShapeUtil.size(c),f="f32",p=(0,a.getActicationSnippet)(n),d=p.activationFunction,h=p.applyActivation,g=c[c.length-2],y=s[s.length-1],b=c[c.length-1];return r(r({},t),{outputs:[{dims:c,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(t){return"\n  const M: u32 = ".concat(g,"u;\n  const N: u32 = ").concat(b,"u;\n  const K: u32 = ").concat(y,"u;\n\n  @group(0) @binding(0) var<storage, read> a : array<").concat(f,">;\n  @group(0) @binding(1) var<storage, read> b : array<").concat(f,">;\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(f,">;\n\n  ").concat(d,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(l),"\n\n    let stack = global_idx / (M * N);\n    let mn = global_idx % (M * N);\n    let n = global_idx % N;\n    let m = mn / N;\n\n    let offsetA = stack * (M * K);\n    let offsetB = stack * (K * N);\n\n    var value = ").concat(f,"(0);\n    for (var k: u32 = 0u; k<").concat(y,"u; k++) {\n      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];\n    }\n    ").concat(h,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(u,t,e)}})},e.matMul=function(t){!function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("inputs should be float type")}(t.inputs),t.compute((0,e.createMatmulProgramInfoLoader)(t.inputs,{activation:"",activationCacheKey:""}))}},5262:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseGlobalMaxPoolAttributes=e.parseMaxPoolAttributes=e.maxPool=e.globalAveragePool=e.parseGlobalAveragePoolAttributes=e.averagePool=e.parseAveragePoolAttributes=void 0;var i=n(6952),a=n(387),s=n(1163),u=n(2075),c=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if(4!==t[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.");if(1!==t[0].dataType)throw new Error("Invalid input type.")},l=function(t,e,n){var r="NHWC"===e.format,o=r?[t[0].dims[0],t[0].dims[3],t[0].dims[1],t[0].dims[2]]:t[0].dims.slice(),a=Object.hasOwnProperty.call(e,"dilations"),s=e.kernelShape.slice(),u=e.strides.slice(),c=a?e.dilations.slice():[],l=e.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,o,s,u,c,l);var f=i.PoolConvUtil.computePoolOutputShape(n,o,u,c,s,l,e.autoPad),p=Object.assign({},e);return a?Object.assign(p,{kernelShape:s,strides:u,pads:l,dilations:c,cacheKey:e.cacheKey}):Object.assign(p,{kernelShape:s,strides:u,pads:l,cacheKey:e.cacheKey}),[p,r?[f[0],f[2],f[3],f[1]]:f]},f=function(t,e,n,r,o,a,s,c){var l="NHWC"===r.format,f=e.length,p=i.ShapeUtil.size(n),d=(0,u.createIndicesHelper)("output",n),h=(0,u.createIndicesHelper)("x",e);if(r.kernelShape.length<=2){var g,y=r.kernelShape[r.kernelShape.length-1],b=r.strides[r.strides.length-1],m=r.pads[r.pads.length/2-1],v=f-(l?2:1),w="",_="";if(g=m+r.pads[r.pads.length-1]!==0?"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(v,"] = indices[").concat(v,"] * ").concat(b," - ").concat(m," + i;\n                if (xIndices[").concat(v,"] < 0 || xIndices[").concat(v,"] >= ").concat(e[v],") {\n                  pad++;\n                  continue;\n                }\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(v,"] = indices[").concat(v,"] * ").concat(b," - ").concat(m," + i;\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"),2===r.kernelShape.length){var x=r.kernelShape[r.kernelShape.length-2],T=r.strides[r.strides.length-2],S=r.pads[r.pads.length/2-2],A=r.pads[r.pads.length-2],O=f-(l?3:2),P=e[O];w=S+A!==0?"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(O,"] = indices[").concat(O,"] * ").concat(T," - ").concat(S," + j;\n                  if (xIndices[").concat(O,"] < 0 || xIndices[").concat(O,"] >= ").concat(P,") {\n                    pad+= ").concat(y,";\n                    continue;\n                  }\n              "):"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(O,"] = indices[").concat(O,"] * ").concat(T," - ").concat(S," + j;\n                "),_="\n              }\n            "}return"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(s,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(s,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var value: ").concat(s," = ").concat(s,"(").concat(c,");\n              var pad = 0;\n              ").concat(w,"\n              ").concat(g,"\n              ").concat(_,"\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }")}if(l)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var E,I=i.ShapeUtil.size(r.kernelShape),D=i.ShapeUtil.computeStrides(r.kernelShape),k=D.length,C=r.pads.length;return E=r.pads.reduce((function(t,e){return t+e}))?"\n                if (xIndices[j] >= inputDims[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              }\n              let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n              ").concat(o,"\n            "),"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(s,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(s,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            const pads = array<u32, ").concat(C,">(").concat(r.pads.map((function(t){return"".concat(t,"u")})).join(","),");\n            const inputDims = array<u32, ").concat(f,">(").concat(e.map((function(t){return"".concat(t,"u")})).join(","),");\n            const kernelStrides = array<u32, ").concat(k,">(").concat(D.map((function(t){return"".concat(t,"u")})).join(","),");\n            const strides = array<u32, ").concat(k,">(").concat(r.strides.map((function(t){return"".concat(t,"u")})).join(","),");\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var offsets: array<u32, ").concat(k,">;\n\n              var value = ").concat(s,"(").concat(c,");\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < ").concat(I,"u; i++) {\n                var offset = i;\n                for (var j = 0u; j < ").concat(k-1,"u; j++) {\n                  offsets[j] = offset / kernelStrides[j];\n                  offset -= offsets[j] * kernelStrides[j];\n                }\n                offsets[").concat(k-1,"] = offset;\n\n                isPad = false;\n                for (var j = ").concat(f-k,"u; j < ").concat(f,"u; j++) {\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-k,"u]\n                    + offsets[j - ").concat(f-k,"u] - pads[j - 2u];\n                  ").concat(E,"\n              }\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }")},p=function(t){return{format:t.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],ceilMode:t.ceil_mode,kernelShape:t.kernel_shape,strides:t.strides,pads:t.pads}},d=function(t,e,n,a){var u=o(l(t,a,n),2),c=u[0],p=u[1],d=i.ShapeUtil.size(c.kernelShape),h="f32",g="";return c.countIncludePad?g+="value /= ".concat(h,"(").concat(d,");"):g+="value /= ".concat(h,"(").concat(d," - pad);"),r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return f(e,t[0].dims,p,c,"value += x_val;",g,h,"0.0")},dispatchGroup:function(){return{x:Math.ceil(i.ShapeUtil.size(p)/64)}}})};e.parseAveragePoolAttributes=function(t){var e=0!==t.count_include_pad,n=p(t);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)(r({countIncludePad:e},n))},e.averagePool=function(t,e){c(t.inputs);var n={name:"AveragePool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs,n,!1,e)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};e.parseGlobalAveragePoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalAveragePool=function(t,e){c(t.inputs);var n={name:"GlobalAveragePool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs,n,!0,e)}}))};var g=function(t,e,n,a){var u=o(l(t,a,n),2),c=u[0],p=u[1];return r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return f(e,t[0].dims,p,c,"\n      value = max(x_val, value);\n    ","","f32","-1e5")},dispatchGroup:function(){return{x:Math.ceil(i.ShapeUtil.size(p)/64)}}})};e.maxPool=function(t,e){c(t.inputs);var n={name:"MaxPool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs,n,!1,e)}}))},e.parseMaxPoolAttributes=function(t){var e=t.storage_order,n=t.dilations,o=p(t);if(0!==e)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==o.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)(r({storageOrder:e,dilations:n},o))},e.parseGlobalMaxPoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalMaxPool=function(t,e){c(t.inputs);var n={name:"GlobalMaxPool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs,n,!0,e)}}))}},2625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=e.createTransposeProgramInfo=e.transposeProgramMetadata=void 0;var a=n(6952),s=n(387),u=n(1163),c=n(2075);e.transposeProgramMetadata={name:"Transpose",inputTypes:[u.GpuDataType.default]};var l=function(t,e){return e&&e.length!==t.length?i([],o(t.keys()),!1).reverse():e};e.createTransposeProgramInfo=function(t,n){var o=t.dims,i=l(o,n),s=function(t,e){return a.ShapeUtil.sortBasedOnPerm(t,l(t,e))}(o,i),f=o.length,p=a.ShapeUtil.size(s),d=(0,c.createIndicesHelper)("output",s),h=(0,c.createIndicesHelper)("a",o);return r(r({},e.transposeProgramMetadata),{outputs:[{dims:s,dataType:t.dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(t){return"\n  @group(0) @binding(0) var<storage, read> a : array<".concat("f32",">;\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\n\n  ").concat(function(t,e){var n=[];n.push("fn perm(a: ptr<function, array<u32, ".concat(e,">>, i: ptr<function, array<u32, ").concat(e,">>) {"));for(var r=0;r<e;++r)n.push("\t(*a)[".concat(t[r],"]=(*i)[").concat(r,"];"));return n.push("\t}"),n.join("\n")}(i,f),"\n  ").concat(d.o2iImpl,"\n  ").concat(h.i2oImpl,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n    ").concat(d.indicesVariableDeclaration("indices"),"\n    ").concat(d.o2iCall("global_idx","indices"),"\n    ").concat(h.indicesVariableDeclaration("aIndices"),"\n    perm(&aIndices, &indices);\n\n    output[global_idx] = a[").concat(h.i2oExpression("aIndices"),"];\n  }")},dispatchGroup:function(){return{x:Math.ceil(p/64)}}})},e.transpose=function(t,n){!function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if(1!==t[0].dataType)throw new Error("input should be float tensor")}(t.inputs),t.compute(r(r({},e.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,e.createTransposeProgramInfo)(t.inputs[0],n.perm)}}))},e.parseTransposeAttributes=function(t){return(0,s.createAttributeWithCacheKey)({perm:t.perm})}},9302:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sinh=e.sin=e.sigmoid=e.reciprocal=e.neg=e.floor=e.erf=e.parseEluAttributes=e.elu=e.cosh=e.cos=e.ceil=e.clip=e.clipV10=e.atanh=e.atan=e.asinh=e.asin=e.acosh=e.acos=e.abs=void 0;var o=n(6952),i=n(387),a=n(1163),s=function(t,e,n,i,s){var u={name:e,inputTypes:[a.GpuDataType.default],cacheHint:s};return r(r({},u),{get:function(){return function(t,e,n,i){return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r){var o,i=Math.ceil(e/4);return o="string"==typeof n?"".concat(n,"(a)"):n("a"),"\n  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;\n  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;\n\n  ".concat(null!=r?r:"","\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(i),"\n\n    let a = inputData[global_idx];\n    outputData[global_idx] = ").concat(o,";\n  }")}(t,o.ShapeUtil.size(e.dims),n,i)},outputs:[{dims:e.dims,dataType:e.dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(t){return{x:Math.ceil(o.ShapeUtil.size(t[0].dims)/64/4)}}})}(u,t,n,i)}})};e.abs=function(t){t.compute(s(t.inputs[0],"Abs","abs"))},e.acos=function(t){t.compute(s(t.inputs[0],"Acos","acos"))},e.acosh=function(t){t.compute(s(t.inputs[0],"Acosh","acosh"))},e.asin=function(t){t.compute(s(t.inputs[0],"Asin","asin"))},e.asinh=function(t){t.compute(s(t.inputs[0],"Asinh","asinh"))},e.atan=function(t){t.compute(s(t.inputs[0],"Atan","atan"))},e.atanh=function(t){t.compute(s(t.inputs[0],"Atanh","atanh"))},e.clipV10=function(t,e){t.compute(s(t.inputs[0],"Clip",(function(t){return"clamp(".concat(t,", clip_min_, clip_max_)")}),"\n    const clip_min_: vec4<f32> = vec4(f32(".concat(e.min,"));\n    const clip_max_: vec4<f32> = vec4(f32(").concat(e.max,"));\n"),e.cacheKey),{inputs:[0]})},e.clip=function(t){var n,r,a,s=(r=(n=t.inputs).length>=2?n[1].getFloat32Array()[0]:o.MIN_CLIP,a=n.length>=3?n[2].getFloat32Array()[0]:o.MAX_CLIP,(0,i.createAttributeWithCacheKey)({min:r,max:a}));(0,e.clipV10)(t,s)},e.ceil=function(t){t.compute(s(t.inputs[0],"Ceil","ceil"))},e.cos=function(t){t.compute(s(t.inputs[0],"Cos","cos"))},e.cosh=function(t){t.compute(s(t.inputs[0],"Cosh","cosh"))},e.elu=function(t,e){t.compute(s(t.inputs[0],"Elu",(function(t){return"elu_vf32(".concat(t,")")}),"\n  const elu_alpha_: f32 = f32(".concat(e.alpha,");\n\n  fn elu_f32(a: f32) -> f32 {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }"),e.cacheKey))},e.parseEluAttributes=function(t){return(0,i.createAttributeWithCacheKey)(t)},e.erf=function(t){t.compute(s(t.inputs[0],"Erf",(function(t){return"erf_vf32(".concat(t,")")}),"\n  const r0: f32 = 0.3275911;\n  const r1: f32 = 0.254829592;\n  const r2: f32 = -0.284496736;\n  const r3: f32 = 1.421413741;\n  const r4: f32 = -1.453152027;\n  const r5: f32 = 1.061405429;\n\n  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {\n    let absv = abs(v);\n    let x = 1.0 / (1.0 + r0 * absv);\n    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n  }"))},e.floor=function(t){t.compute(s(t.inputs[0],"Floor","floor"))},e.neg=function(t){t.compute(s(t.inputs[0],"Neg",(function(t){return"-".concat(t)})))},e.reciprocal=function(t){t.compute(s(t.inputs[0],"Reciprocal",(function(t){return"1.0/".concat(t)})))},e.sigmoid=function(t){t.compute(s(t.inputs[0],"Sigmoid",(function(t){return"(1.0 / (1.0 + exp(-".concat(t,")))")})))},e.sin=function(t){t.compute(s(t.inputs[0],"Sin","sin"))},e.sinh=function(t){t.compute(s(t.inputs[0],"Sinh","sinh"))},e.sqrt=function(t){t.compute(s(t.inputs[0],"Sqrt","sqrt"))},e.tan=function(t){t.compute(s(t.inputs[0],"Tan","tan"))},e.tanh=function(t){t.compute(s(t.inputs[0],"Tanh","tanh"))}},8305:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var a=n(4955),s=n(2075),u=function(){function t(t){this.backend=t,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n,a){var s,u,c,l,f=this,p=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&d.writeTimestamp(this.backend.profilingQuerySet,0),d.setPipeline(t.computePipeline);var h=[];try{for(var g=r(e),y=g.next();!y.done;y=g.next()){var b=y.value;h.push({binding:h.length,resource:{buffer:b.buffer}})}}catch(t){s={error:t}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}try{for(var m=r(n),v=m.next();!v.done;v=m.next()){var w=v.value;h.push({binding:h.length,resource:{buffer:w.buffer}})}}catch(t){c={error:t}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}var _=p.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:h});if(d.setBindGroup(0,_),d.dispatchWorkgroups.apply(d,i([],o(a),!1)),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){d.writeTimestamp(this.backend.profilingQuerySet,1);var x=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),T=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,x.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(x.buffer,0,T.buffer,0,16),this.backend.flush();var S=this.backend.currentKernelId,A=this.backend.kernels.get(S)[0];T.buffer.mapAsync(GPUMapMode.READ).then((function(){var t=new BigUint64Array(T.buffer.getMappedRange()),e=t[0],n=t[1];T.buffer.unmap(),void 0===f.backend.profilingTimeBase&&(f.backend.profilingTimeBase=e);var r=Number(e-f.backend.profilingTimeBase),o=Number(n-f.backend.profilingTimeBase);if(!Number.isSafeInteger(r)||!Number.isSafeInteger(o))throw new RangeError("incorrect timestamp range");f.backend.gpuDataManager.release(x.id),f.backend.gpuDataManager.release(T.id),console.log('[profiling] kernel "'.concat(S,"|").concat(A,'" execution time: ').concat(o-r," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},t.prototype.dispose=function(){},t.prototype.build=function(t,e){var n=this.backend.device,r=t.getShaderSource((0,s.createShaderHelper)(e)),o=n.createShaderModule({code:r});return(0,a.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(r)})),{programInfo:t,computePipeline:n.createComputePipeline({compute:{module:o,entryPoint:"main"},layout:"auto"})}},t.prototype.normalizeDispatchGroupSize=function(t){var e="number"==typeof t?t:t.x,n="number"==typeof t?1:t.y||1,r="number"==typeof t?1:t.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(e<=o&&n<=o&&r<=o)return[e,n,r];var i=e*n*r,a=Math.ceil(Math.sqrt(i));if(a>o){if((a=Math.ceil(Math.cbrt(i)))>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a]}return[a,a,1]},t}();e.ProgramManager=u},1163:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.GpuDataType=void 0,(n=e.GpuDataType||(e.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},3899:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=function(t,r,o,i){if("object"==typeof t&&null!==t){if(o.has(t))throw new Error("Circular reference in options");o.add(t)}Object.entries(t).forEach((function(t){var a=n(t,2),s=a[0],u=a[1],c=r?r+s:s;if("object"==typeof u)(0,e.iterateExtraOptions)(u,c+".",o,i);else if("string"==typeof u||"number"==typeof u)i(c,u.toString());else{if("boolean"!=typeof u)throw new Error("Can't handle extra config type: ".concat(typeof u));i(c,u?"1":"0")}}))}},9544:function(t,e,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;var c,l,f,p=n(1670),d=n(7675),h=a(n(1259)),g=n(263),y=function(){return!!p.env.wasm.proxy&&"undefined"!=typeof document},b=!1,m=!1,v=!1,w=[],_=[],x=[],T=[],S=[],A=[],O=function(){if(b||!m||v||!c)throw new Error("worker not ready")},P=function(t){switch(t.data.type){case"init-wasm":b=!1,t.data.err?(v=!0,l[1](t.data.err)):(m=!0,l[0]());break;case"init-ort":t.data.err?f[1](t.data.err):f[0]();break;case"create_allocate":t.data.err?w.shift()[1](t.data.err):w.shift()[0](t.data.out);break;case"create_finalize":t.data.err?_.shift()[1](t.data.err):_.shift()[0](t.data.out);break;case"create":t.data.err?x.shift()[1](t.data.err):x.shift()[0](t.data.out);break;case"release":t.data.err?T.shift()[1](t.data.err):T.shift()[0]();break;case"run":t.data.err?S.shift()[1](t.data.err):S.shift()[0](t.data.out);break;case"end-profiling":t.data.err?A.shift()[1](t.data.err):A.shift()[0]()}},E="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;e.initWasm=function(){return s(void 0,void 0,void 0,(function(){return u(this,(function(t){if(y()){if(m)return[2];if(b)throw new Error("multiple calls to 'initWasm()' detected.");if(v)throw new Error("previous call to 'initWasm()' failed.");return b=!0,void 0===p.env.wasm.wasmPaths&&E&&0!==E.indexOf("blob:")&&(p.env.wasm.wasmPaths=E.substr(0,+E.lastIndexOf("/")+1)),[2,new Promise((function(t,e){null==c||c.terminate(),(c=n(8050).Z()).onmessage=P,l=[t,e];var r={type:"init-wasm",in:p.env.wasm};c.postMessage(r)}))]}return[2,(0,g.initializeWebAssembly)(p.env.wasm)]}))}))},e.initOrt=function(t,e){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return y()?(O(),[2,new Promise((function(n,r){f=[n,r];var o={type:"init-ort",in:{numThreads:t,loggingLevel:e}};c.postMessage(o)}))]):[3,1];case 1:return h.initOrt(t,e),[4,(0,d.init)((0,g.getInstance)())];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.createSessionAllocate=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return y()?(O(),[2,new Promise((function(e,n){w.push([e,n]);var r={type:"create_allocate",in:{model:t}};c.postMessage(r,[t.buffer])}))]):[2,h.createSessionAllocate(t)]}))}))},e.createSessionFinalize=function(t,e){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){return y()?(O(),[2,new Promise((function(n,r){_.push([n,r]);var o={type:"create_finalize",in:{modeldata:t,options:e}};c.postMessage(o)}))]):[2,h.createSessionFinalize(t,e)]}))}))},e.createSession=function(t,e){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){return y()?(O(),[2,new Promise((function(n,r){x.push([n,r]);var o={type:"create",in:{model:t,options:e}};c.postMessage(o,[t.buffer])}))]):[2,h.createSession(t,e)]}))}))},e.releaseSession=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return y()?(O(),[2,new Promise((function(e,n){T.push([e,n]);var r={type:"release",in:t};c.postMessage(r)}))]):(h.releaseSession(t),[2])}))}))},e.run=function(t,e,n,r,o){return s(void 0,void 0,void 0,(function(){return u(this,(function(i){return y()?(O(),[2,new Promise((function(i,a){S.push([i,a]);var s={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:r,options:o}};c.postMessage(s,h.extractTransferableBuffers(n))}))]):[2,h.run(t,e,n,r,o)]}))}))},e.endProfiling=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return y()?(O(),[2,new Promise((function(e,n){A.push([e,n]);var r={type:"end-profiling",in:t};c.postMessage(r)}))]):(h.endProfiling(t),[2])}))}))}},7918:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;var r=n(3899),o=n(9444),i=n(263);e.setRunOptions=function(t){var e=(0,i.getInstance)(),n=0,a=[],s=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(t.logSeverityLevel));if(void 0===(null==t?void 0:t.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(t.logVerbosityLevel));void 0===(null==t?void 0:t.terminate)&&(s.terminate=!1);var u=0;if(void 0!==(null==t?void 0:t.tag)&&(u=(0,o.allocWasmString)(t.tag,a)),0===(n=e._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,u)))throw new Error("Can't create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,(function(t,r){var i=(0,o.allocWasmString)(t,a),s=(0,o.allocWasmString)(r,a);if(0!==e._OrtAddRunConfigEntry(n,i,s))throw new Error("Can't set a run config entry: ".concat(t," - ").concat(r))})),[n,a]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),a.forEach(e._free),t}}},6640:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;var a,s=n(2806),u=n(1670),c=n(2850),l=n(9544),f=n(7917),p=function(){function t(){}return t.prototype.createSessionAllocate=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return[4,n.sent().arrayBuffer()];case 2:return e=n.sent(),[2,(0,l.createSessionAllocate)(new Uint8Array(e))]}}))}))},t.prototype.loadModel=function(t,e){return r(this,void 0,void 0,(function(){var n,r,p,d,h;return o(this,(function(o){switch(o.label){case 0:return a?[3,2]:[4,(0,l.initOrt)(u.env.wasm.numThreads,(0,f.logLevelStringToEnum)(u.env.logLevel))];case 1:o.sent(),a=!0,o.label=2;case 2:return"string"!=typeof t?[3,9]:"undefined"!=typeof fetch?[3,5]:[4,(0,c.promisify)(s.readFile)(t)];case 3:return n=o.sent(),[4,(0,l.createSession)(n,e)];case 4:return p=i.apply(void 0,[o.sent(),3]),this.sessionId=p[0],this.inputNames=p[1],this.outputNames=p[2],[3,8];case 5:return[4,this.createSessionAllocate(t)];case 6:return r=o.sent(),[4,(0,l.createSessionFinalize)(r,e)];case 7:d=i.apply(void 0,[o.sent(),3]),this.sessionId=d[0],this.inputNames=d[1],this.outputNames=d[2],o.label=8;case 8:return[3,11];case 9:return[4,(0,l.createSession)(t,e)];case 10:h=i.apply(void 0,[o.sent(),3]),this.sessionId=h[0],this.inputNames=h[1],this.outputNames=h[2],o.label=11;case 11:return[2]}}))}))},t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,(0,l.releaseSession)(this.sessionId)]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var r,i,a,s,c,f,p=this;return o(this,(function(o){switch(o.label){case 0:return r=[],i=[],Object.entries(t).forEach((function(t){var e=t[0],n=t[1],o=p.inputNames.indexOf(e);if(-1===o)throw new Error("invalid input '".concat(e,"'"));r.push(n),i.push(o)})),a=[],Object.entries(e).forEach((function(t){var e=t[0],n=p.outputNames.indexOf(e);if(-1===n)throw new Error("invalid output '".concat(e,"'"));a.push(n)})),[4,(0,l.run)(this.sessionId,i,r.map((function(t){return[t.type,t.dims,t.data]})),a,n)];case 1:for(s=o.sent(),c={},f=0;f<s.length;f++)c[this.outputNames[a[f]]]=new u.Tensor(s[f][0],s[f][2],s[f][1]);return[2,c]}}))}))},t.prototype.startProfiling=function(){},t.prototype.endProfiling=function(){(0,l.endProfiling)(this.sessionId)},t}();e.OnnxruntimeWebAssemblySessionHandler=p},7622:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;var o=n(3899),i=n(9444),a=n(263);e.setSessionOptions=function(t){var e,n,s,u,c=(0,a.getInstance)(),l=0,f=[],p=t||{};!function(t){t.extra||(t.extra={}),t.extra.session||(t.extra.session={});var e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some((function(t){return"webgpu"===("string"==typeof t?t:t.name)}))&&(t.enableMemPattern=!1)}(p);try{var d=function(t){switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(t))}}(null!==(e=p.graphOptimizationLevel)&&void 0!==e?e:"all"),h=function(t){switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(t))}}(null!==(n=p.executionMode)&&void 0!==n?n:"sequential"),g="string"==typeof p.logId?(0,i.allocWasmString)(p.logId,f):0,y=null!==(s=p.logSeverityLevel)&&void 0!==s?s:2;if(!Number.isInteger(y)||y<0||y>4)throw new Error("log serverity level is not valid: ".concat(y));var b=null!==(u=p.logVerbosityLevel)&&void 0!==u?u:0;if(!Number.isInteger(b)||b<0||b>4)throw new Error("log verbosity level is not valid: ".concat(b));var m="string"==typeof p.optimizedModelFilePath?(0,i.allocWasmString)(p.optimizedModelFilePath,f):0;if(0===(l=c._OrtCreateSessionOptions(d,!!p.enableCpuMemArena,!!p.enableMemPattern,h,!!p.enableProfiling,0,g,y,b,m)))throw new Error("Can't create session options");return p.executionProviders&&function(t,e,n){var o,s;try{for(var u=r(e),c=u.next();!c.done;c=u.next()){var l=c.value,f="string"==typeof l?l:l.name;switch(f){case"xnnpack":f="XNNPACK";break;case"webnn":if(f="WEBNN","string"!=typeof l){var p=l;if(null==p?void 0:p.deviceType){var d=(0,i.allocWasmString)("deviceType",n),h=(0,i.allocWasmString)(p.deviceType,n);if(0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(t,d,h))throw new Error("Can't set a session config entry: 'deviceType' - ".concat(p.deviceType))}if((null==p?void 0:p.powerPreference)&&(d=(0,i.allocWasmString)("powerPreference",n),h=(0,i.allocWasmString)(p.powerPreference,n),0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(t,d,h)))throw new Error("Can't set a session config entry: 'powerPreference' - ".concat(p.powerPreference))}break;case"webgpu":f="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported EP: ".concat(f))}var g=(0,i.allocWasmString)(f,n);if(0!==(0,a.getInstance)()._OrtAppendExecutionProvider(t,g))throw new Error("Can't append execution provider: ".concat(f))}}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}}(l,p.executionProviders,f),void 0!==p.extra&&(0,o.iterateExtraOptions)(p.extra,"",new WeakSet,(function(t,e){var n=(0,i.allocWasmString)(t,f),r=(0,i.allocWasmString)(e,f);if(0!==c._OrtAddSessionConfigEntry(l,n,r))throw new Error("Can't set a session config entry: ".concat(t," - ").concat(e))})),[l,f]}catch(t){throw 0!==l&&c._OrtReleaseSessionOptions(l),f.forEach(c._free),t}}},9444:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;var r=n(263);e.allocWasmString=function(t,e){var n=(0,r.getInstance)(),o=n.lengthBytesUTF8(t)+1,i=n._malloc(o);return n.stringToUTF8(t,i,o),e.push(i),i}},7917:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logLevelStringToEnum=e.tensorTypeToTypedArrayConstructor=e.getTensorElementSize=e.tensorDataTypeEnumToString=e.tensorDataTypeStringToEnum=void 0,e.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(t))}},e.tensorDataTypeEnumToString=function(t){switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:case 10:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(t))}},e.getTensorElementSize=function(t){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t]},e.tensorTypeToTypedArrayConstructor=function(t){switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(t))}},e.logLevelStringToEnum=function(t){switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(t))}}},1259:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;var s=n(7918),u=n(7622),c=n(9444),l=n(7917),f=n(263);e.initOrt=function(t,e){var n=(0,f.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error("Can't initialize onnxruntime. error code = ".concat(n))};var p=new Map;e.createSessionAllocate=function(t){var e=(0,f.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=function(t,e){var n,r=(0,f.getInstance)(),o=0,a=0,s=[];try{if(a=(n=i((0,u.setSessionOptions)(e),2))[0],s=n[1],0===(o=r._OrtCreateSession(t[0],t[1],a)))throw new Error("Can't create a session")}finally{r._free(t[0]),0!==a&&r._OrtReleaseSessionOptions(a),s.forEach(r._free)}for(var c=r._OrtGetInputCount(o),l=r._OrtGetOutputCount(o),d=[],h=[],g=[],y=[],b=0;b<c;b++){var m=r._OrtGetInputName(o,b);if(0===m)throw new Error("Can't get an input name");h.push(m),d.push(r.UTF8ToString(m))}for(b=0;b<l;b++){var v=r._OrtGetOutputName(o,b);if(0===v)throw new Error("Can't get an output name");y.push(v),g.push(r.UTF8ToString(v))}return p.set(o,[o,h,y]),[o,d,g]},e.createSession=function(t,n){var r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=function(t){var e=(0,f.getInstance)(),n=p.get(t);if(!n)throw new Error("invalid session id");var r=n[0],o=n[1],i=n[2];o.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),p.delete(t)},e.run=function(t,e,n,a,u){return r(void 0,void 0,void 0,(function(){var r,d,h,g,y,b,m,v,w,_,x,T,S,A,O,P,E,I,D,k,C,R,F,M,N,L,j,U,B,V,G,z,W,H,q,K,X,Y,J,Z,Q,$,tt,et,nt;return o(this,(function(o){switch(o.label){case 0:if(r=(0,f.getInstance)(),!(d=p.get(t)))throw new Error("invalid session id");h=d[0],g=d[1],y=d[2],b=e.length,m=a.length,v=0,w=[],_=[],x=[],o.label=1;case 1:for(o.trys.push([1,,7,8]),nt=i((0,s.setRunOptions)(u),2),v=nt[0],w=nt[1],T=function(t){var e=n[t][0],o=n[t][1],i=n[t][2],a=void 0,s=void 0;if(Array.isArray(i)){s=4*i.length,a=r._malloc(s),x.push(a);for(var u=a/4,f=0;f<i.length;f++){if("string"!=typeof i[f])throw new TypeError("tensor data at index ".concat(f," is not a string"));r.HEAPU32[u++]=(0,c.allocWasmString)(i[f],x)}}else s=i.byteLength,a=r._malloc(s),x.push(a),r.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,s),a);var p=r.stackSave(),d=r.stackAlloc(4*o.length);try{var h=d/4;o.forEach((function(t){return r.HEAP32[h++]=t}));var g=r._OrtCreateTensor((0,l.tensorDataTypeStringToEnum)(e),a,s,d,o.length);if(0===g)throw new Error("Can't create a tensor");_.push(g)}finally{r.stackRestore(p)}},N=0;N<b;N++)T(N);S=r.stackSave(),A=r.stackAlloc(4*b),O=r.stackAlloc(4*b),P=r.stackAlloc(4*m),E=r.stackAlloc(4*m),o.label=2;case 2:for(o.trys.push([2,,5,6]),I=A/4,D=O/4,k=P/4,C=E/4,N=0;N<b;N++)r.HEAPU32[I++]=_[N],r.HEAPU32[D++]=g[e[N]];for(N=0;N<m;N++)r.HEAPU32[k++]=0,r.HEAPU32[C++]=y[a[N]];return R=r._OrtRun(h,O,A,b,E,m,P,v),(F=r.jsepRunPromise)&&void 0!==F.then?[4,F]:[3,4];case 3:R=o.sent(),o.label=4;case 4:if(M=[],0===R)for(N=0;N<m;N++){L=r.HEAPU32[P/4+N],j=r.stackSave(),U=r.stackAlloc(16),B=void 0,V=0;try{if(0!==(R=r._OrtGetTensorData(L,U,U+4,U+8,U+12)))throw new Error("Can't access output tensor data. error code = ".concat(R));for(G=U/4,z=r.HEAPU32[G++],V=r.HEAPU32[G++],W=r.HEAPU32[G++],H=r.HEAPU32[G++],q=[],K=0;K<H;K++)q.push(r.HEAPU32[W/4+K]);if(r._OrtFree(W),X=0===q.length?1:q.reduce((function(t,e){return t*e})),"string"===(B=(0,l.tensorDataTypeEnumToString)(z))){for(Y=[],J=V/4,Z=0;Z<X;Z++)Q=r.HEAPU32[J++],$=Z===X-1?void 0:r.HEAPU32[J]-Q,Y.push(r.UTF8ToString(Q,$));M.push([B,q,Y])}else tt=(0,l.tensorTypeToTypedArrayConstructor)(B),et=new tt(X),new Uint8Array(et.buffer,et.byteOffset,et.byteLength).set(r.HEAPU8.subarray(V,V+et.byteLength)),M.push([B,q,et])}finally{r.stackRestore(j),"string"===B&&V&&r._free(V),r._OrtReleaseTensor(L)}}if(0===R)return[2,M];throw new Error("failed to call OrtRun(). error code = ".concat(R,"."));case 5:return r.stackRestore(S),[7];case 6:return[3,8];case 7:return _.forEach(r._OrtReleaseTensor),x.forEach(r._free),r._OrtReleaseRunOptions(v),w.forEach(r._free),[7];case 8:return[2]}}))}))},e.endProfiling=function(t){var e=(0,f.getInstance)(),n=p.get(t);if(!n)throw new Error("invalid session id");var r=n[0],o=e._OrtEndProfiling(r);if(0===o)throw new Error("Can't get an profile file name");e._OrtFree(o)},e.extractTransferableBuffers=function(t){var e,n,r=[];try{for(var o=a(t),i=o.next();!i.done;i=o.next()){var s=i.value[2];!Array.isArray(s)&&s.buffer&&r.push(s.buffer)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},263:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;var c,l=i(n(6449)),f=u(n(932)),p=n(3474),d=!1,h=!1,g=!1,y=function(t,e){return e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm"};e.initializeWebAssembly=function(t){return a(void 0,void 0,void 0,(function(){var e,r,o,i,a,u,b,m,v,w,_;return s(this,(function(s){switch(s.label){case 0:if(d)return[2,Promise.resolve()];if(h)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(g)throw new Error("previous call to 'initializeWebAssembly()' failed.");return h=!0,e=t.initTimeout,r=t.numThreads,o=t.simd,i=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}}(),a=o&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}}(),u="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=y(!1,i),m=y(a,i),v="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0,w=!1,_=[],e>0&&_.push(new Promise((function(t){setTimeout((function(){w=!0,t()}),e)}))),_.push(new Promise((function(t,e){var r=i?p:f.default,o={locateFile:function(t,e){return i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t===b?null!=v?v:(null!=u?u:e)+m:e+t}};if(i)if("undefined"==typeof Blob)o.mainScriptUrlOrBlob=l.join("/","ort-wasm-threaded.js");else{var a="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");o.mainScriptUrlOrBlob=new Blob([a],{type:"text/javascript"})}r(o).then((function(e){h=!1,d=!0,c=e,t()}),(function(t){h=!1,g=!0,e(t)}))}))),[4,Promise.race(_)];case 1:if(s.sent(),w)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(e,"ms"));return[2]}}))}))},e.getInstance=function(){if(d&&c)return c;throw new Error("WebAssembly is not initialized yet.")},e.dispose=function(){var t;!d||h||g||(h=!0,null===(t=c.PThread)||void 0===t||t.terminateAllThreads(),c=void 0,h=!1,d=!1,g=!0)}},8050:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6614),o=n.n(r);function i(){return o()('/*!\n* ONNX Runtime Web v1.15.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n!function(){var e={899:function(e,r){"use strict";var n=this&&this.__read||function(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,a,o=n.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(t=o.next()).done;)i.push(t.value)}catch(e){a={error:e}}finally{try{t&&!t.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.iterateExtraOptions=void 0,r.iterateExtraOptions=function(e,t,a,o){if("object"==typeof e&&null!==e){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach((function(e){var i=n(e,2),u=i[0],s=i[1],c=t?t+u:u;if("object"==typeof s)(0,r.iterateExtraOptions)(s,c+".",a,o);else if("string"==typeof s||"number"==typeof s)o(c,s.toString());else{if("boolean"!=typeof s)throw new Error("Can\'t handle extra config type: ".concat(typeof s));o(c,s?"1":"0")}}))}},918:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setRunOptions=void 0;var t=n(899),a=n(444),o=n(263);r.setRunOptions=function(e){var r=(0,o.getInstance)(),n=0,i=[],u=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(null==e?void 0:e.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(null==e?void 0:e.terminate)&&(u.terminate=!1);var s=0;if(void 0!==(null==e?void 0:e.tag)&&(s=(0,a.allocWasmString)(e.tag,i)),0===(n=r._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,s)))throw new Error("Can\'t create run options");return void 0!==(null==e?void 0:e.extra)&&(0,t.iterateExtraOptions)(e.extra,"",new WeakSet,(function(e,t){var o=(0,a.allocWasmString)(e,i),u=(0,a.allocWasmString)(t,i);if(0!==r._OrtAddRunConfigEntry(n,o,u))throw new Error("Can\'t set a run config entry: ".concat(e," - ").concat(t))})),[n,i]}catch(e){throw 0!==n&&r._OrtReleaseRunOptions(n),i.forEach(r._free),e}}},622:function(e,r,n){"use strict";var t=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0}),r.setSessionOptions=void 0;var a=n(899),o=n(444),i=n(263);r.setSessionOptions=function(e){var r,n,u,s,c=(0,i.getInstance)(),f=0,l=[],p=e||{};!function(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var r=e.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((function(e){return"webgpu"===("string"==typeof e?e:e.name)}))&&(e.enableMemPattern=!1)}(p);try{var d=function(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e))}}(null!==(r=p.graphOptimizationLevel)&&void 0!==r?r:"all"),h=function(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e))}}(null!==(n=p.executionMode)&&void 0!==n?n:"sequential"),g="string"==typeof p.logId?(0,o.allocWasmString)(p.logId,l):0,y=null!==(u=p.logSeverityLevel)&&void 0!==u?u:2;if(!Number.isInteger(y)||y<0||y>4)throw new Error("log serverity level is not valid: ".concat(y));var v=null!==(s=p.logVerbosityLevel)&&void 0!==s?s:0;if(!Number.isInteger(v)||v<0||v>4)throw new Error("log verbosity level is not valid: ".concat(v));var m="string"==typeof p.optimizedModelFilePath?(0,o.allocWasmString)(p.optimizedModelFilePath,l):0;if(0===(f=c._OrtCreateSessionOptions(d,!!p.enableCpuMemArena,!!p.enableMemPattern,h,!!p.enableProfiling,0,g,y,v,m)))throw new Error("Can\'t create session options");return p.executionProviders&&function(e,r,n){var a,u;try{for(var s=t(r),c=s.next();!c.done;c=s.next()){var f=c.value,l="string"==typeof f?f:f.name;switch(l){case"xnnpack":l="XNNPACK";break;case"webnn":if(l="WEBNN","string"!=typeof f){var p=f;if(null==p?void 0:p.deviceType){var d=(0,o.allocWasmString)("deviceType",n),h=(0,o.allocWasmString)(p.deviceType,n);if(0!==(0,i.getInstance)()._OrtAddSessionConfigEntry(e,d,h))throw new Error("Can\'t set a session config entry: \'deviceType\' - ".concat(p.deviceType))}if((null==p?void 0:p.powerPreference)&&(d=(0,o.allocWasmString)("powerPreference",n),h=(0,o.allocWasmString)(p.powerPreference,n),0!==(0,i.getInstance)()._OrtAddSessionConfigEntry(e,d,h)))throw new Error("Can\'t set a session config entry: \'powerPreference\' - ".concat(p.powerPreference))}break;case"webgpu":l="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported EP: ".concat(l))}var g=(0,o.allocWasmString)(l,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(e,g))throw new Error("Can\'t append execution provider: ".concat(l))}}catch(e){a={error:e}}finally{try{c&&!c.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}}(f,p.executionProviders,l),void 0!==p.extra&&(0,a.iterateExtraOptions)(p.extra,"",new WeakSet,(function(e,r){var n=(0,o.allocWasmString)(e,l),t=(0,o.allocWasmString)(r,l);if(0!==c._OrtAddSessionConfigEntry(f,n,t))throw new Error("Can\'t set a session config entry: ".concat(e," - ").concat(r))})),[f,l]}catch(e){throw 0!==f&&c._OrtReleaseSessionOptions(f),l.forEach(c._free),e}}},444:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.allocWasmString=void 0;var t=n(263);r.allocWasmString=function(e,r){var n=(0,t.getInstance)(),a=n.lengthBytesUTF8(e)+1,o=n._malloc(a);return n.stringToUTF8(e,o,a),r.push(o),o}},917:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logLevelStringToEnum=r.tensorTypeToTypedArrayConstructor=r.getTensorElementSize=r.tensorDataTypeEnumToString=r.tensorDataTypeStringToEnum=void 0,r.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e))}},r.tensorDataTypeEnumToString=function(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:case 10:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e))}},r.getTensorElementSize=function(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e]},r.tensorTypeToTypedArrayConstructor=function(e){switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e))}},r.logLevelStringToEnum=function(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e))}}},259:function(e,r,n){"use strict";var t=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(a,o){function i(e){try{s(t.next(e))}catch(e){o(e)}}function u(e){try{s(t.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?a(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,u)}s((t=t.apply(e,r||[])).next())}))},a=this&&this.__generator||function(e,r){var n,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(i=0)),i;)try{if(n=1,t&&(a=2&u[0]?t.return:u[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,u[1])).done)return a;switch(t=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=r.call(e,i)}catch(e){u=[6,e],t=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},o=this&&this.__read||function(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,a,o=n.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(t=o.next()).done;)i.push(t.value)}catch(e){a={error:e}}finally{try{t&&!t.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0}),r.extractTransferableBuffers=r.endProfiling=r.run=r.releaseSession=r.createSession=r.createSessionFinalize=r.createSessionAllocate=r.initOrt=void 0;var u=n(918),s=n(622),c=n(444),f=n(917),l=n(263);r.initOrt=function(e,r){var n=(0,l.getInstance)()._OrtInit(e,r);if(0!==n)throw new Error("Can\'t initialize onnxruntime. error code = ".concat(n))};var p=new Map;r.createSessionAllocate=function(e){var r=(0,l.getInstance)(),n=r._malloc(e.byteLength);return r.HEAPU8.set(e,n),[n,e.byteLength]},r.createSessionFinalize=function(e,r){var n,t=(0,l.getInstance)(),a=0,i=0,u=[];try{if(i=(n=o((0,s.setSessionOptions)(r),2))[0],u=n[1],0===(a=t._OrtCreateSession(e[0],e[1],i)))throw new Error("Can\'t create a session")}finally{t._free(e[0]),0!==i&&t._OrtReleaseSessionOptions(i),u.forEach(t._free)}for(var c=t._OrtGetInputCount(a),f=t._OrtGetOutputCount(a),d=[],h=[],g=[],y=[],v=0;v<c;v++){var m=t._OrtGetInputName(a,v);if(0===m)throw new Error("Can\'t get an input name");h.push(m),d.push(t.UTF8ToString(m))}for(v=0;v<f;v++){var b=t._OrtGetOutputName(a,v);if(0===b)throw new Error("Can\'t get an output name");y.push(b),g.push(t.UTF8ToString(b))}return p.set(a,[a,h,y]),[a,d,g]},r.createSession=function(e,n){var t=(0,r.createSessionAllocate)(e);return(0,r.createSessionFinalize)(t,n)},r.releaseSession=function(e){var r=(0,l.getInstance)(),n=p.get(e);if(!n)throw new Error("invalid session id");var t=n[0],a=n[1],o=n[2];a.forEach(r._OrtFree),o.forEach(r._OrtFree),r._OrtReleaseSession(t),p.delete(e)},r.run=function(e,r,n,i,s){return t(void 0,void 0,void 0,(function(){var t,d,h,g,y,v,m,b,w,_,T,O,A,S,E,P,C,M,k,R,F,x,U,W,D,I,j,H,Y,z,L,N,B,G,V,q,J,Q,X,$,Z,K,ee,re,ne;return a(this,(function(a){switch(a.label){case 0:if(t=(0,l.getInstance)(),!(d=p.get(e)))throw new Error("invalid session id");h=d[0],g=d[1],y=d[2],v=r.length,m=i.length,b=0,w=[],_=[],T=[],a.label=1;case 1:for(a.trys.push([1,,7,8]),ne=o((0,u.setRunOptions)(s),2),b=ne[0],w=ne[1],O=function(e){var r=n[e][0],a=n[e][1],o=n[e][2],i=void 0,u=void 0;if(Array.isArray(o)){u=4*o.length,i=t._malloc(u),T.push(i);for(var s=i/4,l=0;l<o.length;l++){if("string"!=typeof o[l])throw new TypeError("tensor data at index ".concat(l," is not a string"));t.HEAPU32[s++]=(0,c.allocWasmString)(o[l],T)}}else u=o.byteLength,i=t._malloc(u),T.push(i),t.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,u),i);var p=t.stackSave(),d=t.stackAlloc(4*a.length);try{var h=d/4;a.forEach((function(e){return t.HEAP32[h++]=e}));var g=t._OrtCreateTensor((0,f.tensorDataTypeStringToEnum)(r),i,u,d,a.length);if(0===g)throw new Error("Can\'t create a tensor");_.push(g)}finally{t.stackRestore(p)}},D=0;D<v;D++)O(D);A=t.stackSave(),S=t.stackAlloc(4*v),E=t.stackAlloc(4*v),P=t.stackAlloc(4*m),C=t.stackAlloc(4*m),a.label=2;case 2:for(a.trys.push([2,,5,6]),M=S/4,k=E/4,R=P/4,F=C/4,D=0;D<v;D++)t.HEAPU32[M++]=_[D],t.HEAPU32[k++]=g[r[D]];for(D=0;D<m;D++)t.HEAPU32[R++]=0,t.HEAPU32[F++]=y[i[D]];return x=t._OrtRun(h,E,S,v,C,m,P,b),(U=t.jsepRunPromise)&&void 0!==U.then?[4,U]:[3,4];case 3:x=a.sent(),a.label=4;case 4:if(W=[],0===x)for(D=0;D<m;D++){I=t.HEAPU32[P/4+D],j=t.stackSave(),H=t.stackAlloc(16),Y=void 0,z=0;try{if(0!==(x=t._OrtGetTensorData(I,H,H+4,H+8,H+12)))throw new Error("Can\'t access output tensor data. error code = ".concat(x));for(L=H/4,N=t.HEAPU32[L++],z=t.HEAPU32[L++],B=t.HEAPU32[L++],G=t.HEAPU32[L++],V=[],q=0;q<G;q++)V.push(t.HEAPU32[B/4+q]);if(t._OrtFree(B),J=0===V.length?1:V.reduce((function(e,r){return e*r})),"string"===(Y=(0,f.tensorDataTypeEnumToString)(N))){for(Q=[],X=z/4,$=0;$<J;$++)Z=t.HEAPU32[X++],K=$===J-1?void 0:t.HEAPU32[X]-Z,Q.push(t.UTF8ToString(Z,K));W.push([Y,V,Q])}else ee=(0,f.tensorTypeToTypedArrayConstructor)(Y),re=new ee(J),new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(t.HEAPU8.subarray(z,z+re.byteLength)),W.push([Y,V,re])}finally{t.stackRestore(j),"string"===Y&&z&&t._free(z),t._OrtReleaseTensor(I)}}if(0===x)return[2,W];throw new Error("failed to call OrtRun(). error code = ".concat(x,"."));case 5:return t.stackRestore(A),[7];case 6:return[3,8];case 7:return _.forEach(t._OrtReleaseTensor),T.forEach(t._free),t._OrtReleaseRunOptions(b),w.forEach(t._free),[7];case 8:return[2]}}))}))},r.endProfiling=function(e){var r=(0,l.getInstance)(),n=p.get(e);if(!n)throw new Error("invalid session id");var t=n[0],a=r._OrtEndProfiling(t);if(0===a)throw new Error("Can\'t get an profile file name");r._OrtFree(a)},r.extractTransferableBuffers=function(e){var r,n,t=[];try{for(var a=i(e),o=a.next();!o.done;o=a.next()){var u=o.value[2];!Array.isArray(u)&&u.buffer&&t.push(u.buffer)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return t}},263:function(e,r,n){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,r,n,t){void 0===t&&(t=n);var a=Object.getOwnPropertyDescriptor(r,n);a&&!("get"in a?!r.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,t,a)}:function(e,r,n,t){void 0===t&&(t=n),e[t]=r[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(r,e,n);return a(r,e),r},i=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(a,o){function i(e){try{s(t.next(e))}catch(e){o(e)}}function u(e){try{s(t.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?a(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,u)}s((t=t.apply(e,r||[])).next())}))},u=this&&this.__generator||function(e,r){var n,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(i=0)),i;)try{if(n=1,t&&(a=2&u[0]?t.return:u[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,u[1])).done)return a;switch(t=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=r.call(e,i)}catch(e){u=[6,e],t=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.dispose=r.getInstance=r.initializeWebAssembly=void 0;var c,f=o(n(449)),l=s(n(932)),p=n(474),d=!1,h=!1,g=!1,y=function(e,r){return r?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm"};r.initializeWebAssembly=function(e){return i(void 0,void 0,void 0,(function(){var r,t,a,o,i,s,v,m,b,w,_;return u(this,(function(u){switch(u.label){case 0:if(d)return[2,Promise.resolve()];if(h)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(g)throw new Error("previous call to \'initializeWebAssembly()\' failed.");return h=!0,r=e.initTimeout,t=e.numThreads,a=e.simd,o=t>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}}(),i=a&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}(),s="string"==typeof e.wasmPaths?e.wasmPaths:void 0,v=y(!1,o),m=y(i,o),b="object"==typeof e.wasmPaths?e.wasmPaths[m]:void 0,w=!1,_=[],r>0&&_.push(new Promise((function(e){setTimeout((function(){w=!0,e()}),r)}))),_.push(new Promise((function(e,r){var t=o?p:l.default,a={locateFile:function(e,r){return o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):e===v?null!=b?b:(null!=s?s:r)+m:r+e}};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=f.join("/","ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(t.toString(),"})();");a.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}t(a).then((function(r){h=!1,d=!0,c=r,e()}),(function(e){h=!1,g=!0,r(e)}))}))),[4,Promise.race(_)];case 1:if(u.sent(),w)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(r,"ms"));return[2]}}))}))},r.getInstance=function(){if(d&&c)return c;throw new Error("WebAssembly is not initialized yet.")},r.dispose=function(){var e;!d||h||g||(h=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,h=!1,d=!1,g=!0)}},474:function(e,r,n){var _scriptDir,t=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e={}){function r(){return F.buffer!=U.buffer&&Q(),U}function t(){return F.buffer!=U.buffer&&Q(),W}function a(){return F.buffer!=U.buffer&&Q(),D}function o(){return F.buffer!=U.buffer&&Q(),I}function i(){return F.buffer!=U.buffer&&Q(),j}function u(){return F.buffer!=U.buffer&&Q(),H}function s(){return F.buffer!=U.buffer&&Q(),z}var c,f,l;c||(c=void 0!==e?e:{}),c.ready=new Promise((function(e,r){f=e,l=r}));var p,d,h,g=Object.assign({},c),y="./this.program",v=(e,r)=>{throw r},m="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=c.ENVIRONMENT_IS_PTHREAD||!1,T="";function O(e){return c.locateFile?c.locateFile(e,T):T+e}if(w){var A=n(384),S=n(908);let r;T=b?S.dirname(T)+"/":"//",p=(e,r)=>(e=e.startsWith("file://")?new URL(e):S.normalize(e),A.readFileSync(e,r?void 0:"utf8")),h=e=>((e=p(e,!0)).buffer||(e=new Uint8Array(e)),e),d=(e,r,n)=>{e=e.startsWith("file://")?new URL(e):S.normalize(e),A.readFile(e,(function(e,t){e?n(e):r(t.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof fe))throw e})),15>process.versions.node.split(".")[0]&&process.on("unhandledRejection",(function(e){throw e})),v=(e,r)=>{if(R)throw process.exitCode=e,r;if(!(r instanceof fe)){var n=r;r&&"object"==typeof r&&r.stack&&(n=[r,r.stack]),k("exiting due to exception: "+n)}process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{r=n(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}n.g.Worker=r.Worker}else(m||b)&&(b?T=self.location.href:"undefined"!=typeof document&&document.currentScript&&(T=document.currentScript.src),_scriptDir&&(T=_scriptDir),T=0!==T.indexOf("blob:")?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(p=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},b&&(h=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),d=(e,r,n)=>{var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{200==t.status||0==t.status&&t.response?r(t.response):n()},t.onerror=n,t.send(null)}));w&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var E=console.log.bind(console),P=console.warn.bind(console);w&&(E=e=>A.writeSync(1,e+"\\n"),P=e=>A.writeSync(2,e+"\\n"));var C,M=c.print||E,k=c.printErr||P;Object.assign(c,g),g=null,c.thisProgram&&(y=c.thisProgram),c.quit&&(v=c.quit),c.wasmBinary&&(C=c.wasmBinary);var R=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&ie("no native wasm support detected");var F,x,U,W,D,I,j,H,Y,z,L=!1,N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(e,r,n){var t=(r>>>=0)+n;for(n=r;e[n]&&!(n>=t);)++n;if(16<n-r&&e.buffer&&N)return N.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(t="";r<n;){var a=e[r++];if(128&a){var o=63&e[r++];if(192==(224&a))t+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[r++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[r++])?t+=String.fromCharCode(a):(a-=65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else t+=String.fromCharCode(a)}return t}function G(e,r){return(e>>>=0)?B(t(),e,r):""}function V(e,r,n,t){if(!(0<t))return 0;var a=n>>>=0;t=n+t-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=t)break;r[n++>>>0]=i}else{if(2047>=i){if(n+1>=t)break;r[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=t)break;r[n++>>>0]=224|i>>12}else{if(n+3>=t)break;r[n++>>>0]=240|i>>18,r[n++>>>0]=128|i>>12&63}r[n++>>>0]=128|i>>6&63}r[n++>>>0]=128|63&i}}return r[n>>>0]=0,n-a}function q(e,r,n){return V(e,t(),r,n)}function J(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);127>=t?r++:2047>=t?r+=2:55296<=t&&57343>=t?(r+=4,++n):r+=3}return r}function Q(){var e=F.buffer;c.HEAP8=U=new Int8Array(e),c.HEAP16=D=new Int16Array(e),c.HEAP32=j=new Int32Array(e),c.HEAPU8=W=new Uint8Array(e),c.HEAPU16=I=new Uint16Array(e),c.HEAPU32=H=new Uint32Array(e),c.HEAPF32=Y=new Float32Array(e),c.HEAPF64=z=new Float64Array(e)}var X=c.INITIAL_MEMORY||16777216;if(1048576<=X||ie("INITIAL_MEMORY should be larger than STACK_SIZE, was "+X+"! (STACK_SIZE=1048576)"),_)F=c.wasmMemory;else if(c.wasmMemory)F=c.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:X/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw k("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&k("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Q(),X=F.buffer.byteLength;var $,Z=[],K=[],ee=[];function re(){var e=c.preRun.shift();Z.unshift(e)}var ne,te=0,ae=null,oe=null;function ie(e){throw c.onAbort&&c.onAbort(e),k(e="Aborted("+e+")"),L=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),l(e),e}function ue(e){return e.startsWith("data:application/octet-stream;base64,")}function se(e){try{if(e==ne&&C)return new Uint8Array(C);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){ie(e)}}function ce(e,r,n){return function(e){if(!C&&(m||b)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((function(r){if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()})).catch((function(){return se(e)}));if(d)return new Promise((function(r,n){d(e,(function(e){r(new Uint8Array(e))}),n)}))}return Promise.resolve().then((function(){return se(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(n,(function(e){k("failed to asynchronously prepare wasm: "+e),ie(e)}))}function fe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){e.terminate(),e.onmessage=()=>{}}function pe(e){(e=ye.hb[e])||ie(),ye.Mb(e)}function de(e){var r=ye.Ab();if(!r)return 6;ye.ib.push(r),ye.hb[e.fb]=r,r.fb=e.fb;var n={cmd:"run",start_routine:e.Nb,arg:e.xb,pthread_ptr:e.fb};return w&&r.ref(),r.postMessage(n,e.Tb),0}function he(e){if(_)return Pr(1,1,e);R||(ye.Ob(),c.onExit&&c.onExit(e),L=!0),v(e,new fe(e))}function ge(e){if(_)throw me(e),"unwind";he(e)}ue(ne="ort-wasm-threaded.wasm")||(ne=O(ne));var ye={lb:[],ib:[],vb:[],hb:{},qb:function(){_&&ye.Eb()},Vb:function(){},Eb:function(){ye.receiveObjectTransfer=ye.Lb,ye.threadInitTLS=ye.ub,ye.setExitStatus=ye.tb,R=!1},tb:function(){},Xb:["$terminateWorker"],Ob:function(){for(var e of ye.ib)le(e);for(e of ye.lb)le(e);ye.lb=[],ye.ib=[],ye.hb=[]},Mb:function(e){var r=e.fb;delete ye.hb[r],ye.lb.push(e),ye.ib.splice(ye.ib.indexOf(e),1),e.fb=0,w&&e.unref(),Kr(r)},Lb:function(){},ub:function(){ye.vb.forEach((e=>e()))},Kb:e=>new Promise((r=>{e.onmessage=n=>{var t=(n=n.data).cmd;if(e.fb&&(ye.yb=e.fb),n.targetThread&&n.targetThread!=Vr()){var a=ye.hb[n.Wb];a?a.postMessage(n,n.transferList):k(\'Internal error! Worker sent a message "\'+t+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===t?cr(n.queue):"spawnThread"===t?de(n):"cleanupThread"===t?pe(n.thread):"killThread"===t?(n=n.thread,t=ye.hb[n],delete ye.hb[n],le(t),Kr(n),ye.ib.splice(ye.ib.indexOf(t),1),t.fb=0):"cancelThread"===t?ye.hb[n.thread].postMessage({cmd:"cancel"}):"loaded"===t?(e.loaded=!0,w&&!e.fb&&e.unref(),r(e)):"print"===t?M("Thread "+n.threadId+": "+n.text):"printErr"===t?k("Thread "+n.threadId+": "+n.text):"alert"===t?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"callHandler"===t?c[n.handler](...n.args):t&&k("worker sent an unknown command "+t);ye.yb=void 0},e.onerror=e=>{throw k("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(e.on("message",(function(r){e.onmessage({data:r})})),e.on("error",(function(r){e.onerror(r)})),e.on("detachedExit",(function(){})));var n,t=[];for(n of["onExit","onAbort","print","printErr"])c.hasOwnProperty(n)&&t.push(n);e.postMessage({cmd:"load",handlers:t,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:F,wasmModule:x})})),Jb:function(e){e()},wb:function(){var e=O("ort-wasm-threaded.worker.js");e=new Worker(e),ye.lb.push(e)},Ab:function(){return 0==ye.lb.length&&(ye.wb(),ye.Kb(ye.lb[0])),ye.lb.pop()}};function ve(e){for(;0<e.length;)e.shift()(c)}function me(e){if(_)return Pr(2,0,e);try{ge(e)}catch(e){e instanceof fe||"unwind"==e||v(1,e)}}c.PThread=ye,c.establishStackSpace=function(){var e=Vr(),r=i()[e+52>>2>>>0];nn(r,r-(e=i()[e+56>>2>>>0])),an(r)};var be=[];function we(e){this.mb=e-24,this.Ib=function(e){u()[this.mb+4>>2>>>0]=e},this.Cb=function(e){u()[this.mb+8>>2>>>0]=e},this.Gb=function(){i()[this.mb>>2>>>0]=0},this.Bb=function(){r()[this.mb+12>>0>>>0]=0},this.Hb=function(){r()[this.mb+13>>0>>>0]=0},this.qb=function(e,r){this.zb(),this.Ib(e),this.Cb(r),this.Gb(),this.Bb(),this.Hb()},this.zb=function(){u()[this.mb+16>>2>>>0]=0}}function _e(e,r,n,t){return _?Pr(3,1,e,r,n,t):Te(e,r,n,t)}function Te(e,r,n,t){if("undefined"==typeof SharedArrayBuffer)return k("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return _&&0===a.length?_e(e,r,n,t):(e={Nb:n,fb:e,xb:t,Tb:a},_?(e.Ub="spawnThread",postMessage(e,a),0):de(e))}function Oe(e,r,n){return _?Pr(4,1,e,r,n):0}function Ae(e,r){if(_)return Pr(5,1,e,r)}function Se(e,r){if(_)return Pr(6,1,e,r)}function Ee(e,r,n){if(_)return Pr(7,1,e,r,n)}function Pe(e,r,n){return _?Pr(8,1,e,r,n):0}function Ce(e,r){if(_)return Pr(9,1,e,r)}function Me(e,r,n){if(_)return Pr(10,1,e,r,n)}function ke(e,r,n,t){if(_)return Pr(11,1,e,r,n,t)}function Re(e,r,n,t){if(_)return Pr(12,1,e,r,n,t)}function Fe(e,r,n,t){if(_)return Pr(13,1,e,r,n,t)}function xe(e){if(_)return Pr(14,1,e)}function Ue(e,r){if(_)return Pr(15,1,e,r)}function We(e,r,n){if(_)return Pr(16,1,e,r,n)}function De(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}c.invokeEntryPoint=function(e,r){var n=be[e];n||(e>=be.length&&(be.length=e+1),be[e]=n=$.get(e)),e=n(r),R?ye.tb(e):rn(e)};var Ie=void 0;function je(e){for(var r="";t()[e>>>0];)r+=Ie[t()[e++>>>0]];return r}var He={},Ye={},ze={};function Le(e){if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=r&&57>=r?"_"+e:e}function Ne(e,r){return{[e=Le(e)]:function(){return r.apply(this,arguments)}}[e]}function Be(e){var r=Error,n=Ne(e,(function(r){this.name=e,this.message=r,void 0!==(r=Error(r).stack)&&(this.stack=this.toString()+"\\n"+r.replace(/^Error(:[^\\n]*)?\\n/,""))}));return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Ge=void 0;function Ve(e){throw new Ge(e)}function qe(e,r,n={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=r.name;if(e||Ve(\'type "\'+t+\'" must have a positive integer typeid pointer\'),Ye.hasOwnProperty(e)){if(n.Db)return;Ve("Cannot register type \'"+t+"\' twice")}Ye[e]=r,delete ze[e],He.hasOwnProperty(e)&&(r=He[e],delete He[e],r.forEach((e=>e())))}var Je=[],Qe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Xe(e){4<e&&0==--Qe[e].rb&&(Qe[e]=void 0,Je.push(e))}var $e=e=>(e||Ve("Cannot use deleted val. handle = "+e),Qe[e].value),Ze=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var r=Je.length?Je.pop():Qe.length;return Qe[r]={rb:1,value:e},r}};function Ke(e){return this.fromWireType(i()[e>>2>>>0])}function er(e,r){switch(r){case 2:return function(e){var r=this.fromWireType;return F.buffer!=U.buffer&&Q(),r.call(this,Y[e>>>2])};case 3:return function(e){return this.fromWireType(s()[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function rr(e,n,s){switch(n){case 0:return s?function(e){return r()[e>>>0]}:function(e){return t()[e>>>0]};case 1:return s?function(e){return a()[e>>>1]}:function(e){return o()[e>>>1]};case 2:return s?function(e){return i()[e>>>2]}:function(e){return u()[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var nr="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function tr(e,r){for(var n=e>>1,i=n+r/2;!(n>=i)&&o()[n>>>0];)++n;if(32<(n<<=1)-e&&nr)return nr.decode(t().slice(e,n));for(n="",i=0;!(i>=r/2);++i){var u=a()[e+2*i>>1>>>0];if(0==u)break;n+=String.fromCharCode(u)}return n}function ar(e,r,n){if(void 0===n&&(n=2147483647),2>n)return 0;var t=r;n=(n-=2)<2*e.length?n/2:e.length;for(var o=0;o<n;++o){var i=e.charCodeAt(o);a()[r>>1>>>0]=i,r+=2}return a()[r>>1>>>0]=0,r-t}function or(e){return 2*e.length}function ir(e,r){for(var n=0,t="";!(n>=r/4);){var a=i()[e+4*n>>2>>>0];if(0==a)break;++n,65536<=a?(a-=65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a)):t+=String.fromCharCode(a)}return t}function ur(e,r,n){if(void 0===n&&(n=2147483647),4>n)return 0;var t=r>>>=0;n=t+n-4;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),i()[r>>2>>>0]=o,(r+=4)+4>n)break}return i()[r>>2>>>0]=0,r-t}function sr(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);55296<=t&&57343>=t&&++n,r+=4}return r}function cr(e){Atomics.store(i(),e>>2,1),Vr()&&Zr(e),Atomics.compareExchange(i(),e>>2,1,0)}function fr(e,r){var n=Ye[e];if(void 0===n){var t=je(e=Qr(e));Jr(e),Ve(r+" has unknown type "+t)}return n}c.executeNotifiedProxyingQueue=cr;var lr={};function pr(e){var r=lr[e];return void 0===r?je(e):r}var dr=[];function hr(){return"object"==typeof globalThis?globalThis:Function("return this")()}var gr=[],yr={};function vr(e){return u()[e>>>2]+4294967296*i()[e+4>>>2]}function mr(e){return 0==e%4&&(0!=e%100||0==e%400)}var br,wr,_r=[0,31,60,91,121,152,182,213,244,274,305,335],Tr=[0,31,59,90,120,151,181,212,243,273,304,334];function Or(e){return(mr(e.getFullYear())?_r:Tr)[e.getMonth()]+e.getDate()-1}function Ar(e,r,n,t,a,o,i){return _?Pr(17,1,e,r,n,t,a,o,i):-52}function Sr(e,r,n,t,a,o){if(_)return Pr(18,1,e,r,n,t,a,o)}function Er(e){var n=J(e)+1,t=qr(n);return t&&V(e,r(),t,n),t}function Pr(e,r){var n=arguments.length-2,t=arguments;return function(e){var r=tn();return e=e(),an(r),e}((()=>{for(var a=on(8*n),o=a>>3,i=0;i<n;i++){var u=t[2+i];s()[o+i>>>0]=u}return $r(e,n,a,r)}))}wr=w?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Cr,Mr=[],kr={};function Rr(){if(!Cr){var e,r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in kr)void 0===kr[e]?delete r[e]:r[e]=kr[e];var n=[];for(e in r)n.push(e+"="+r[e]);Cr=n}return Cr}function Fr(e,n){if(_)return Pr(19,1,e,n);var t=0;return Rr().forEach((function(a,o){var i=n+t;for(o=u()[e+4*o>>2>>>0]=i,i=0;i<a.length;++i)r()[o++>>0>>>0]=a.charCodeAt(i);r()[o>>0>>>0]=0,t+=a.length+1})),0}function xr(e,r){if(_)return Pr(20,1,e,r);var n=Rr();u()[e>>2>>>0]=n.length;var t=0;return n.forEach((function(e){t+=e.length+1})),u()[r>>2>>>0]=t,0}function Ur(e){return _?Pr(21,1,e):52}function Wr(e,r,n,t){return _?Pr(22,1,e,r,n,t):52}function Dr(e,r,n,t,a){return _?Pr(23,1,e,r,n,t,a):70}var Ir=[null,[],[]];function jr(e,r,n,a){if(_)return Pr(24,1,e,r,n,a);for(var o=0,i=0;i<n;i++){var s=u()[r>>2>>>0],c=u()[r+4>>2>>>0];r+=8;for(var f=0;f<c;f++){var l=t()[s+f>>>0],p=Ir[e];0===l||10===l?((1===e?M:k)(B(p,0)),p.length=0):p.push(l)}o+=c}return u()[a>>2>>>0]=o,0}var Hr=[31,29,31,30,31,30,31,31,30,31,30,31],Yr=[31,28,31,30,31,30,31,31,30,31,30,31];function zr(e,n,t,a){function o(e,r,n){for(e="number"==typeof e?e.toString():e||"";e.length<r;)e=n[0]+e;return e}function u(e,r){return o(e,r,"0")}function s(e,r){function n(e){return 0>e?-1:0<e?1:0}var t;return 0===(t=n(e.getFullYear()-r.getFullYear()))&&0===(t=n(e.getMonth()-r.getMonth()))&&(t=n(e.getDate()-r.getDate())),t}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function f(e){var r=e.jb;for(e=new Date(new Date(e.kb+1900,0,1).getTime());0<r;){var n=e.getMonth(),t=(mr(e.getFullYear())?Hr:Yr)[n];if(!(r>t-e.getDate())){e.setDate(e.getDate()+r);break}r-=t-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),r=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=s(r,e)?0>=s(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=i()[a+40>>2>>>0];for(var p in a={Rb:i()[a>>2>>>0],Qb:i()[a+4>>2>>>0],ob:i()[a+8>>2>>>0],sb:i()[a+12>>2>>>0],pb:i()[a+16>>2>>>0],kb:i()[a+20>>2>>>0],gb:i()[a+24>>2>>>0],jb:i()[a+28>>2>>>0],Yb:i()[a+32>>2>>>0],Pb:i()[a+36>>2>>>0],Sb:l?G(l):""},t=G(t),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})t=t.replace(new RegExp(p,"g"),l[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(p in l={"%a":function(e){return d[e.gb].substring(0,3)},"%A":function(e){return d[e.gb]},"%b":function(e){return h[e.pb].substring(0,3)},"%B":function(e){return h[e.pb]},"%C":function(e){return u((e.kb+1900)/100|0,2)},"%d":function(e){return u(e.sb,2)},"%e":function(e){return o(e.sb,2," ")},"%g":function(e){return f(e).toString().substring(2)},"%G":function(e){return f(e)},"%H":function(e){return u(e.ob,2)},"%I":function(e){return 0==(e=e.ob)?e=12:12<e&&(e-=12),u(e,2)},"%j":function(e){for(var r=0,n=0;n<=e.pb-1;r+=(mr(e.kb+1900)?Hr:Yr)[n++]);return u(e.sb+r,3)},"%m":function(e){return u(e.pb+1,2)},"%M":function(e){return u(e.Qb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.ob&&12>e.ob?"AM":"PM"},"%S":function(e){return u(e.Rb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.gb||7},"%U":function(e){return u(Math.floor((e.jb+7-e.gb)/7),2)},"%V":function(e){var r=Math.floor((e.jb+7-(e.gb+6)%7)/7);if(2>=(e.gb+371-e.jb-2)%7&&r++,r)53==r&&(4==(n=(e.gb+371-e.jb)%7)||3==n&&mr(e.kb)||(r=1));else{r=52;var n=(e.gb+7-e.jb-1)%7;(4==n||5==n&&mr(e.kb%400-1))&&r++}return u(r,2)},"%w":function(e){return e.gb},"%W":function(e){return u(Math.floor((e.jb+7-(e.gb+6)%7)/7),2)},"%y":function(e){return(e.kb+1900).toString().substring(2)},"%Y":function(e){return e.kb+1900},"%z":function(e){var r=0<=(e=e.Pb);return e=Math.abs(e)/60,(r?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Sb},"%%":function(){return"%"}},t=t.replace(/%%/g,"\\0\\0"),l)t.includes(p)&&(t=t.replace(new RegExp(p,"g"),l[p](a)));return p=function(e){var r=Array(J(e)+1);return V(e,r,0,r.length),r}(t=t.replace(/\\0\\0/g,"%")),p.length>n?0:(function(e,n){r().set(e,n>>>0)}(p,e),p.length-1)}ye.qb();for(var Lr=Array(256),Nr=0;256>Nr;++Nr)Lr[Nr]=String.fromCharCode(Nr);Ie=Lr,Ge=c.BindingError=Be("BindingError"),c.InternalError=Be("InternalError"),c.count_emval_handles=function(){for(var e=0,r=5;r<Qe.length;++r)void 0!==Qe[r]&&++e;return e},c.get_first_emval=function(){for(var e=5;e<Qe.length;++e)if(void 0!==Qe[e])return Qe[e];return null};var Br=[null,he,me,_e,Oe,Ae,Se,Ee,Pe,Ce,Me,ke,Re,Fe,xe,Ue,We,Ar,Sr,Fr,xr,Ur,Wr,Dr,jr],Gr={b:function(e,r,n){throw new we(e).qb(r,n),e},pa:function(){ie("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},aa:function(e){Xr(e,!b,1,!m),ye.ub()},C:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):pe(e)},U:Te,v:Oe,ha:Ae,Q:Se,S:Ee,L:Pe,fa:Ce,Z:Me,ea:ke,E:Re,R:Fe,O:xe,ga:Ue,P:We,K:function(){},ra:function(e,n,t,o,u){var s=De(t);qe(e,{name:n=je(n),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?o:u},argPackAdvance:8,readValueFromPointer:function(e){if(1===t)var o=r();else if(2===t)o=a();else{if(4!==t)throw new TypeError("Unknown boolean type size: "+n);o=i()}return this.fromWireType(o[e>>>s])},nb:null})},qa:function(e,r){qe(e,{name:r=je(r),fromWireType:function(e){var r=$e(e);return Xe(e),r},toWireType:function(e,r){return Ze(r)},argPackAdvance:8,readValueFromPointer:Ke,nb:null})},G:function(e,r,n){n=De(n),qe(e,{name:r=je(r),fromWireType:function(e){return e},toWireType:function(e,r){return r},argPackAdvance:8,readValueFromPointer:er(r,n),nb:null})},q:function(e,r,n,t,a){r=je(r),-1===a&&(a=4294967295),a=De(n);var o=e=>e;if(0===t){var i=32-8*n;o=e=>e<<i>>>i}n=r.includes("unsigned")?function(e,r){return r>>>0}:function(e,r){return r},qe(e,{name:r,fromWireType:o,toWireType:n,argPackAdvance:8,readValueFromPointer:rr(r,a,0!==t),nb:null})},n:function(e,r,n){function t(e){e>>=2;var r=u();return new a(r.buffer,r[e+1>>>0],r[e>>>0])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];qe(e,{name:n=je(n),fromWireType:t,argPackAdvance:8,readValueFromPointer:t},{Db:!0})},H:function(e,r){var n="std::string"===(r=je(r));qe(e,{name:r,fromWireType:function(e){var r=u()[e>>2>>>0],a=e+4;if(n)for(var o=a,i=0;i<=r;++i){var s=a+i;if(i==r||0==t()[s>>>0]){if(o=G(o,s-o),void 0===c)var c=o;else c+=String.fromCharCode(0),c+=o;o=s+1}}else{for(c=Array(r),i=0;i<r;++i)c[i]=String.fromCharCode(t()[a+i>>>0]);c=c.join("")}return Jr(e),c},toWireType:function(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var a,o="string"==typeof r;o||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||Ve("Cannot pass non-string to std::string"),a=n&&o?J(r):r.length;var i=qr(4+a+1),s=i+4>>>0;if(u()[i>>2>>>0]=a,n&&o)q(r,s,a+1);else if(o)for(o=0;o<a;++o){var c=r.charCodeAt(o);255<c&&(Jr(s),Ve("String has UTF-16 code units that do not fit in 8 bits")),t()[s+o>>>0]=c}else for(o=0;o<a;++o)t()[s+o>>>0]=r[o];return null!==e&&e.push(Jr,i),i},argPackAdvance:8,readValueFromPointer:Ke,nb:function(e){Jr(e)}})},x:function(e,r,n){if(n=je(n),2===r)var t=tr,a=ar,i=or,s=()=>o(),c=1;else 4===r&&(t=ir,a=ur,i=sr,s=()=>u(),c=2);qe(e,{name:n,fromWireType:function(e){for(var n,a=u()[e>>>2],o=s(),i=e+4,f=0;f<=a;++f){var l=e+4+f*r;f!=a&&0!=o[l>>>c]||(i=t(i,l-i),void 0===n?n=i:(n+=String.fromCharCode(0),n+=i),i=l+r)}return Jr(e),n},toWireType:function(e,t){"string"!=typeof t&&Ve("Cannot pass non-string to C++ string type "+n);var o=i(t),s=qr(4+o+r);return s>>>=0,u()[s>>>2]=o>>c,a(t,s+4,o+r),null!==e&&e.push(Jr,s),s},argPackAdvance:8,readValueFromPointer:Ke,nb:function(e){Jr(e)}})},sa:function(e,r){qe(e,{Fb:!0,name:r=je(r),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},V:function(){return 1048576},ka:function(){return!0},W:function(e,r,n,t){e==r?setTimeout((()=>cr(t))):_?postMessage({targetThread:e,cmd:"processProxyingQueue",queue:t}):(e=ye.hb[e])&&e.postMessage({cmd:"processProxyingQueue",queue:t})},$:function(){return-1},s:function(e,r,n){e=$e(e),r=fr(r,"emval::as");var t=[],a=Ze(t);return u()[n>>2>>>0]=a,r.toWireType(t,e)},j:function(e,r,n,t,a){e=dr[e],r=$e(r),n=pr(n);var o=[];return u()[t>>2>>>0]=Ze(o),e(r,n,o,a)},z:function(e,r,n,t){(e=dr[e])(r=$e(r),n=pr(n),null,t)},c:Xe,I:function(e,r){return(e=$e(e))==$e(r)},r:function(e){return 0===e?Ze(hr()):(e=pr(e),Ze(hr()[e]))},i:function(e,r){var n=function(e,r){for(var n=Array(e),t=0;t<e;++t)n[t]=fr(u()[r+4*t>>2>>>0],"parameter "+t);return n}(e,r),t=n[0];r=t.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var a=gr[r];if(void 0!==a)return a;a=["retType"];for(var o=[t],i="",s=0;s<e-1;++s)i+=(0!==s?", ":"")+"arg"+s,a.push("argType"+s),o.push(n[1+s]);var c="return function "+Le("methodCaller_"+r)+"(handle, name, destructors, args) {\\n",f=0;for(s=0;s<e-1;++s)c+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(f?"+"+f:"")+");\\n",f+=n[s+1].argPackAdvance;for(c+="    var rv = handle[name]("+i+");\\n",s=0;s<e-1;++s)n[s+1].deleteObject&&(c+="    argType"+s+".deleteObject(arg"+s+");\\n");return t.Fb||(c+="    return retType.toWireType(destructors, rv);\\n"),a.push(c+"};\\n"),e=function(e){var r=Function;if(!(r instanceof Function))throw new TypeError("new_ called with constructor type "+typeof r+" which is not a function");var n=Ne(r.name||"unknownFunctionName",(function(){}));return n.prototype=r.prototype,n=new n,(e=r.apply(n,e))instanceof Object?e:n}(a).apply(null,o),a=function(e){var r=dr.length;return dr.push(e),r}(e),gr[r]=a},t:function(e,r){return e=$e(e),r=$e(r),Ze(e[r])},d:function(e){4<e&&(Qe[e].rb+=1)},y:function(e,r,n,t){e=$e(e);var a=yr[r];return a||(a=function(e){for(var r="",n=0;n<e;++n)r+=(0!==n?", ":"")+"arg"+n;var t="return function emval_allocator_"+e+"(constructor, argTypes, args) {\\n  var HEAPU32 = getMemory();\\n";for(n=0;n<e;++n)t+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], \'parameter "+n+"\');\\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\\nargs += argType"+n+"[\'argPackAdvance\'];\\nargTypes += 4;\\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",t+"var obj = new constructor("+r+");\\nreturn valueToHandle(obj);\\n}\\n")(fr,c,Ze,(()=>u()))}(r),yr[r]=a),a(e,n,t)},ta:function(){return Ze([])},l:function(e){e=$e(e);for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=e[n];return Ze(r)},e:function(e){return Ze(pr(e))},k:function(){return Ze({})},h:function(e){for(var r=$e(e);r.length;){var n=r.pop();r.pop()(n)}Xe(e)},f:function(e,r,n){e=$e(e),r=$e(r),n=$e(n),e[r]=n},g:function(e,r){return e=(e=fr(e,"_emval_take_value")).readValueFromPointer(r),Ze(e)},la:function(e,r){e=new Date(1e3*vr(e)),i()[r>>2>>>0]=e.getUTCSeconds(),i()[r+4>>2>>>0]=e.getUTCMinutes(),i()[r+8>>2>>>0]=e.getUTCHours(),i()[r+12>>2>>>0]=e.getUTCDate(),i()[r+16>>2>>>0]=e.getUTCMonth(),i()[r+20>>2>>>0]=e.getUTCFullYear()-1900,i()[r+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,i()[r+28>>2>>>0]=e},ma:function(e,r){e=new Date(1e3*vr(e)),i()[r>>2>>>0]=e.getSeconds(),i()[r+4>>2>>>0]=e.getMinutes(),i()[r+8>>2>>>0]=e.getHours(),i()[r+12>>2>>>0]=e.getDate(),i()[r+16>>2>>>0]=e.getMonth(),i()[r+20>>2>>>0]=e.getFullYear()-1900,i()[r+24>>2>>>0]=e.getDay();var n=0|Or(e);i()[r+28>>2>>>0]=n,i()[r+36>>2>>>0]=-60*e.getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var t=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(n!=t&&e.getTimezoneOffset()==Math.min(t,n)),i()[r+32>>2>>>0]=e},na:function(e){var r=new Date(i()[e+20>>2>>>0]+1900,i()[e+16>>2>>>0],i()[e+12>>2>>>0],i()[e+8>>2>>>0],i()[e+4>>2>>>0],i()[e>>2>>>0],0),n=i()[e+32>>2>>>0],t=r.getTimezoneOffset(),a=new Date(r.getFullYear(),6,1).getTimezoneOffset(),o=new Date(r.getFullYear(),0,1).getTimezoneOffset(),u=Math.min(o,a);return 0>n?i()[e+32>>2>>>0]=Number(a!=o&&u==t):0<n!=(u==t)&&(a=Math.max(o,a),r.setTime(r.getTime()+6e4*((0<n?u:a)-t))),i()[e+24>>2>>>0]=r.getDay(),n=0|Or(r),i()[e+28>>2>>>0]=n,i()[e>>2>>>0]=r.getSeconds(),i()[e+4>>2>>>0]=r.getMinutes(),i()[e+8>>2>>>0]=r.getHours(),i()[e+12>>2>>>0]=r.getDate(),i()[e+16>>2>>>0]=r.getMonth(),i()[e+20>>2>>>0]=r.getYear(),r.getTime()/1e3|0},X:Ar,Y:Sr,oa:function(e,r,n){function t(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),s=new Date(a,6,1);a=o.getTimezoneOffset();var c=s.getTimezoneOffset(),f=Math.max(a,c);u()[e>>2>>>0]=60*f,i()[r>>2>>>0]=Number(a!=c),e=t(o),r=t(s),e=Er(e),r=Er(r),c<a?(u()[n>>2>>>0]=e,u()[n+4>>2>>>0]=r):(u()[n>>2>>>0]=r,u()[n+4>>2>>>0]=e)},m:function(){ie("")},ua:function(){ie("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},D:function(){if(!w&&!b){var e="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";br||(br={}),br[e]||(br[e]=1,w&&(e="warning: "+e),k(e))}},F:function(){return Date.now()},N:function(){return 4294901760},p:wr,da:function(e,r,n){t().copyWithin(e>>>0,r>>>0,r+n>>>0)},u:function(){return w?n(993).cpus().length:navigator.hardwareConcurrency},_:function(e,r,n){Mr.length=r,n>>=3;for(var t=0;t<r;t++)Mr[t]=s()[n+t>>>0];return Br[e].apply(null,Mr)},M:function(e){var r=t().length;if((e>>>=0)<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var a=r*(1+.2/n);a=Math.min(a,e+100663296);var o=Math,i=o.min;a=Math.max(e,a),a+=(65536-a%65536)%65536;e:{var u=F.buffer;try{F.grow(i.call(o,4294901760,a)-u.byteLength+65535>>>16),Q();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},ja:function(){throw"unwind"},ba:Fr,ca:xr,T:ge,w:Ur,B:Wr,J:Dr,A:jr,a:F||c.wasmMemory,ia:zr,o:function(e,r,n,t){return zr(e,r,n,t)}};!function(){function e(e,r){return e=e.exports,c.asm=e,ye.vb.push(c.asm.Ta),$=c.asm.Ya,K.unshift(c.asm.va),x=r,ye.Jb((()=>{if(te--,c.monitorRunDependencies&&c.monitorRunDependencies(te),0==te&&(null!==ae&&(clearInterval(ae),ae=null),oe)){var e=oe;oe=null,e()}})),e}var r={a:Gr};if(te++,c.monitorRunDependencies&&c.monitorRunDependencies(te),c.instantiateWasm)try{return c.instantiateWasm(r,e)}catch(e){k("Module.instantiateWasm callback failed with error: "+e),l(e)}(function(e,r){var n=ne;return C||"function"!=typeof WebAssembly.instantiateStreaming||ue(n)||n.startsWith("file://")||w||"function"!=typeof fetch?ce(n,e,r):fetch(n,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(t){return k("wasm streaming compile failed: "+t),k("falling back to ArrayBuffer instantiation"),ce(n,e,r)}))}))})(r,(function(r){e(r.instance,r.module)})).catch(l)}(),c._OrtInit=function(){return(c._OrtInit=c.asm.wa).apply(null,arguments)},c._OrtCreateSessionOptions=function(){return(c._OrtCreateSessionOptions=c.asm.xa).apply(null,arguments)},c._OrtAppendExecutionProvider=function(){return(c._OrtAppendExecutionProvider=c.asm.ya).apply(null,arguments)},c._OrtAddSessionConfigEntry=function(){return(c._OrtAddSessionConfigEntry=c.asm.za).apply(null,arguments)},c._OrtReleaseSessionOptions=function(){return(c._OrtReleaseSessionOptions=c.asm.Aa).apply(null,arguments)},c._OrtCreateSession=function(){return(c._OrtCreateSession=c.asm.Ba).apply(null,arguments)},c._OrtReleaseSession=function(){return(c._OrtReleaseSession=c.asm.Ca).apply(null,arguments)},c._OrtGetInputCount=function(){return(c._OrtGetInputCount=c.asm.Da).apply(null,arguments)},c._OrtGetOutputCount=function(){return(c._OrtGetOutputCount=c.asm.Ea).apply(null,arguments)},c._OrtGetInputName=function(){return(c._OrtGetInputName=c.asm.Fa).apply(null,arguments)},c._OrtGetOutputName=function(){return(c._OrtGetOutputName=c.asm.Ga).apply(null,arguments)},c._OrtFree=function(){return(c._OrtFree=c.asm.Ha).apply(null,arguments)},c._OrtCreateTensor=function(){return(c._OrtCreateTensor=c.asm.Ia).apply(null,arguments)},c._OrtGetTensorData=function(){return(c._OrtGetTensorData=c.asm.Ja).apply(null,arguments)},c._OrtReleaseTensor=function(){return(c._OrtReleaseTensor=c.asm.Ka).apply(null,arguments)},c._OrtCreateRunOptions=function(){return(c._OrtCreateRunOptions=c.asm.La).apply(null,arguments)},c._OrtAddRunConfigEntry=function(){return(c._OrtAddRunConfigEntry=c.asm.Ma).apply(null,arguments)},c._OrtReleaseRunOptions=function(){return(c._OrtReleaseRunOptions=c.asm.Na).apply(null,arguments)},c._OrtRun=function(){return(c._OrtRun=c.asm.Oa).apply(null,arguments)},c._OrtEndProfiling=function(){return(c._OrtEndProfiling=c.asm.Pa).apply(null,arguments)};var Vr=c._pthread_self=function(){return(Vr=c._pthread_self=c.asm.Qa).apply(null,arguments)},qr=c._malloc=function(){return(qr=c._malloc=c.asm.Ra).apply(null,arguments)},Jr=c._free=function(){return(Jr=c._free=c.asm.Sa).apply(null,arguments)};c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm.Ta).apply(null,arguments)};var Qr=c.___getTypeName=function(){return(Qr=c.___getTypeName=c.asm.Ua).apply(null,arguments)};c.__embind_initialize_bindings=function(){return(c.__embind_initialize_bindings=c.asm.Va).apply(null,arguments)};var Xr=c.__emscripten_thread_init=function(){return(Xr=c.__emscripten_thread_init=c.asm.Wa).apply(null,arguments)};function $r(){return($r=c.asm.Za).apply(null,arguments)}c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm.Xa).apply(null,arguments)};var Zr=c.__emscripten_proxy_execute_task_queue=function(){return(Zr=c.__emscripten_proxy_execute_task_queue=c.asm._a).apply(null,arguments)};function Kr(){return(Kr=c.asm.$a).apply(null,arguments)}var en,rn=c.__emscripten_thread_exit=function(){return(rn=c.__emscripten_thread_exit=c.asm.ab).apply(null,arguments)};function nn(){return(nn=c.asm.bb).apply(null,arguments)}function tn(){return(tn=c.asm.cb).apply(null,arguments)}function an(){return(an=c.asm.db).apply(null,arguments)}function on(){return(on=c.asm.eb).apply(null,arguments)}function un(){function e(){if(!en&&(en=!0,c.calledRun=!0,!L)&&(_||ve(K),f(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!_)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();ee.unshift(e)}ve(ee)}}if(!(0<te))if(_)f(c),_||ve(K),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)re();ve(Z),0<te||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.UTF8ToString=G,c.stringToUTF8=q,c.lengthBytesUTF8=J,c.keepRuntimeAlive=function(){return R},c.wasmMemory=F,c.stackAlloc=on,c.stackSave=tn,c.stackRestore=an,c.ExitStatus=fe,c.PThread=ye,oe=function e(){en||un(),en||(oe=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return un(),e.ready});e.exports=t},932:function(e,r,n){var _scriptDir,t=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e={}){var r,t,a;r||(r=void 0!==e?e:{}),r.ready=new Promise((function(e,r){t=e,a=r}));var o,i,u,s=Object.assign({},r),c="./this.program",f="object"==typeof window,l="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(p){var h=n(384),g=n(908);d=l?g.dirname(d)+"/":"//",o=(e,r)=>(e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFileSync(e,r?void 0:"utf8")),u=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,r,n)=>{e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFile(e,(function(e,t){e?n(e):r(t.buffer)}))},1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),15>process.versions.node.split(".")[0]&&process.on("unhandledRejection",(function(e){throw e})),r.inspect=function(){return"[Emscripten Module object]"}}else(f||l)&&(l?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},l&&(u=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),i=(e,r,n)=>{var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{200==t.status||0==t.status&&t.response?r(t.response):n()},t.onerror=n,t.send(null)});var y,v=r.print||console.log.bind(console),m=r.printErr||console.warn.bind(console);Object.assign(r,s),s=null,r.thisProgram&&(c=r.thisProgram),r.wasmBinary&&(y=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&B("no native wasm support detected");var b,w,_,T,O,A,S,E,P,C=!1,M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,r,n){var t=(r>>>=0)+n;for(n=r;e[n]&&!(n>=t);)++n;if(16<n-r&&e.buffer&&M)return M.decode(e.subarray(r,n));for(t="";r<n;){var a=e[r++];if(128&a){var o=63&e[r++];if(192==(224&a))t+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[r++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[r++])?t+=String.fromCharCode(a):(a-=65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else t+=String.fromCharCode(a)}return t}function R(e,r){return(e>>>=0)?k(_,e,r):""}function F(e,r,n,t){if(!(0<t))return 0;var a=n>>>=0;t=n+t-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=t)break;r[n++>>>0]=i}else{if(2047>=i){if(n+1>=t)break;r[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=t)break;r[n++>>>0]=224|i>>12}else{if(n+3>=t)break;r[n++>>>0]=240|i>>18,r[n++>>>0]=128|i>>12&63}r[n++>>>0]=128|i>>6&63}r[n++>>>0]=128|63&i}}return r[n>>>0]=0,n-a}function x(e,r,n){return F(e,_,r,n)}function U(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);127>=t?r++:2047>=t?r+=2:55296<=t&&57343>=t?(r+=4,++n):r+=3}return r}function W(){var e=b.buffer;r.HEAP8=w=new Int8Array(e),r.HEAP16=T=new Int16Array(e),r.HEAP32=A=new Int32Array(e),r.HEAPU8=_=new Uint8Array(e),r.HEAPU16=O=new Uint16Array(e),r.HEAPU32=S=new Uint32Array(e),r.HEAPF32=E=new Float32Array(e),r.HEAPF64=P=new Float64Array(e)}var D=[],I=[],j=[];function H(){var e=r.preRun.shift();D.unshift(e)}var Y,z=0,L=null,N=null;function B(e){throw r.onAbort&&r.onAbort(e),m(e="Aborted("+e+")"),C=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function G(e){return e.startsWith("data:application/octet-stream;base64,")}if(!G(Y="ort-wasm.wasm")){var V=Y;Y=r.locateFile?r.locateFile(V,d):d+V}function q(e){try{if(e==Y&&y)return new Uint8Array(y);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function J(e,r,n){return function(e){if(!y&&(f||l)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((function(r){if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()})).catch((function(){return q(e)}));if(i)return new Promise((function(r,n){i(e,(function(e){r(new Uint8Array(e))}),n)}))}return Promise.resolve().then((function(){return q(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(n,(function(e){m("failed to asynchronously prepare wasm: "+e),B(e)}))}function Q(e){for(;0<e.length;)e.shift()(r)}function X(e){this.Pa=e-24,this.ab=function(e){S[this.Pa+4>>2>>>0]=e},this.Ya=function(e){S[this.Pa+8>>2>>>0]=e},this.Za=function(){A[this.Pa>>2>>>0]=0},this.Xa=function(){w[this.Pa+12>>0>>>0]=0},this.$a=function(){w[this.Pa+13>>0>>>0]=0},this.Va=function(e,r){this.Wa(),this.ab(e),this.Ya(r),this.Za(),this.Xa(),this.$a()},this.Wa=function(){S[this.Pa+16>>2>>>0]=0}}function $(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var Z=void 0;function K(e){for(var r="";_[e>>>0];)r+=Z[_[e++>>>0]];return r}var ee={},re={},ne={};function te(e){if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=r&&57>=r?"_"+e:e}function ae(e,r){return{[e=te(e)]:function(){return r.apply(this,arguments)}}[e]}function oe(e){var r=Error,n=ae(e,(function(r){this.name=e,this.message=r,void 0!==(r=Error(r).stack)&&(this.stack=this.toString()+"\\n"+r.replace(/^Error(:[^\\n]*)?\\n/,""))}));return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ie=void 0;function ue(e){throw new ie(e)}function se(e,r,n={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=r.name;if(e||ue(\'type "\'+t+\'" must have a positive integer typeid pointer\'),re.hasOwnProperty(e)){if(n.bb)return;ue("Cannot register type \'"+t+"\' twice")}re[e]=r,delete ne[e],ee.hasOwnProperty(e)&&(r=ee[e],delete ee[e],r.forEach((e=>e())))}var ce=[],fe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function le(e){4<e&&0==--fe[e].Ta&&(fe[e]=void 0,ce.push(e))}var pe=e=>(e||ue("Cannot use deleted val. handle = "+e),fe[e].value),de=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var r=ce.length?ce.pop():fe.length;return fe[r]={Ta:1,value:e},r}};function he(e){return this.fromWireType(A[e>>2>>>0])}function ge(e,r){switch(r){case 2:return function(e){return this.fromWireType(E[e>>>2])};case 3:return function(e){return this.fromWireType(P[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function ye(e,r,n){switch(r){case 0:return n?function(e){return w[e>>>0]}:function(e){return _[e>>>0]};case 1:return n?function(e){return T[e>>>1]}:function(e){return O[e>>>1]};case 2:return n?function(e){return A[e>>>2]}:function(e){return S[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var ve="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function me(e,r){for(var n=e>>1,t=n+r/2;!(n>=t)&&O[n>>>0];)++n;if(32<(n<<=1)-e&&ve)return ve.decode(_.subarray(e>>>0,n>>>0));for(n="",t=0;!(t>=r/2);++t){var a=T[e+2*t>>1>>>0];if(0==a)break;n+=String.fromCharCode(a)}return n}function be(e,r,n){if(void 0===n&&(n=2147483647),2>n)return 0;var t=r;n=(n-=2)<2*e.length?n/2:e.length;for(var a=0;a<n;++a)T[r>>1>>>0]=e.charCodeAt(a),r+=2;return T[r>>1>>>0]=0,r-t}function we(e){return 2*e.length}function _e(e,r){for(var n=0,t="";!(n>=r/4);){var a=A[e+4*n>>2>>>0];if(0==a)break;++n,65536<=a?(a-=65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a)):t+=String.fromCharCode(a)}return t}function Te(e,r,n){if(void 0===n&&(n=2147483647),4>n)return 0;var t=r>>>=0;n=t+n-4;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),A[r>>2>>>0]=o,(r+=4)+4>n)break}return A[r>>2>>>0]=0,r-t}function Oe(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);55296<=t&&57343>=t&&++n,r+=4}return r}function Ae(e,r){var n=re[e];if(void 0===n){var t=K(e=Xe(e));Qe(e),ue(r+" has unknown type "+t)}return n}var Se={};function Ee(e){var r=Se[e];return void 0===r?K(e):r}var Pe=[];function Ce(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Me=[],ke={};function Re(e){return 0==e%4&&(0!=e%100||0==e%400)}var Fe,xe=[0,31,60,91,121,152,182,213,244,274,305,335],Ue=[0,31,59,90,120,151,181,212,243,273,304,334];function We(e){return(Re(e.getFullYear())?xe:Ue)[e.getMonth()]+e.getDate()-1}function De(e){var r=U(e)+1,n=Je(r);return n&&F(e,w,n,r),n}Fe=p?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Ie={};function je(){if(!He){var e,r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in Ie)void 0===Ie[e]?delete r[e]:r[e]=Ie[e];var n=[];for(e in r)n.push(e+"="+r[e]);He=n}return He}var He,Ye=[null,[],[]],ze=[31,29,31,30,31,30,31,31,30,31,30,31],Le=[31,28,31,30,31,30,31,31,30,31,30,31];function Ne(e,r,n,t){function a(e,r,n){for(e="number"==typeof e?e.toString():e||"";e.length<r;)e=n[0]+e;return e}function o(e,r){return a(e,r,"0")}function i(e,r){function n(e){return 0>e?-1:0<e?1:0}var t;return 0===(t=n(e.getFullYear()-r.getFullYear()))&&0===(t=n(e.getMonth()-r.getMonth()))&&(t=n(e.getDate()-r.getDate())),t}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function s(e){var r=e.Na;for(e=new Date(new Date(e.Oa+1900,0,1).getTime());0<r;){var n=e.getMonth(),t=(Re(e.getFullYear())?ze:Le)[n];if(!(r>t-e.getDate())){e.setDate(e.getDate()+r);break}r-=t-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),r=u(new Date(e.getFullYear(),0,4)),n=u(n),0>=i(r,e)?0>=i(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=A[t+40>>2>>>0];for(var f in t={gb:A[t>>2>>>0],fb:A[t+4>>2>>>0],Ra:A[t+8>>2>>>0],Ua:A[t+12>>2>>>0],Sa:A[t+16>>2>>>0],Oa:A[t+20>>2>>>0],Ja:A[t+24>>2>>>0],Na:A[t+28>>2>>>0],ib:A[t+32>>2>>>0],eb:A[t+36>>2>>>0],hb:c?R(c):""},n=R(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(f,"g"),c[f]);var l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(f in c={"%a":function(e){return l[e.Ja].substring(0,3)},"%A":function(e){return l[e.Ja]},"%b":function(e){return p[e.Sa].substring(0,3)},"%B":function(e){return p[e.Sa]},"%C":function(e){return o((e.Oa+1900)/100|0,2)},"%d":function(e){return o(e.Ua,2)},"%e":function(e){return a(e.Ua,2," ")},"%g":function(e){return s(e).toString().substring(2)},"%G":function(e){return s(e)},"%H":function(e){return o(e.Ra,2)},"%I":function(e){return 0==(e=e.Ra)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var r=0,n=0;n<=e.Sa-1;r+=(Re(e.Oa+1900)?ze:Le)[n++]);return o(e.Ua+r,3)},"%m":function(e){return o(e.Sa+1,2)},"%M":function(e){return o(e.fb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.Ra&&12>e.Ra?"AM":"PM"},"%S":function(e){return o(e.gb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.Ja||7},"%U":function(e){return o(Math.floor((e.Na+7-e.Ja)/7),2)},"%V":function(e){var r=Math.floor((e.Na+7-(e.Ja+6)%7)/7);if(2>=(e.Ja+371-e.Na-2)%7&&r++,r)53==r&&(4==(n=(e.Ja+371-e.Na)%7)||3==n&&Re(e.Oa)||(r=1));else{r=52;var n=(e.Ja+7-e.Na-1)%7;(4==n||5==n&&Re(e.Oa%400-1))&&r++}return o(r,2)},"%w":function(e){return e.Ja},"%W":function(e){return o(Math.floor((e.Na+7-(e.Ja+6)%7)/7),2)},"%y":function(e){return(e.Oa+1900).toString().substring(2)},"%Y":function(e){return e.Oa+1900},"%z":function(e){var r=0<=(e=e.eb);return e=Math.abs(e)/60,(r?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.hb},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),c)n.includes(f)&&(n=n.replace(new RegExp(f,"g"),c[f](t)));return f=function(e){var r=Array(U(e)+1);return F(e,r,0,r.length),r}(n=n.replace(/\\0\\0/g,"%")),f.length>r?0:(w.set(f,e>>>0),f.length-1)}for(var Be=Array(256),Ge=0;256>Ge;++Ge)Be[Ge]=String.fromCharCode(Ge);Z=Be,ie=r.BindingError=oe("BindingError"),r.InternalError=oe("InternalError"),r.count_emval_handles=function(){for(var e=0,r=5;r<fe.length;++r)void 0!==fe[r]&&++e;return e},r.get_first_emval=function(){for(var e=5;e<fe.length;++e)if(void 0!==fe[e])return fe[e];return null};var Ve={a:function(e,r,n){throw new X(e).Va(r,n),e},ca:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},r:function(){return 0},Y:function(){},M:function(){},O:function(){},H:function(){return 0},W:function(){},R:function(){},V:function(){},z:function(){},N:function(){},K:function(){},X:function(){},L:function(){},G:function(){},fa:function(e,r,n,t,a){var o=$(n);se(e,{name:r=K(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?t:a},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var t=w;else if(2===n)t=T;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+r);t=A}return this.fromWireType(t[e>>>o])},Qa:null})},ea:function(e,r){se(e,{name:r=K(r),fromWireType:function(e){var r=pe(e);return le(e),r},toWireType:function(e,r){return de(r)},argPackAdvance:8,readValueFromPointer:he,Qa:null})},B:function(e,r,n){n=$(n),se(e,{name:r=K(r),fromWireType:function(e){return e},toWireType:function(e,r){return r},argPackAdvance:8,readValueFromPointer:ge(r,n),Qa:null})},o:function(e,r,n,t,a){r=K(r),-1===a&&(a=4294967295),a=$(n);var o=e=>e;if(0===t){var i=32-8*n;o=e=>e<<i>>>i}n=r.includes("unsigned")?function(e,r){return r>>>0}:function(e,r){return r},se(e,{name:r,fromWireType:o,toWireType:n,argPackAdvance:8,readValueFromPointer:ye(r,a,0!==t),Qa:null})},l:function(e,r,n){function t(e){e>>=2;var r=S;return new a(r.buffer,r[e+1>>>0],r[e>>>0])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];se(e,{name:n=K(n),fromWireType:t,argPackAdvance:8,readValueFromPointer:t},{bb:!0})},C:function(e,r){var n="std::string"===(r=K(r));se(e,{name:r,fromWireType:function(e){var r=S[e>>2>>>0],t=e+4;if(n)for(var a=t,o=0;o<=r;++o){var i=t+o;if(o==r||0==_[i>>>0]){if(a=R(a,i-a),void 0===u)var u=a;else u+=String.fromCharCode(0),u+=a;a=i+1}}else{for(u=Array(r),o=0;o<r;++o)u[o]=String.fromCharCode(_[t+o>>>0]);u=u.join("")}return Qe(e),u},toWireType:function(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var t,a="string"==typeof r;a||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||ue("Cannot pass non-string to std::string"),t=n&&a?U(r):r.length;var o=Je(4+t+1),i=o+4>>>0;if(S[o>>2>>>0]=t,n&&a)x(r,i,t+1);else if(a)for(a=0;a<t;++a){var u=r.charCodeAt(a);255<u&&(Qe(i),ue("String has UTF-16 code units that do not fit in 8 bits")),_[i+a>>>0]=u}else for(a=0;a<t;++a)_[i+a>>>0]=r[a];return null!==e&&e.push(Qe,o),o},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){Qe(e)}})},t:function(e,r,n){if(n=K(n),2===r)var t=me,a=be,o=we,i=()=>O,u=1;else 4===r&&(t=_e,a=Te,o=Oe,i=()=>S,u=2);se(e,{name:n,fromWireType:function(e){for(var n,a=S[e>>>2],o=i(),s=e+4,c=0;c<=a;++c){var f=e+4+c*r;c!=a&&0!=o[f>>>u]||(s=t(s,f-s),void 0===n?n=s:(n+=String.fromCharCode(0),n+=s),s=f+r)}return Qe(e),n},toWireType:function(e,t){"string"!=typeof t&&ue("Cannot pass non-string to C++ string type "+n);var i=o(t),s=Je(4+i+r);return S[(s>>>=0)>>>2]=i>>u,a(t,s+4,i+r),null!==e&&e.push(Qe,s),s},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){Qe(e)}})},ga:function(e,r){se(e,{cb:!0,name:r=K(r),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},Z:function(){return!0},p:function(e,r,n){e=pe(e),r=Ae(r,"emval::as");var t=[],a=de(t);return S[n>>2>>>0]=a,r.toWireType(t,e)},i:function(e,r,n,t,a){e=Pe[e],r=pe(r),n=Ee(n);var o=[];return S[t>>2>>>0]=de(o),e(r,n,o,a)},u:function(e,r,n,t){(e=Pe[e])(r=pe(r),n=Ee(n),null,t)},b:le,E:function(e,r){return(e=pe(e))==pe(r)},w:function(e){return 0===e?de(Ce()):(e=Ee(e),de(Ce()[e]))},h:function(e,r){var n=function(e,r){for(var n=Array(e),t=0;t<e;++t)n[t]=Ae(S[r+4*t>>2>>>0],"parameter "+t);return n}(e,r),t=n[0];r=t.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var a=Me[r];if(void 0!==a)return a;a=["retType"];for(var o=[t],i="",u=0;u<e-1;++u)i+=(0!==u?", ":"")+"arg"+u,a.push("argType"+u),o.push(n[1+u]);var s="return function "+te("methodCaller_"+r)+"(handle, name, destructors, args) {\\n",c=0;for(u=0;u<e-1;++u)s+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(c?"+"+c:"")+");\\n",c+=n[u+1].argPackAdvance;for(s+="    var rv = handle[name]("+i+");\\n",u=0;u<e-1;++u)n[u+1].deleteObject&&(s+="    argType"+u+".deleteObject(arg"+u+");\\n");return t.cb||(s+="    return retType.toWireType(destructors, rv);\\n"),a.push(s+"};\\n"),e=function(e){var r=Function;if(!(r instanceof Function))throw new TypeError("new_ called with constructor type "+typeof r+" which is not a function");var n=ae(r.name||"unknownFunctionName",(function(){}));return n.prototype=r.prototype,n=new n,(e=r.apply(n,e))instanceof Object?e:n}(a).apply(null,o),a=function(e){var r=Pe.length;return Pe.push(e),r}(e),Me[r]=a},v:function(e,r){return e=pe(e),r=pe(r),de(e[r])},c:function(e){4<e&&(fe[e].Ta+=1)},ia:function(e,n,t,a){e=pe(e);var o=ke[n];return o||(o=function(e){for(var n="",t=0;t<e;++t)n+=(0!==t?", ":"")+"arg"+t;var a="return function emval_allocator_"+e+"(constructor, argTypes, args) {\\n  var HEAPU32 = getMemory();\\n";for(t=0;t<e;++t)a+="var argType"+t+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], \'parameter "+t+"\');\\nvar arg"+t+" = argType"+t+".readValueFromPointer(args);\\nargs += argType"+t+"[\'argPackAdvance\'];\\nargTypes += 4;\\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",a+"var obj = new constructor("+n+");\\nreturn valueToHandle(obj);\\n}\\n")(Ae,r,de,(()=>S))}(n),ke[n]=o),o(e,t,a)},D:function(){return de([])},k:function(e){e=pe(e);for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=e[n];return de(r)},d:function(e){return de(Ee(e))},j:function(){return de({})},g:function(e){for(var r=pe(e);r.length;){var n=r.pop();r.pop()(n)}le(e)},e:function(e,r,n){e=pe(e),r=pe(r),n=pe(n),e[r]=n},f:function(e,r){return e=(e=Ae(e,"_emval_take_value")).readValueFromPointer(r),de(e)},_:function(e,r){e=new Date(1e3*(S[e>>>2]+4294967296*A[e+4>>>2])),A[r>>2>>>0]=e.getUTCSeconds(),A[r+4>>2>>>0]=e.getUTCMinutes(),A[r+8>>2>>>0]=e.getUTCHours(),A[r+12>>2>>>0]=e.getUTCDate(),A[r+16>>2>>>0]=e.getUTCMonth(),A[r+20>>2>>>0]=e.getUTCFullYear()-1900,A[r+24>>2>>>0]=e.getUTCDay(),A[r+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},$:function(e,r){e=new Date(1e3*(S[e>>>2]+4294967296*A[e+4>>>2])),A[r>>2>>>0]=e.getSeconds(),A[r+4>>2>>>0]=e.getMinutes(),A[r+8>>2>>>0]=e.getHours(),A[r+12>>2>>>0]=e.getDate(),A[r+16>>2>>>0]=e.getMonth(),A[r+20>>2>>>0]=e.getFullYear()-1900,A[r+24>>2>>>0]=e.getDay(),A[r+28>>2>>>0]=0|We(e),A[r+36>>2>>>0]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset(),t=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[r+32>>2>>>0]=0|(n!=t&&e.getTimezoneOffset()==Math.min(t,n))},aa:function(e){var r=new Date(A[e+20>>2>>>0]+1900,A[e+16>>2>>>0],A[e+12>>2>>>0],A[e+8>>2>>>0],A[e+4>>2>>>0],A[e>>2>>>0],0),n=A[e+32>>2>>>0],t=r.getTimezoneOffset(),a=new Date(r.getFullYear(),6,1).getTimezoneOffset(),o=new Date(r.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>n?A[e+32>>2>>>0]=Number(a!=o&&i==t):0<n!=(i==t)&&(a=Math.max(o,a),r.setTime(r.getTime()+6e4*((0<n?i:a)-t))),A[e+24>>2>>>0]=r.getDay(),A[e+28>>2>>>0]=0|We(r),A[e>>2>>>0]=r.getSeconds(),A[e+4>>2>>>0]=r.getMinutes(),A[e+8>>2>>>0]=r.getHours(),A[e+12>>2>>>0]=r.getDate(),A[e+16>>2>>>0]=r.getMonth(),A[e+20>>2>>>0]=r.getYear(),r.getTime()/1e3|0},P:function(){return-52},Q:function(){},ba:function(e,r,n){function t(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var u=i.getTimezoneOffset();S[e>>2>>>0]=60*Math.max(a,u),A[r>>2>>>0]=Number(a!=u),e=t(o),r=t(i),e=De(e),r=De(r),u<a?(S[n>>2>>>0]=e,S[n+4>>2>>>0]=r):(S[n>>2>>>0]=r,S[n+4>>2>>>0]=e)},q:function(){B("")},ha:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},A:function(){return Date.now()},J:function(){return 4294901760},n:Fe,U:function(e,r,n){_.copyWithin(e>>>0,r>>>0,r+n>>>0)},I:function(e){var r=_.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var t=r*(1+.2/n);t=Math.min(t,e+100663296);var a=Math,o=a.min;t=Math.max(e,t),t+=(65536-t%65536)%65536;e:{var i=b.buffer;try{b.grow(o.call(a,4294901760,t)-i.byteLength+65535>>>16),W();var u=1;break e}catch(e){}u=void 0}if(u)return!0}return!1},S:function(e,r){var n=0;return je().forEach((function(t,a){var o=r+n;for(a=S[e+4*a>>2>>>0]=o,o=0;o<t.length;++o)w[a++>>0>>>0]=t.charCodeAt(o);w[a>>0>>>0]=0,n+=t.length+1})),0},T:function(e,r){var n=je();S[e>>2>>>0]=n.length;var t=0;return n.forEach((function(e){t+=e.length+1})),S[r>>2>>>0]=t,0},s:function(){return 52},y:function(){return 52},F:function(){return 70},x:function(e,r,n,t){for(var a=0,o=0;o<n;o++){var i=S[r>>2>>>0],u=S[r+4>>2>>>0];r+=8;for(var s=0;s<u;s++){var c=_[i+s>>>0],f=Ye[e];0===c||10===c?((1===e?v:m)(k(f,0)),f.length=0):f.push(c)}a+=u}return S[t>>2>>>0]=a,0},da:Ne,m:function(e,r,n,t){return Ne(e,r,n,t)}};!function(){function e(e){if(e=e.exports,r.asm=e,b=r.asm.ja,W(),I.unshift(r.asm.ka),z--,r.monitorRunDependencies&&r.monitorRunDependencies(z),0==z&&(null!==L&&(clearInterval(L),L=null),N)){var n=N;N=null,n()}return e}var n={a:Ve};if(z++,r.monitorRunDependencies&&r.monitorRunDependencies(z),r.instantiateWasm)try{return r.instantiateWasm(n,e)}catch(e){m("Module.instantiateWasm callback failed with error: "+e),a(e)}(function(e,r){var n=Y;return y||"function"!=typeof WebAssembly.instantiateStreaming||G(n)||n.startsWith("file://")||p||"function"!=typeof fetch?J(n,e,r):fetch(n,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(t){return m("wasm streaming compile failed: "+t),m("falling back to ArrayBuffer instantiation"),J(n,e,r)}))}))})(n,(function(r){e(r.instance)})).catch(a)}(),r._OrtInit=function(){return(r._OrtInit=r.asm.la).apply(null,arguments)},r._OrtCreateSessionOptions=function(){return(r._OrtCreateSessionOptions=r.asm.ma).apply(null,arguments)},r._OrtAppendExecutionProvider=function(){return(r._OrtAppendExecutionProvider=r.asm.na).apply(null,arguments)},r._OrtAddSessionConfigEntry=function(){return(r._OrtAddSessionConfigEntry=r.asm.oa).apply(null,arguments)},r._OrtReleaseSessionOptions=function(){return(r._OrtReleaseSessionOptions=r.asm.pa).apply(null,arguments)},r._OrtCreateSession=function(){return(r._OrtCreateSession=r.asm.qa).apply(null,arguments)},r._OrtReleaseSession=function(){return(r._OrtReleaseSession=r.asm.ra).apply(null,arguments)},r._OrtGetInputCount=function(){return(r._OrtGetInputCount=r.asm.sa).apply(null,arguments)},r._OrtGetOutputCount=function(){return(r._OrtGetOutputCount=r.asm.ta).apply(null,arguments)},r._OrtGetInputName=function(){return(r._OrtGetInputName=r.asm.ua).apply(null,arguments)},r._OrtGetOutputName=function(){return(r._OrtGetOutputName=r.asm.va).apply(null,arguments)},r._OrtFree=function(){return(r._OrtFree=r.asm.wa).apply(null,arguments)},r._OrtCreateTensor=function(){return(r._OrtCreateTensor=r.asm.xa).apply(null,arguments)},r._OrtGetTensorData=function(){return(r._OrtGetTensorData=r.asm.ya).apply(null,arguments)},r._OrtReleaseTensor=function(){return(r._OrtReleaseTensor=r.asm.za).apply(null,arguments)},r._OrtCreateRunOptions=function(){return(r._OrtCreateRunOptions=r.asm.Aa).apply(null,arguments)},r._OrtAddRunConfigEntry=function(){return(r._OrtAddRunConfigEntry=r.asm.Ba).apply(null,arguments)},r._OrtReleaseRunOptions=function(){return(r._OrtReleaseRunOptions=r.asm.Ca).apply(null,arguments)},r._OrtRun=function(){return(r._OrtRun=r.asm.Da).apply(null,arguments)},r._OrtEndProfiling=function(){return(r._OrtEndProfiling=r.asm.Ea).apply(null,arguments)};var qe,Je=r._malloc=function(){return(Je=r._malloc=r.asm.Fa).apply(null,arguments)},Qe=r._free=function(){return(Qe=r._free=r.asm.Ga).apply(null,arguments)},Xe=r.___getTypeName=function(){return(Xe=r.___getTypeName=r.asm.Ha).apply(null,arguments)};function $e(){return($e=r.asm.Ka).apply(null,arguments)}function Ze(){return(Ze=r.asm.La).apply(null,arguments)}function Ke(){return(Ke=r.asm.Ma).apply(null,arguments)}function er(){function e(){if(!qe&&(qe=!0,r.calledRun=!0,!C)){if(Q(I),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var e=r.postRun.shift();j.unshift(e)}Q(j)}}if(!(0<z)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)H();Q(D),0<z||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e())}}if(r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.Ia).apply(null,arguments)},r.UTF8ToString=R,r.stringToUTF8=x,r.lengthBytesUTF8=U,r.stackAlloc=Ke,r.stackSave=$e,r.stackRestore=Ze,N=function e(){qe||er(),qe||(N=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return er(),e.ready});e.exports=t},154:function(e){"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=[],d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(e.__embind_initialize_bindings(),n.forEach((a=>{e.executeNotifiedProxyingQueue(a)})),n=[],o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("processProxyingQueue"===r.data.cmd?o?e.executeNotifiedProxyingQueue(r.data.queue):n.push(r.data.queue):r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},384:function(){},993:function(){},908:function(){},953:function(){},925:function(){},449:function(){}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";var e=n(259),r=n(263);self.onmessage=function(n){switch(n.data.type){case"init-wasm":(0,r.initializeWebAssembly)(n.data.in).then((function(){return postMessage({type:"init-wasm"})}),(function(e){return postMessage({type:"init-wasm",err:e})}));break;case"init-ort":try{var t=n.data.in,a=t.numThreads,o=t.loggingLevel;(0,e.initOrt)(a,o),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{var i=n.data.in.model,u=(0,e.createSessionAllocate)(i);postMessage({type:"create_allocate",out:u})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{var s=n.data.in,c=(u=s.modeldata,s.options),f=(0,e.createSessionFinalize)(u,c);postMessage({type:"create_finalize",out:f})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{var l=n.data.in;i=l.model,c=l.options,f=(0,e.createSession)(i,c),postMessage({type:"create",out:f})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{var p=n.data.in;(0,e.releaseSession)(p),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{var d=n.data.in,h=d.sessionId,g=d.inputIndices,y=d.inputs,v=d.outputIndices;c=d.options,(0,e.run)(h,g,y,v,c).then((function(r){postMessage({type:"run",out:r},(0,e.extractTransferableBuffers)(r))}),(function(e){postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{p=n.data.in,(0,e.endProfiling)(p),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}}()}();\n',"Worker",void 0,void 0)}},6614:function(t){"use strict";t.exports=function(t,e,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([t])}catch(e){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),i=i.getBlob()}var a=o.URL||o.webkitURL,s=a.createObjectURL(i),u=new o[e](s,n);return a.revokeObjectURL(s),u}catch(r){return new o[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new o[e](r,n)}}},3474:function(t,e,n){var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t={}){function e(){return C.buffer!=F.buffer&&Y(),F}function r(){return C.buffer!=F.buffer&&Y(),M}function o(){return C.buffer!=F.buffer&&Y(),N}function i(){return C.buffer!=F.buffer&&Y(),L}function a(){return C.buffer!=F.buffer&&Y(),j}function s(){return C.buffer!=F.buffer&&Y(),U}function u(){return C.buffer!=F.buffer&&Y(),V}var c,l,f;c||(c=void 0!==t?t:{}),c.ready=new Promise((function(t,e){l=t,f=e}));var p,d,h,g=Object.assign({},c),y="./this.program",b=(t,e)=>{throw e},m="object"==typeof window,v="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=c.ENVIRONMENT_IS_PTHREAD||!1,x="";function T(t){return c.locateFile?c.locateFile(t,x):x+t}if(w){var S=n(1384),A=n(908);let e;x=v?A.dirname(x)+"/":"//",p=(t,e)=>(t=t.startsWith("file://")?new URL(t):A.normalize(t),S.readFileSync(t,e?void 0:"utf8")),h=t=>((t=p(t,!0)).buffer||(t=new Uint8Array(t)),t),d=(t,e,n)=>{t=t.startsWith("file://")?new URL(t):A.normalize(t),S.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof lt))throw t})),15>process.versions.node.split(".")[0]&&process.on("unhandledRejection",(function(t){throw t})),b=(t,e)=>{if(k)throw process.exitCode=t,e;if(!(e instanceof lt)){var n=e;e&&"object"==typeof e&&e.stack&&(n=[e,e.stack]),D("exiting due to exception: "+n)}process.exit(t)},c.inspect=function(){return"[Emscripten Module object]"};try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}n.g.Worker=e.Worker}else(m||v)&&(v?x=self.location.href:"undefined"!=typeof document&&document.currentScript&&(x=document.currentScript.src),_scriptDir&&(x=_scriptDir),x=0!==x.indexOf("blob:")?x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},v&&(h=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),d=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));w&&"undefined"==typeof performance&&(n.g.performance=n(6953).performance);var O=console.log.bind(console),P=console.warn.bind(console);w&&(O=t=>S.writeSync(1,t+"\n"),P=t=>S.writeSync(2,t+"\n"));var E,I=c.print||O,D=c.printErr||P;Object.assign(c,g),g=null,c.thisProgram&&(y=c.thisProgram),c.quit&&(b=c.quit),c.wasmBinary&&(E=c.wasmBinary);var k=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&at("no native wasm support detected");var C,R,F,M,N,L,j,U,B,V,G=!1,z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function W(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&z)return z.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var i=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|i);else{var a=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|i<<6|a:(7&o)<<18|i<<12|a<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function H(t,e){return(t>>>=0)?W(r(),t,e):""}function q(t,e,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var a=t.charCodeAt(i);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),127>=a){if(n>=r)break;e[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;e[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;e[n++>>>0]=224|a>>12}else{if(n+3>=r)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63}e[n++>>>0]=128|a>>6&63}e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-o}function K(t,e,n){return q(t,r(),e,n)}function X(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function Y(){var t=C.buffer;c.HEAP8=F=new Int8Array(t),c.HEAP16=N=new Int16Array(t),c.HEAP32=j=new Int32Array(t),c.HEAPU8=M=new Uint8Array(t),c.HEAPU16=L=new Uint16Array(t),c.HEAPU32=U=new Uint32Array(t),c.HEAPF32=B=new Float32Array(t),c.HEAPF64=V=new Float64Array(t)}var J=c.INITIAL_MEMORY||16777216;if(1048576<=J||at("INITIAL_MEMORY should be larger than STACK_SIZE, was "+J+"! (STACK_SIZE=1048576)"),_)C=c.wasmMemory;else if(c.wasmMemory)C=c.wasmMemory;else if(!((C=new WebAssembly.Memory({initial:J/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw D("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&D("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),J=C.buffer.byteLength;var Z,Q=[],$=[],tt=[];function et(){var t=c.preRun.shift();Q.unshift(t)}var nt,rt=0,ot=null,it=null;function at(t){throw c.onAbort&&c.onAbort(t),D(t="Aborted("+t+")"),G=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}function st(t){return t.startsWith("data:application/octet-stream;base64,")}function ut(t){try{if(t==nt&&E)return new Uint8Array(E);if(h)return h(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}function ct(t,e,n){return function(t){if(!E&&(m||v)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((function(){return ut(t)}));if(d)return new Promise((function(e,n){d(t,(function(t){e(new Uint8Array(t))}),n)}))}return Promise.resolve().then((function(){return ut(t)}))}(t).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(t){return t})).then(n,(function(t){D("failed to asynchronously prepare wasm: "+t),at(t)}))}function lt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function ft(t){t.terminate(),t.onmessage=()=>{}}function pt(t){(t=yt.hb[t])||at(),yt.Mb(t)}function dt(t){var e=yt.Ab();if(!e)return 6;yt.ib.push(e),yt.hb[t.fb]=e,e.fb=t.fb;var n={cmd:"run",start_routine:t.Nb,arg:t.xb,pthread_ptr:t.fb};return w&&e.ref(),e.postMessage(n,t.Tb),0}function ht(t){if(_)return Pe(1,1,t);k||(yt.Ob(),c.onExit&&c.onExit(t),G=!0),b(t,new lt(t))}function gt(t){if(_)throw mt(t),"unwind";ht(t)}st(nt="ort-wasm-threaded.wasm")||(nt=T(nt));var yt={lb:[],ib:[],vb:[],hb:{},qb:function(){_&&yt.Eb()},Vb:function(){},Eb:function(){yt.receiveObjectTransfer=yt.Lb,yt.threadInitTLS=yt.ub,yt.setExitStatus=yt.tb,k=!1},tb:function(){},Xb:["$terminateWorker"],Ob:function(){for(var t of yt.ib)ft(t);for(t of yt.lb)ft(t);yt.lb=[],yt.ib=[],yt.hb=[]},Mb:function(t){var e=t.fb;delete yt.hb[e],yt.lb.push(t),yt.ib.splice(yt.ib.indexOf(t),1),t.fb=0,w&&t.unref(),$e(e)},Lb:function(){},ub:function(){yt.vb.forEach((t=>t()))},Kb:t=>new Promise((e=>{t.onmessage=n=>{var r=(n=n.data).cmd;if(t.fb&&(yt.yb=t.fb),n.targetThread&&n.targetThread!=qe()){var o=yt.hb[n.Wb];o?o.postMessage(n,n.transferList):D('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?ce(n.queue):"spawnThread"===r?dt(n):"cleanupThread"===r?pt(n.thread):"killThread"===r?(n=n.thread,r=yt.hb[n],delete yt.hb[n],ft(r),$e(n),yt.ib.splice(yt.ib.indexOf(r),1),r.fb=0):"cancelThread"===r?yt.hb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,w&&!t.fb&&t.unref(),e(t)):"print"===r?I("Thread "+n.threadId+": "+n.text):"printErr"===r?D("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"callHandler"===r?c[n.handler](...n.args):r&&D("worker sent an unknown command "+r);yt.yb=void 0},t.onerror=t=>{throw D("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])c.hasOwnProperty(n)&&r.push(n);t.postMessage({cmd:"load",handlers:r,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:C,wasmModule:R})})),Jb:function(t){t()},wb:function(){var t=T("ort-wasm-threaded.worker.js");t=new Worker(t),yt.lb.push(t)},Ab:function(){return 0==yt.lb.length&&(yt.wb(),yt.Kb(yt.lb[0])),yt.lb.pop()}};function bt(t){for(;0<t.length;)t.shift()(c)}function mt(t){if(_)return Pe(2,0,t);try{gt(t)}catch(t){t instanceof lt||"unwind"==t||b(1,t)}}c.PThread=yt,c.establishStackSpace=function(){var t=qe(),e=a()[t+52>>2>>>0];nn(e,e-(t=a()[t+56>>2>>>0])),on(e)};var vt=[];function wt(t){this.mb=t-24,this.Ib=function(t){s()[this.mb+4>>2>>>0]=t},this.Cb=function(t){s()[this.mb+8>>2>>>0]=t},this.Gb=function(){a()[this.mb>>2>>>0]=0},this.Bb=function(){e()[this.mb+12>>0>>>0]=0},this.Hb=function(){e()[this.mb+13>>0>>>0]=0},this.qb=function(t,e){this.zb(),this.Ib(t),this.Cb(e),this.Gb(),this.Bb(),this.Hb()},this.zb=function(){s()[this.mb+16>>2>>>0]=0}}function _t(t,e,n,r){return _?Pe(3,1,t,e,n,r):xt(t,e,n,r)}function xt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return D("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];return _&&0===o.length?_t(t,e,n,r):(t={Nb:n,fb:t,xb:r,Tb:o},_?(t.Ub="spawnThread",postMessage(t,o),0):dt(t))}function Tt(t,e,n){return _?Pe(4,1,t,e,n):0}function St(t,e){if(_)return Pe(5,1,t,e)}function At(t,e){if(_)return Pe(6,1,t,e)}function Ot(t,e,n){if(_)return Pe(7,1,t,e,n)}function Pt(t,e,n){return _?Pe(8,1,t,e,n):0}function Et(t,e){if(_)return Pe(9,1,t,e)}function It(t,e,n){if(_)return Pe(10,1,t,e,n)}function Dt(t,e,n,r){if(_)return Pe(11,1,t,e,n,r)}function kt(t,e,n,r){if(_)return Pe(12,1,t,e,n,r)}function Ct(t,e,n,r){if(_)return Pe(13,1,t,e,n,r)}function Rt(t){if(_)return Pe(14,1,t)}function Ft(t,e){if(_)return Pe(15,1,t,e)}function Mt(t,e,n){if(_)return Pe(16,1,t,e,n)}function Nt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}c.invokeEntryPoint=function(t,e){var n=vt[t];n||(t>=vt.length&&(vt.length=t+1),vt[t]=n=Z.get(t)),t=n(e),k?yt.tb(t):en(t)};var Lt=void 0;function jt(t){for(var e="";r()[t>>>0];)e+=Lt[r()[t++>>>0]];return e}var Ut={},Bt={},Vt={};function Gt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?"_"+t:t}function zt(t,e){return{[t=Gt(t)]:function(){return e.apply(this,arguments)}}[t]}function Wt(t){var e=Error,n=zt(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Ht=void 0;function qt(t){throw new Ht(t)}function Kt(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||qt('type "'+r+'" must have a positive integer typeid pointer'),Bt.hasOwnProperty(t)){if(n.Db)return;qt("Cannot register type '"+r+"' twice")}Bt[t]=e,delete Vt[t],Ut.hasOwnProperty(t)&&(e=Ut[t],delete Ut[t],e.forEach((t=>t())))}var Xt=[],Yt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Jt(t){4<t&&0==--Yt[t].rb&&(Yt[t]=void 0,Xt.push(t))}var Zt=t=>(t||qt("Cannot use deleted val. handle = "+t),Yt[t].value),Qt=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=Xt.length?Xt.pop():Yt.length;return Yt[e]={rb:1,value:t},e}};function $t(t){return this.fromWireType(a()[t>>2>>>0])}function te(t,e){switch(e){case 2:return function(t){var e=this.fromWireType;return C.buffer!=F.buffer&&Y(),e.call(this,B[t>>>2])};case 3:return function(t){return this.fromWireType(u()[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function ee(t,n,u){switch(n){case 0:return u?function(t){return e()[t>>>0]}:function(t){return r()[t>>>0]};case 1:return u?function(t){return o()[t>>>1]}:function(t){return i()[t>>>1]};case 2:return u?function(t){return a()[t>>>2]}:function(t){return s()[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var ne="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function re(t,e){for(var n=t>>1,a=n+e/2;!(n>=a)&&i()[n>>>0];)++n;if(32<(n<<=1)-t&&ne)return ne.decode(r().slice(t,n));for(n="",a=0;!(a>=e/2);++a){var s=o()[t+2*a>>1>>>0];if(0==s)break;n+=String.fromCharCode(s)}return n}function oe(t,e,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=e;n=(n-=2)<2*t.length?n/2:t.length;for(var i=0;i<n;++i){var a=t.charCodeAt(i);o()[e>>1>>>0]=a,e+=2}return o()[e>>1>>>0]=0,e-r}function ie(t){return 2*t.length}function ae(t,e){for(var n=0,r="";!(n>=e/4);){var o=a()[t+4*n>>2>>>0];if(0==o)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(o)}return r}function se(t,e,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=e>>>=0;n=r+n-4;for(var o=0;o<t.length;++o){var i=t.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++o)),a()[e>>2>>>0]=i,(e+=4)+4>n)break}return a()[e>>2>>>0]=0,e-r}function ue(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&++n,e+=4}return e}function ce(t){Atomics.store(a(),t>>2,1),qe()&&Qe(t),Atomics.compareExchange(a(),t>>2,1,0)}function le(t,e){var n=Bt[t];if(void 0===n){var r=jt(t=Ye(t));Xe(t),qt(e+" has unknown type "+r)}return n}c.executeNotifiedProxyingQueue=ce;var fe={};function pe(t){var e=fe[t];return void 0===e?jt(t):e}var de=[];function he(){return"object"==typeof globalThis?globalThis:Function("return this")()}var ge=[],ye={};function be(t){return s()[t>>>2]+4294967296*a()[t+4>>>2]}function me(t){return 0==t%4&&(0!=t%100||0==t%400)}var ve,we,_e=[0,31,60,91,121,152,182,213,244,274,305,335],xe=[0,31,59,90,120,151,181,212,243,273,304,334];function Te(t){return(me(t.getFullYear())?_e:xe)[t.getMonth()]+t.getDate()-1}function Se(t,e,n,r,o,i,a){return _?Pe(17,1,t,e,n,r,o,i,a):-52}function Ae(t,e,n,r,o,i){if(_)return Pe(18,1,t,e,n,r,o,i)}function Oe(t){var n=X(t)+1,r=Ke(n);return r&&q(t,e(),r,n),r}function Pe(t,e){var n=arguments.length-2,r=arguments;return function(t){var e=rn();return t=t(),on(e),t}((()=>{for(var o=an(8*n),i=o>>3,a=0;a<n;a++){var s=r[2+a];u()[i+a>>>0]=s}return Ze(t,n,o,e)}))}we=w?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.timeOrigin+performance.now();var Ee,Ie=[],De={};function ke(){if(!Ee){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(t in De)void 0===De[t]?delete e[t]:e[t]=De[t];var n=[];for(t in e)n.push(t+"="+e[t]);Ee=n}return Ee}function Ce(t,n){if(_)return Pe(19,1,t,n);var r=0;return ke().forEach((function(o,i){var a=n+r;for(i=s()[t+4*i>>2>>>0]=a,a=0;a<o.length;++a)e()[i++>>0>>>0]=o.charCodeAt(a);e()[i>>0>>>0]=0,r+=o.length+1})),0}function Re(t,e){if(_)return Pe(20,1,t,e);var n=ke();s()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),s()[e>>2>>>0]=r,0}function Fe(t){return _?Pe(21,1,t):52}function Me(t,e,n,r){return _?Pe(22,1,t,e,n,r):52}function Ne(t,e,n,r,o){return _?Pe(23,1,t,e,n,r,o):70}var Le=[null,[],[]];function je(t,e,n,o){if(_)return Pe(24,1,t,e,n,o);for(var i=0,a=0;a<n;a++){var u=s()[e>>2>>>0],c=s()[e+4>>2>>>0];e+=8;for(var l=0;l<c;l++){var f=r()[u+l>>>0],p=Le[t];0===f||10===f?((1===t?I:D)(W(p,0)),p.length=0):p.push(f)}i+=c}return s()[o>>2>>>0]=i,0}var Ue=[31,29,31,30,31,30,31,31,30,31,30,31],Be=[31,28,31,30,31,30,31,31,30,31,30,31];function Ve(t,n,r,o){function i(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function s(t,e){return i(t,e,"0")}function u(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.jb;for(t=new Date(new Date(t.kb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(me(t.getFullYear())?Ue:Be)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=c(new Date(t.getFullYear(),0,4)),n=c(n),0>=u(e,t)?0>=u(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[o+40>>2>>>0];for(var p in o={Rb:a()[o>>2>>>0],Qb:a()[o+4>>2>>>0],ob:a()[o+8>>2>>>0],sb:a()[o+12>>2>>>0],pb:a()[o+16>>2>>>0],kb:a()[o+20>>2>>>0],gb:a()[o+24>>2>>>0],jb:a()[o+28>>2>>>0],Yb:a()[o+32>>2>>>0],Pb:a()[o+36>>2>>>0],Sb:f?H(f):""},r=H(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return d[t.gb].substring(0,3)},"%A":function(t){return d[t.gb]},"%b":function(t){return h[t.pb].substring(0,3)},"%B":function(t){return h[t.pb]},"%C":function(t){return s((t.kb+1900)/100|0,2)},"%d":function(t){return s(t.sb,2)},"%e":function(t){return i(t.sb,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return s(t.ob,2)},"%I":function(t){return 0==(t=t.ob)?t=12:12<t&&(t-=12),s(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.pb-1;e+=(me(t.kb+1900)?Ue:Be)[n++]);return s(t.sb+e,3)},"%m":function(t){return s(t.pb+1,2)},"%M":function(t){return s(t.Qb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.ob&&12>t.ob?"AM":"PM"},"%S":function(t){return s(t.Rb,2)},"%t":function(){return"\t"},"%u":function(t){return t.gb||7},"%U":function(t){return s(Math.floor((t.jb+7-t.gb)/7),2)},"%V":function(t){var e=Math.floor((t.jb+7-(t.gb+6)%7)/7);if(2>=(t.gb+371-t.jb-2)%7&&e++,e)53==e&&(4==(n=(t.gb+371-t.jb)%7)||3==n&&me(t.kb)||(e=1));else{e=52;var n=(t.gb+7-t.jb-1)%7;(4==n||5==n&&me(t.kb%400-1))&&e++}return s(e,2)},"%w":function(t){return t.gb},"%W":function(t){return s(Math.floor((t.jb+7-(t.gb+6)%7)/7),2)},"%y":function(t){return(t.kb+1900).toString().substring(2)},"%Y":function(t){return t.kb+1900},"%z":function(t){var e=0<=(t=t.Pb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Sb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](o)));return p=function(t){var e=Array(X(t)+1);return q(t,e,0,e.length),e}(r=r.replace(/\0\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}yt.qb();for(var Ge=Array(256),ze=0;256>ze;++ze)Ge[ze]=String.fromCharCode(ze);Lt=Ge,Ht=c.BindingError=Wt("BindingError"),c.InternalError=Wt("InternalError"),c.count_emval_handles=function(){for(var t=0,e=5;e<Yt.length;++e)void 0!==Yt[e]&&++t;return t},c.get_first_emval=function(){for(var t=5;t<Yt.length;++t)if(void 0!==Yt[t])return Yt[t];return null};var We=[null,ht,mt,_t,Tt,St,At,Ot,Pt,Et,It,Dt,kt,Ct,Rt,Ft,Mt,Se,Ae,Ce,Re,Fe,Me,Ne,je],He={b:function(t,e,n){throw new wt(t).qb(e,n),t},pa:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},aa:function(t){Je(t,!v,1,!m),yt.ub()},C:function(t){_?postMessage({cmd:"cleanupThread",thread:t}):pt(t)},U:xt,v:Tt,ha:St,Q:At,S:Ot,L:Pt,fa:Et,Z:It,ea:Dt,E:kt,R:Ct,O:Rt,ga:Ft,P:Mt,K:function(){},ra:function(t,n,r,i,s){var u=Nt(r);Kt(t,{name:n=jt(n),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:s},argPackAdvance:8,readValueFromPointer:function(t){if(1===r)var i=e();else if(2===r)i=o();else{if(4!==r)throw new TypeError("Unknown boolean type size: "+n);i=a()}return this.fromWireType(i[t>>>u])},nb:null})},qa:function(t,e){Kt(t,{name:e=jt(e),fromWireType:function(t){var e=Zt(t);return Jt(t),e},toWireType:function(t,e){return Qt(e)},argPackAdvance:8,readValueFromPointer:$t,nb:null})},G:function(t,e,n){n=Nt(n),Kt(t,{name:e=jt(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:te(e,n),nb:null})},q:function(t,e,n,r,o){e=jt(e),-1===o&&(o=4294967295),o=Nt(n);var i=t=>t;if(0===r){var a=32-8*n;i=t=>t<<a>>>a}n=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},Kt(t,{name:e,fromWireType:i,toWireType:n,argPackAdvance:8,readValueFromPointer:ee(e,o,0!==r),nb:null})},n:function(t,e,n){function r(t){t>>=2;var e=s();return new o(e.buffer,e[t+1>>>0],e[t>>>0])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];Kt(t,{name:n=jt(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Db:!0})},H:function(t,e){var n="std::string"===(e=jt(e));Kt(t,{name:e,fromWireType:function(t){var e=s()[t>>2>>>0],o=t+4;if(n)for(var i=o,a=0;a<=e;++a){var u=o+a;if(a==e||0==r()[u>>>0]){if(i=H(i,u-i),void 0===c)var c=i;else c+=String.fromCharCode(0),c+=i;i=u+1}}else{for(c=Array(e),a=0;a<e;++a)c[a]=String.fromCharCode(r()[o+a>>>0]);c=c.join("")}return Xe(t),c},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var o,i="string"==typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||qt("Cannot pass non-string to std::string"),o=n&&i?X(e):e.length;var a=Ke(4+o+1),u=a+4>>>0;if(s()[a>>2>>>0]=o,n&&i)K(e,u,o+1);else if(i)for(i=0;i<o;++i){var c=e.charCodeAt(i);255<c&&(Xe(u),qt("String has UTF-16 code units that do not fit in 8 bits")),r()[u+i>>>0]=c}else for(i=0;i<o;++i)r()[u+i>>>0]=e[i];return null!==t&&t.push(Xe,a),a},argPackAdvance:8,readValueFromPointer:$t,nb:function(t){Xe(t)}})},x:function(t,e,n){if(n=jt(n),2===e)var r=re,o=oe,a=ie,u=()=>i(),c=1;else 4===e&&(r=ae,o=se,a=ue,u=()=>s(),c=2);Kt(t,{name:n,fromWireType:function(t){for(var n,o=s()[t>>>2],i=u(),a=t+4,l=0;l<=o;++l){var f=t+4+l*e;l!=o&&0!=i[f>>>c]||(a=r(a,f-a),void 0===n?n=a:(n+=String.fromCharCode(0),n+=a),a=f+e)}return Xe(t),n},toWireType:function(t,r){"string"!=typeof r&&qt("Cannot pass non-string to C++ string type "+n);var i=a(r),u=Ke(4+i+e);return u>>>=0,s()[u>>>2]=i>>c,o(r,u+4,i+e),null!==t&&t.push(Xe,u),u},argPackAdvance:8,readValueFromPointer:$t,nb:function(t){Xe(t)}})},sa:function(t,e){Kt(t,{Fb:!0,name:e=jt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},V:function(){return 1048576},ka:function(){return!0},W:function(t,e,n,r){t==e?setTimeout((()=>ce(r))):_?postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r}):(t=yt.hb[t])&&t.postMessage({cmd:"processProxyingQueue",queue:r})},$:function(){return-1},s:function(t,e,n){t=Zt(t),e=le(e,"emval::as");var r=[],o=Qt(r);return s()[n>>2>>>0]=o,e.toWireType(r,t)},j:function(t,e,n,r,o){t=de[t],e=Zt(e),n=pe(n);var i=[];return s()[r>>2>>>0]=Qt(i),t(e,n,i,o)},z:function(t,e,n,r){(t=de[t])(e=Zt(e),n=pe(n),null,r)},c:Jt,I:function(t,e){return(t=Zt(t))==Zt(e)},r:function(t){return 0===t?Qt(he()):(t=pe(t),Qt(he()[t]))},i:function(t,e){var n=function(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=le(s()[e+4*r>>2>>>0],"parameter "+r);return n}(t,e),r=n[0];e=r.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$";var o=ge[e];if(void 0!==o)return o;o=["retType"];for(var i=[r],a="",u=0;u<t-1;++u)a+=(0!==u?", ":"")+"arg"+u,o.push("argType"+u),i.push(n[1+u]);var c="return function "+Gt("methodCaller_"+e)+"(handle, name, destructors, args) {\n",l=0;for(u=0;u<t-1;++u)c+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(l?"+"+l:"")+");\n",l+=n[u+1].argPackAdvance;for(c+="    var rv = handle[name]("+a+");\n",u=0;u<t-1;++u)n[u+1].deleteObject&&(c+="    argType"+u+".deleteObject(arg"+u+");\n");return r.Fb||(c+="    return retType.toWireType(destructors, rv);\n"),o.push(c+"};\n"),t=function(t){var e=Function;if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=zt(e.name||"unknownFunctionName",(function(){}));return n.prototype=e.prototype,n=new n,(t=e.apply(n,t))instanceof Object?t:n}(o).apply(null,i),o=function(t){var e=de.length;return de.push(t),e}(t),ge[e]=o},t:function(t,e){return t=Zt(t),e=Zt(e),Qt(t[e])},d:function(t){4<t&&(Yt[t].rb+=1)},y:function(t,e,n,r){t=Zt(t);var o=ye[e];return o||(o=function(t){for(var e="",n=0;n<t;++n)e+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<t;++n)r+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",r+"var obj = new constructor("+e+");\nreturn valueToHandle(obj);\n}\n")(le,c,Qt,(()=>s()))}(e),ye[e]=o),o(t,n,r)},ta:function(){return Qt([])},l:function(t){t=Zt(t);for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return Qt(e)},e:function(t){return Qt(pe(t))},k:function(){return Qt({})},h:function(t){for(var e=Zt(t);e.length;){var n=e.pop();e.pop()(n)}Jt(t)},f:function(t,e,n){t=Zt(t),e=Zt(e),n=Zt(n),t[e]=n},g:function(t,e){return t=(t=le(t,"_emval_take_value")).readValueFromPointer(e),Qt(t)},la:function(t,e){t=new Date(1e3*be(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},ma:function(t,e){t=new Date(1e3*be(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=0|Te(t);a()[e+28>>2>>>0]=n,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var r=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n)),a()[e+32>>2>>>0]=t},na:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),i=new Date(e.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=i&&s==r):0<n!=(s==r)&&(o=Math.max(i,o),e.setTime(e.getTime()+6e4*((0<n?s:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=0|Te(e),a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),a()[t+20>>2>>>0]=e.getYear(),e.getTime()/1e3|0},X:Se,Y:Ae,oa:function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var o=(new Date).getFullYear(),i=new Date(o,0,1),u=new Date(o,6,1);o=i.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(o,c);s()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=c),t=r(i),e=r(u),t=Oe(t),e=Oe(e),c<o?(s()[n>>2>>>0]=t,s()[n+4>>2>>>0]=e):(s()[n>>2>>>0]=e,s()[n+4>>2>>>0]=t)},m:function(){at("")},ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},D:function(){if(!w&&!v){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ve||(ve={}),ve[t]||(ve[t]=1,w&&(t="warning: "+t),D(t))}},F:function(){return Date.now()},N:function(){return 4294901760},p:we,da:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},u:function(){return w?n(3993).cpus().length:navigator.hardwareConcurrency},_:function(t,e,n){Ie.length=e,n>>=3;for(var r=0;r<e;r++)Ie[r]=u()[n+r>>>0];return We[t].apply(null,Ie)},M:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296);var i=Math,a=i.min;o=Math.max(t,o),o+=(65536-o%65536)%65536;t:{var s=C.buffer;try{C.grow(a.call(i,4294901760,o)-s.byteLength+65535>>>16),Y();var u=1;break t}catch(t){}u=void 0}if(u)return!0}return!1},ja:function(){throw"unwind"},ba:Ce,ca:Re,T:gt,w:Fe,B:Me,J:Ne,A:je,a:C||c.wasmMemory,ia:Ve,o:function(t,e,n,r){return Ve(t,e,n,r)}};!function(){function t(t,e){return t=t.exports,c.asm=t,yt.vb.push(c.asm.Ta),Z=c.asm.Ya,$.unshift(c.asm.va),R=e,yt.Jb((()=>{if(rt--,c.monitorRunDependencies&&c.monitorRunDependencies(rt),0==rt&&(null!==ot&&(clearInterval(ot),ot=null),it)){var t=it;it=null,t()}})),t}var e={a:He};if(rt++,c.monitorRunDependencies&&c.monitorRunDependencies(rt),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(t){D("Module.instantiateWasm callback failed with error: "+t),f(t)}(function(t,e){var n=nt;return E||"function"!=typeof WebAssembly.instantiateStreaming||st(n)||n.startsWith("file://")||w||"function"!=typeof fetch?ct(n,t,e):fetch(n,{credentials:"same-origin"}).then((function(r){return WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return D("wasm streaming compile failed: "+r),D("falling back to ArrayBuffer instantiation"),ct(n,t,e)}))}))})(e,(function(e){t(e.instance,e.module)})).catch(f)}(),c._OrtInit=function(){return(c._OrtInit=c.asm.wa).apply(null,arguments)},c._OrtCreateSessionOptions=function(){return(c._OrtCreateSessionOptions=c.asm.xa).apply(null,arguments)},c._OrtAppendExecutionProvider=function(){return(c._OrtAppendExecutionProvider=c.asm.ya).apply(null,arguments)},c._OrtAddSessionConfigEntry=function(){return(c._OrtAddSessionConfigEntry=c.asm.za).apply(null,arguments)},c._OrtReleaseSessionOptions=function(){return(c._OrtReleaseSessionOptions=c.asm.Aa).apply(null,arguments)},c._OrtCreateSession=function(){return(c._OrtCreateSession=c.asm.Ba).apply(null,arguments)},c._OrtReleaseSession=function(){return(c._OrtReleaseSession=c.asm.Ca).apply(null,arguments)},c._OrtGetInputCount=function(){return(c._OrtGetInputCount=c.asm.Da).apply(null,arguments)},c._OrtGetOutputCount=function(){return(c._OrtGetOutputCount=c.asm.Ea).apply(null,arguments)},c._OrtGetInputName=function(){return(c._OrtGetInputName=c.asm.Fa).apply(null,arguments)},c._OrtGetOutputName=function(){return(c._OrtGetOutputName=c.asm.Ga).apply(null,arguments)},c._OrtFree=function(){return(c._OrtFree=c.asm.Ha).apply(null,arguments)},c._OrtCreateTensor=function(){return(c._OrtCreateTensor=c.asm.Ia).apply(null,arguments)},c._OrtGetTensorData=function(){return(c._OrtGetTensorData=c.asm.Ja).apply(null,arguments)},c._OrtReleaseTensor=function(){return(c._OrtReleaseTensor=c.asm.Ka).apply(null,arguments)},c._OrtCreateRunOptions=function(){return(c._OrtCreateRunOptions=c.asm.La).apply(null,arguments)},c._OrtAddRunConfigEntry=function(){return(c._OrtAddRunConfigEntry=c.asm.Ma).apply(null,arguments)},c._OrtReleaseRunOptions=function(){return(c._OrtReleaseRunOptions=c.asm.Na).apply(null,arguments)},c._OrtRun=function(){return(c._OrtRun=c.asm.Oa).apply(null,arguments)},c._OrtEndProfiling=function(){return(c._OrtEndProfiling=c.asm.Pa).apply(null,arguments)};var qe=c._pthread_self=function(){return(qe=c._pthread_self=c.asm.Qa).apply(null,arguments)},Ke=c._malloc=function(){return(Ke=c._malloc=c.asm.Ra).apply(null,arguments)},Xe=c._free=function(){return(Xe=c._free=c.asm.Sa).apply(null,arguments)};c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm.Ta).apply(null,arguments)};var Ye=c.___getTypeName=function(){return(Ye=c.___getTypeName=c.asm.Ua).apply(null,arguments)};c.__embind_initialize_bindings=function(){return(c.__embind_initialize_bindings=c.asm.Va).apply(null,arguments)};var Je=c.__emscripten_thread_init=function(){return(Je=c.__emscripten_thread_init=c.asm.Wa).apply(null,arguments)};function Ze(){return(Ze=c.asm.Za).apply(null,arguments)}c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm.Xa).apply(null,arguments)};var Qe=c.__emscripten_proxy_execute_task_queue=function(){return(Qe=c.__emscripten_proxy_execute_task_queue=c.asm._a).apply(null,arguments)};function $e(){return($e=c.asm.$a).apply(null,arguments)}var tn,en=c.__emscripten_thread_exit=function(){return(en=c.__emscripten_thread_exit=c.asm.ab).apply(null,arguments)};function nn(){return(nn=c.asm.bb).apply(null,arguments)}function rn(){return(rn=c.asm.cb).apply(null,arguments)}function on(){return(on=c.asm.db).apply(null,arguments)}function an(){return(an=c.asm.eb).apply(null,arguments)}function sn(){function t(){if(!tn&&(tn=!0,c.calledRun=!0,!G)&&(_||bt($),l(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!_)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var t=c.postRun.shift();tt.unshift(t)}bt(tt)}}if(!(0<rt))if(_)l(c),_||bt($),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)et();bt(Q),0<rt||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}}if(c.UTF8ToString=H,c.stringToUTF8=K,c.lengthBytesUTF8=X,c.keepRuntimeAlive=function(){return k},c.wasmMemory=C,c.stackAlloc=an,c.stackSave=rn,c.stackRestore=on,c.ExitStatus=lt,c.PThread=yt,it=function t(){tn||sn(),tn||(it=t)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return sn(),t.ready});t.exports=r},932:function(t,e,n){var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t={}){var e,r,o;e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,o=e}));var i,a,s,u=Object.assign({},e),c="./this.program",l="object"==typeof window,f="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(p){var h=n(1384),g=n(908);d=f?g.dirname(d)+"/":"//",i=(t,e)=>(t=t.startsWith("file://")?new URL(t):g.normalize(t),h.readFileSync(t,e?void 0:"utf8")),s=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),a=(t,e,n)=>{t=t.startsWith("file://")?new URL(t):g.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){throw t})),15>process.versions.node.split(".")[0]&&process.on("unhandledRejection",(function(t){throw t})),e.inspect=function(){return"[Emscripten Module object]"}}else(l||f)&&(f?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},f&&(s=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),a=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var y,b=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);Object.assign(e,u),u=null,e.thisProgram&&(c=e.thisProgram),e.wasmBinary&&(y=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&W("no native wasm support detected");var v,w,_,x,T,S,A,O,P,E=!1,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&I)return I.decode(t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var i=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|i);else{var a=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|i<<6|a:(7&o)<<18|i<<12|a<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function k(t,e){return(t>>>=0)?D(_,t,e):""}function C(t,e,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var a=t.charCodeAt(i);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),127>=a){if(n>=r)break;e[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;e[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;e[n++>>>0]=224|a>>12}else{if(n+3>=r)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63}e[n++>>>0]=128|a>>6&63}e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-o}function R(t,e,n){return C(t,_,e,n)}function F(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function M(){var t=v.buffer;e.HEAP8=w=new Int8Array(t),e.HEAP16=x=new Int16Array(t),e.HEAP32=S=new Int32Array(t),e.HEAPU8=_=new Uint8Array(t),e.HEAPU16=T=new Uint16Array(t),e.HEAPU32=A=new Uint32Array(t),e.HEAPF32=O=new Float32Array(t),e.HEAPF64=P=new Float64Array(t)}var N=[],L=[],j=[];function U(){var t=e.preRun.shift();N.unshift(t)}var B,V=0,G=null,z=null;function W(t){throw e.onAbort&&e.onAbort(t),m(t="Aborted("+t+")"),E=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),o(t),t}function H(t){return t.startsWith("data:application/octet-stream;base64,")}if(!H(B="ort-wasm.wasm")){var q=B;B=e.locateFile?e.locateFile(q,d):d+q}function K(t){try{if(t==B&&y)return new Uint8Array(y);if(s)return s(t);throw"both async and sync fetching of the wasm failed"}catch(t){W(t)}}function X(t,e,n){return function(t){if(!y&&(l||f)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((function(){return K(t)}));if(a)return new Promise((function(e,n){a(t,(function(t){e(new Uint8Array(t))}),n)}))}return Promise.resolve().then((function(){return K(t)}))}(t).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(t){return t})).then(n,(function(t){m("failed to asynchronously prepare wasm: "+t),W(t)}))}function Y(t){for(;0<t.length;)t.shift()(e)}function J(t){this.Pa=t-24,this.ab=function(t){A[this.Pa+4>>2>>>0]=t},this.Ya=function(t){A[this.Pa+8>>2>>>0]=t},this.Za=function(){S[this.Pa>>2>>>0]=0},this.Xa=function(){w[this.Pa+12>>0>>>0]=0},this.$a=function(){w[this.Pa+13>>0>>>0]=0},this.Va=function(t,e){this.Wa(),this.ab(t),this.Ya(e),this.Za(),this.Xa(),this.$a()},this.Wa=function(){A[this.Pa+16>>2>>>0]=0}}function Z(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Q=void 0;function $(t){for(var e="";_[t>>>0];)e+=Q[_[t++>>>0]];return e}var tt={},et={},nt={};function rt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?"_"+t:t}function ot(t,e){return{[t=rt(t)]:function(){return e.apply(this,arguments)}}[t]}function it(t){var e=Error,n=ot(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var at=void 0;function st(t){throw new at(t)}function ut(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||st('type "'+r+'" must have a positive integer typeid pointer'),et.hasOwnProperty(t)){if(n.bb)return;st("Cannot register type '"+r+"' twice")}et[t]=e,delete nt[t],tt.hasOwnProperty(t)&&(e=tt[t],delete tt[t],e.forEach((t=>t())))}var ct=[],lt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ft(t){4<t&&0==--lt[t].Ta&&(lt[t]=void 0,ct.push(t))}var pt=t=>(t||st("Cannot use deleted val. handle = "+t),lt[t].value),dt=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=ct.length?ct.pop():lt.length;return lt[e]={Ta:1,value:t},e}};function ht(t){return this.fromWireType(S[t>>2>>>0])}function gt(t,e){switch(e){case 2:return function(t){return this.fromWireType(O[t>>>2])};case 3:return function(t){return this.fromWireType(P[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function yt(t,e,n){switch(e){case 0:return n?function(t){return w[t>>>0]}:function(t){return _[t>>>0]};case 1:return n?function(t){return x[t>>>1]}:function(t){return T[t>>>1]};case 2:return n?function(t){return S[t>>>2]}:function(t){return A[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var bt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function mt(t,e){for(var n=t>>1,r=n+e/2;!(n>=r)&&T[n>>>0];)++n;if(32<(n<<=1)-t&&bt)return bt.decode(_.subarray(t>>>0,n>>>0));for(n="",r=0;!(r>=e/2);++r){var o=x[t+2*r>>1>>>0];if(0==o)break;n+=String.fromCharCode(o)}return n}function vt(t,e,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=e;n=(n-=2)<2*t.length?n/2:t.length;for(var o=0;o<n;++o)x[e>>1>>>0]=t.charCodeAt(o),e+=2;return x[e>>1>>>0]=0,e-r}function wt(t){return 2*t.length}function _t(t,e){for(var n=0,r="";!(n>=e/4);){var o=S[t+4*n>>2>>>0];if(0==o)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(o)}return r}function xt(t,e,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=e>>>=0;n=r+n-4;for(var o=0;o<t.length;++o){var i=t.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++o)),S[e>>2>>>0]=i,(e+=4)+4>n)break}return S[e>>2>>>0]=0,e-r}function Tt(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&++n,e+=4}return e}function St(t,e){var n=et[t];if(void 0===n){var r=$(t=Jt(t));Yt(t),st(e+" has unknown type "+r)}return n}var At={};function Ot(t){var e=At[t];return void 0===e?$(t):e}var Pt=[];function Et(){return"object"==typeof globalThis?globalThis:Function("return this")()}var It=[],Dt={};function kt(t){return 0==t%4&&(0!=t%100||0==t%400)}var Ct,Rt=[0,31,60,91,121,152,182,213,244,274,305,335],Ft=[0,31,59,90,120,151,181,212,243,273,304,334];function Mt(t){return(kt(t.getFullYear())?Rt:Ft)[t.getMonth()]+t.getDate()-1}function Nt(t){var e=F(t)+1,n=Xt(e);return n&&C(t,w,n,e),n}Ct=p?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var Lt={};function jt(){if(!Ut){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(t in Lt)void 0===Lt[t]?delete e[t]:e[t]=Lt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Ut=n}return Ut}var Ut,Bt=[null,[],[]],Vt=[31,29,31,30,31,30,31,31,30,31,30,31],Gt=[31,28,31,30,31,30,31,31,30,31,30,31];function zt(t,e,n,r){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return o(t,e,"0")}function a(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.Na;for(t=new Date(new Date(t.Oa+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(kt(t.getFullYear())?Vt:Gt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=a(e,t)?0>=a(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=S[r+40>>2>>>0];for(var l in r={gb:S[r>>2>>>0],fb:S[r+4>>2>>>0],Ra:S[r+8>>2>>>0],Ua:S[r+12>>2>>>0],Sa:S[r+16>>2>>>0],Oa:S[r+20>>2>>>0],Ja:S[r+24>>2>>>0],Na:S[r+28>>2>>>0],ib:S[r+32>>2>>>0],eb:S[r+36>>2>>>0],hb:c?k(c):""},n=k(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(t){return f[t.Ja].substring(0,3)},"%A":function(t){return f[t.Ja]},"%b":function(t){return p[t.Sa].substring(0,3)},"%B":function(t){return p[t.Sa]},"%C":function(t){return i((t.Oa+1900)/100|0,2)},"%d":function(t){return i(t.Ua,2)},"%e":function(t){return o(t.Ua,2," ")},"%g":function(t){return u(t).toString().substring(2)},"%G":function(t){return u(t)},"%H":function(t){return i(t.Ra,2)},"%I":function(t){return 0==(t=t.Ra)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Sa-1;e+=(kt(t.Oa+1900)?Vt:Gt)[n++]);return i(t.Ua+e,3)},"%m":function(t){return i(t.Sa+1,2)},"%M":function(t){return i(t.fb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Ra&&12>t.Ra?"AM":"PM"},"%S":function(t){return i(t.gb,2)},"%t":function(){return"\t"},"%u":function(t){return t.Ja||7},"%U":function(t){return i(Math.floor((t.Na+7-t.Ja)/7),2)},"%V":function(t){var e=Math.floor((t.Na+7-(t.Ja+6)%7)/7);if(2>=(t.Ja+371-t.Na-2)%7&&e++,e)53==e&&(4==(n=(t.Ja+371-t.Na)%7)||3==n&&kt(t.Oa)||(e=1));else{e=52;var n=(t.Ja+7-t.Na-1)%7;(4==n||5==n&&kt(t.Oa%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ja},"%W":function(t){return i(Math.floor((t.Na+7-(t.Ja+6)%7)/7),2)},"%y":function(t){return(t.Oa+1900).toString().substring(2)},"%Y":function(t){return t.Oa+1900},"%z":function(t){var e=0<=(t=t.eb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.hb},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(t){var e=Array(F(t)+1);return C(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),l.length>e?0:(w.set(l,t>>>0),l.length-1)}for(var Wt=Array(256),Ht=0;256>Ht;++Ht)Wt[Ht]=String.fromCharCode(Ht);Q=Wt,at=e.BindingError=it("BindingError"),e.InternalError=it("InternalError"),e.count_emval_handles=function(){for(var t=0,e=5;e<lt.length;++e)void 0!==lt[e]&&++t;return t},e.get_first_emval=function(){for(var t=5;t<lt.length;++t)if(void 0!==lt[t])return lt[t];return null};var qt={a:function(t,e,n){throw new J(t).Va(e,n),t},ca:function(){W("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},r:function(){return 0},Y:function(){},M:function(){},O:function(){},H:function(){return 0},W:function(){},R:function(){},V:function(){},z:function(){},N:function(){},K:function(){},X:function(){},L:function(){},G:function(){},fa:function(t,e,n,r,o){var i=Z(n);ut(t,{name:e=$(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:o},argPackAdvance:8,readValueFromPointer:function(t){if(1===n)var r=w;else if(2===n)r=x;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=S}return this.fromWireType(r[t>>>i])},Qa:null})},ea:function(t,e){ut(t,{name:e=$(e),fromWireType:function(t){var e=pt(t);return ft(t),e},toWireType:function(t,e){return dt(e)},argPackAdvance:8,readValueFromPointer:ht,Qa:null})},B:function(t,e,n){n=Z(n),ut(t,{name:e=$(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:gt(e,n),Qa:null})},o:function(t,e,n,r,o){e=$(e),-1===o&&(o=4294967295),o=Z(n);var i=t=>t;if(0===r){var a=32-8*n;i=t=>t<<a>>>a}n=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},ut(t,{name:e,fromWireType:i,toWireType:n,argPackAdvance:8,readValueFromPointer:yt(e,o,0!==r),Qa:null})},l:function(t,e,n){function r(t){t>>=2;var e=A;return new o(e.buffer,e[t+1>>>0],e[t>>>0])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];ut(t,{name:n=$(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{bb:!0})},C:function(t,e){var n="std::string"===(e=$(e));ut(t,{name:e,fromWireType:function(t){var e=A[t>>2>>>0],r=t+4;if(n)for(var o=r,i=0;i<=e;++i){var a=r+i;if(i==e||0==_[a>>>0]){if(o=k(o,a-o),void 0===s)var s=o;else s+=String.fromCharCode(0),s+=o;o=a+1}}else{for(s=Array(e),i=0;i<e;++i)s[i]=String.fromCharCode(_[r+i>>>0]);s=s.join("")}return Yt(t),s},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r,o="string"==typeof e;o||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||st("Cannot pass non-string to std::string"),r=n&&o?F(e):e.length;var i=Xt(4+r+1),a=i+4>>>0;if(A[i>>2>>>0]=r,n&&o)R(e,a,r+1);else if(o)for(o=0;o<r;++o){var s=e.charCodeAt(o);255<s&&(Yt(a),st("String has UTF-16 code units that do not fit in 8 bits")),_[a+o>>>0]=s}else for(o=0;o<r;++o)_[a+o>>>0]=e[o];return null!==t&&t.push(Yt,i),i},argPackAdvance:8,readValueFromPointer:ht,Qa:function(t){Yt(t)}})},t:function(t,e,n){if(n=$(n),2===e)var r=mt,o=vt,i=wt,a=()=>T,s=1;else 4===e&&(r=_t,o=xt,i=Tt,a=()=>A,s=2);ut(t,{name:n,fromWireType:function(t){for(var n,o=A[t>>>2],i=a(),u=t+4,c=0;c<=o;++c){var l=t+4+c*e;c!=o&&0!=i[l>>>s]||(u=r(u,l-u),void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),u=l+e)}return Yt(t),n},toWireType:function(t,r){"string"!=typeof r&&st("Cannot pass non-string to C++ string type "+n);var a=i(r),u=Xt(4+a+e);return A[(u>>>=0)>>>2]=a>>s,o(r,u+4,a+e),null!==t&&t.push(Yt,u),u},argPackAdvance:8,readValueFromPointer:ht,Qa:function(t){Yt(t)}})},ga:function(t,e){ut(t,{cb:!0,name:e=$(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},Z:function(){return!0},p:function(t,e,n){t=pt(t),e=St(e,"emval::as");var r=[],o=dt(r);return A[n>>2>>>0]=o,e.toWireType(r,t)},i:function(t,e,n,r,o){t=Pt[t],e=pt(e),n=Ot(n);var i=[];return A[r>>2>>>0]=dt(i),t(e,n,i,o)},u:function(t,e,n,r){(t=Pt[t])(e=pt(e),n=Ot(n),null,r)},b:ft,E:function(t,e){return(t=pt(t))==pt(e)},w:function(t){return 0===t?dt(Et()):(t=Ot(t),dt(Et()[t]))},h:function(t,e){var n=function(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=St(A[e+4*r>>2>>>0],"parameter "+r);return n}(t,e),r=n[0];e=r.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$";var o=It[e];if(void 0!==o)return o;o=["retType"];for(var i=[r],a="",s=0;s<t-1;++s)a+=(0!==s?", ":"")+"arg"+s,o.push("argType"+s),i.push(n[1+s]);var u="return function "+rt("methodCaller_"+e)+"(handle, name, destructors, args) {\n",c=0;for(s=0;s<t-1;++s)u+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=n[s+1].argPackAdvance;for(u+="    var rv = handle[name]("+a+");\n",s=0;s<t-1;++s)n[s+1].deleteObject&&(u+="    argType"+s+".deleteObject(arg"+s+");\n");return r.cb||(u+="    return retType.toWireType(destructors, rv);\n"),o.push(u+"};\n"),t=function(t){var e=Function;if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=ot(e.name||"unknownFunctionName",(function(){}));return n.prototype=e.prototype,n=new n,(t=e.apply(n,t))instanceof Object?t:n}(o).apply(null,i),o=function(t){var e=Pt.length;return Pt.push(t),e}(t),It[e]=o},v:function(t,e){return t=pt(t),e=pt(e),dt(t[e])},c:function(t){4<t&&(lt[t].Ta+=1)},ia:function(t,n,r,o){t=pt(t);var i=Dt[n];return i||(i=function(t){for(var n="",r=0;r<t;++r)n+=(0!==r?", ":"")+"arg"+r;var o="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(r=0;r<t;++r)o+="var argType"+r+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+r+"');\nvar arg"+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",o+"var obj = new constructor("+n+");\nreturn valueToHandle(obj);\n}\n")(St,e,dt,(()=>A))}(n),Dt[n]=i),i(t,r,o)},D:function(){return dt([])},k:function(t){t=pt(t);for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return dt(e)},d:function(t){return dt(Ot(t))},j:function(){return dt({})},g:function(t){for(var e=pt(t);e.length;){var n=e.pop();e.pop()(n)}ft(t)},e:function(t,e,n){t=pt(t),e=pt(e),n=pt(n),t[e]=n},f:function(t,e){return t=(t=St(t,"_emval_take_value")).readValueFromPointer(e),dt(t)},_:function(t,e){t=new Date(1e3*(A[t>>>2]+4294967296*S[t+4>>>2])),S[e>>2>>>0]=t.getUTCSeconds(),S[e+4>>2>>>0]=t.getUTCMinutes(),S[e+8>>2>>>0]=t.getUTCHours(),S[e+12>>2>>>0]=t.getUTCDate(),S[e+16>>2>>>0]=t.getUTCMonth(),S[e+20>>2>>>0]=t.getUTCFullYear()-1900,S[e+24>>2>>>0]=t.getUTCDay(),S[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},$:function(t,e){t=new Date(1e3*(A[t>>>2]+4294967296*S[t+4>>>2])),S[e>>2>>>0]=t.getSeconds(),S[e+4>>2>>>0]=t.getMinutes(),S[e+8>>2>>>0]=t.getHours(),S[e+12>>2>>>0]=t.getDate(),S[e+16>>2>>>0]=t.getMonth(),S[e+20>>2>>>0]=t.getFullYear()-1900,S[e+24>>2>>>0]=t.getDay(),S[e+28>>2>>>0]=0|Mt(t),S[e+36>>2>>>0]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset(),r=new Date(t.getFullYear(),0,1).getTimezoneOffset();S[e+32>>2>>>0]=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n))},aa:function(t){var e=new Date(S[t+20>>2>>>0]+1900,S[t+16>>2>>>0],S[t+12>>2>>>0],S[t+8>>2>>>0],S[t+4>>2>>>0],S[t>>2>>>0],0),n=S[t+32>>2>>>0],r=e.getTimezoneOffset(),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),i=new Date(e.getFullYear(),0,1).getTimezoneOffset(),a=Math.min(i,o);return 0>n?S[t+32>>2>>>0]=Number(o!=i&&a==r):0<n!=(a==r)&&(o=Math.max(i,o),e.setTime(e.getTime()+6e4*((0<n?a:o)-r))),S[t+24>>2>>>0]=e.getDay(),S[t+28>>2>>>0]=0|Mt(e),S[t>>2>>>0]=e.getSeconds(),S[t+4>>2>>>0]=e.getMinutes(),S[t+8>>2>>>0]=e.getHours(),S[t+12>>2>>>0]=e.getDate(),S[t+16>>2>>>0]=e.getMonth(),S[t+20>>2>>>0]=e.getYear(),e.getTime()/1e3|0},P:function(){return-52},Q:function(){},ba:function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var o=(new Date).getFullYear(),i=new Date(o,0,1),a=new Date(o,6,1);o=i.getTimezoneOffset();var s=a.getTimezoneOffset();A[t>>2>>>0]=60*Math.max(o,s),S[e>>2>>>0]=Number(o!=s),t=r(i),e=r(a),t=Nt(t),e=Nt(e),s<o?(A[n>>2>>>0]=t,A[n+4>>2>>>0]=e):(A[n>>2>>>0]=e,A[n+4>>2>>>0]=t)},q:function(){W("")},ha:function(){W("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},A:function(){return Date.now()},J:function(){return 4294901760},n:Ct,U:function(t,e,n){_.copyWithin(t>>>0,e>>>0,e+n>>>0)},I:function(t){var e=_.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var o=Math,i=o.min;r=Math.max(t,r),r+=(65536-r%65536)%65536;t:{var a=v.buffer;try{v.grow(i.call(o,4294901760,r)-a.byteLength+65535>>>16),M();var s=1;break t}catch(t){}s=void 0}if(s)return!0}return!1},S:function(t,e){var n=0;return jt().forEach((function(r,o){var i=e+n;for(o=A[t+4*o>>2>>>0]=i,i=0;i<r.length;++i)w[o++>>0>>>0]=r.charCodeAt(i);w[o>>0>>>0]=0,n+=r.length+1})),0},T:function(t,e){var n=jt();A[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),A[e>>2>>>0]=r,0},s:function(){return 52},y:function(){return 52},F:function(){return 70},x:function(t,e,n,r){for(var o=0,i=0;i<n;i++){var a=A[e>>2>>>0],s=A[e+4>>2>>>0];e+=8;for(var u=0;u<s;u++){var c=_[a+u>>>0],l=Bt[t];0===c||10===c?((1===t?b:m)(D(l,0)),l.length=0):l.push(c)}o+=s}return A[r>>2>>>0]=o,0},da:zt,m:function(t,e,n,r){return zt(t,e,n,r)}};!function(){function t(t){if(t=t.exports,e.asm=t,v=e.asm.ja,M(),L.unshift(e.asm.ka),V--,e.monitorRunDependencies&&e.monitorRunDependencies(V),0==V&&(null!==G&&(clearInterval(G),G=null),z)){var n=z;z=null,n()}return t}var n={a:qt};if(V++,e.monitorRunDependencies&&e.monitorRunDependencies(V),e.instantiateWasm)try{return e.instantiateWasm(n,t)}catch(t){m("Module.instantiateWasm callback failed with error: "+t),o(t)}(function(t,e){var n=B;return y||"function"!=typeof WebAssembly.instantiateStreaming||H(n)||n.startsWith("file://")||p||"function"!=typeof fetch?X(n,t,e):fetch(n,{credentials:"same-origin"}).then((function(r){return WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return m("wasm streaming compile failed: "+r),m("falling back to ArrayBuffer instantiation"),X(n,t,e)}))}))})(n,(function(e){t(e.instance)})).catch(o)}(),e._OrtInit=function(){return(e._OrtInit=e.asm.la).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.ma).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.na).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.oa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.pa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.qa).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.ra).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.sa).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.ta).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.ua).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.va).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.wa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.xa).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.ya).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm.za).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.Aa).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.Ba).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.Ca).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.Da).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.Ea).apply(null,arguments)};var Kt,Xt=e._malloc=function(){return(Xt=e._malloc=e.asm.Fa).apply(null,arguments)},Yt=e._free=function(){return(Yt=e._free=e.asm.Ga).apply(null,arguments)},Jt=e.___getTypeName=function(){return(Jt=e.___getTypeName=e.asm.Ha).apply(null,arguments)};function Zt(){return(Zt=e.asm.Ka).apply(null,arguments)}function Qt(){return(Qt=e.asm.La).apply(null,arguments)}function $t(){return($t=e.asm.Ma).apply(null,arguments)}function te(){function t(){if(!Kt&&(Kt=!0,e.calledRun=!0,!E)){if(Y(L),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();j.unshift(t)}Y(j)}}if(!(0<V)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)U();Y(N),0<V||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.Ia).apply(null,arguments)},e.UTF8ToString=k,e.stringToUTF8=R,e.lengthBytesUTF8=F,e.stackAlloc=$t,e.stackSave=Zt,e.stackRestore=Qt,z=function t(){Kt||te(),Kt||(z=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return te(),t.ready});t.exports=r},4537:function(t){"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,a){n[r]=function(t){if(i)if(i=!1,t)a(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){i&&(i=!1,a(t))}}))}},7419:function(t,e){"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(t,e,n){for(var o,i=null,a=[],s=0,u=0;e<n;){var c=t[e++];switch(u){case 0:a[s++]=r[c>>2],o=(3&c)<<4,u=1;break;case 1:a[s++]=r[o|c>>4],o=(15&c)<<2,u=2;break;case 2:a[s++]=r[o|c>>6],a[s++]=r[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";n.decode=function(t,e,n){for(var r,i=n,s=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error(a);switch(s){case 0:r=c,s=1;break;case 1:e[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:e[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:e[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error(a);return n-i},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:function(t){"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:function(t){"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(t,r,o){e[0]=t,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?o:i,t.writeFloatBE=r?i:o,t.readFloatLE=r?a:s,t.readFloatBE=r?s:a}():function(){function e(t,e,n,r){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(e)/Math.LN2);t((o<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,n,r)}}function a(t,e,n){var r=t(e,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=a.bind(null,o),t.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(t,r,o){e[0]=t,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?o:i,t.writeDoubleBE=r?i:o,t.readDoubleLE=r?a:s,t.readDoubleBE=r?s:a}():function(){function e(t,e,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)t(0,o,i+e),t(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))t(0,o,i+e),t(2146959360,o,i+n);else if(r>17976931348623157e292)t(0,o,i+e),t((a<<31|2146435072)>>>0,o,i+n);else{var s;if(r<22250738585072014e-324)t((s=r/5e-324)>>>0,o,i+e),t((a<<31|s/4294967296)>>>0,o,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,i+e),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+n)}}}function a(t,e,n,r,o){var i=t(r,o+e),a=t(r,o+n),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=a.bind(null,o,0,4),t.readDoubleBE=a.bind(null,i,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:function(t){"use strict";t.exports=function(t,e,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return t(n);a+n>r&&(i=t(r),a=0);var s=e.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},4997:function(t,e){"use strict";var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,i=[],a=0;e<n;)(r=t[e++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(t,e,n){for(var r,o,i=n,a=0;a<t.length;++a)(r=t.charCodeAt(a))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&o),++a,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-i}},3442:function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},3720:function(t){t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},i={};function a(t,e){var n,r,a;return e?(a=0<=(t>>>=0)&&t<256)&&(r=i[t])?r:(n=u(t,(0|t)<0?-1:0,!0),a&&(i[t]=n),n):(a=-128<=(t|=0)&&t<128)&&(r=o[t])?r:(n=u(t,t<0?-1:0,!1),a&&(o[t]=n),n)}function s(t,e){if(isNaN(t))return e?b:y;if(e){if(t<0)return b;if(t>=d)return x}else{if(t<=-h)return T;if(t+1>=h)return _}return t<0?s(-t,e).neg():u(t%p|0,t/p|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,n).neg();for(var o=s(c(n,8)),i=y,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),f=parseInt(t.substring(a,a+u),n);if(u<8){var p=s(c(n,u));i=i.mul(p).add(s(f))}else i=(i=i.mul(o)).add(s(f))}return i.unsigned=e,i}function f(t,e){return"number"==typeof t?s(t,e):"string"==typeof t?l(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=f;var p=4294967296,d=p*p,h=d/2,g=a(1<<24),y=a(0);n.ZERO=y;var b=a(0,!0);n.UZERO=b;var m=a(1);n.ONE=m;var v=a(1,!0);n.UONE=v;var w=a(-1);n.NEG_ONE=w;var _=u(-1,2147483647,!1);n.MAX_VALUE=_;var x=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var T=u(0,-2147483648,!1);n.MIN_VALUE=T;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=s(c(t,6),this.unsigned),i=this,a="";;){var u=i.div(o),l=(i.sub(u.mul(o)).toInt()>>>0).toString(t);if((i=u).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return r(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(r(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(m)},S.neg=S.negate,S.add=function(t){r(t)||(t=f(t));var e=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,a=t.high>>>16,s=65535&t.high,c=t.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=i+(65535&t.low))>>>16,p+=(d+=o+c)>>>16,l+=(p+=n+s)>>>16,l+=e+a,u((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},S.subtract=function(t){return r(t)||(t=f(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return y;if(r(t)||(t=f(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return y;if(this.eq(T))return t.isOdd()?T:y;if(t.eq(T))return this.isOdd()?T:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,c=t.high>>>16,l=65535&t.high,p=t.low>>>16,d=65535&t.low,h=0,b=0,m=0,v=0;return m+=(v+=a*d)>>>16,b+=(m+=i*d)>>>16,m&=65535,b+=(m+=a*p)>>>16,h+=(b+=o*d)>>>16,b&=65535,h+=(b+=i*p)>>>16,b&=65535,h+=(b+=a*l)>>>16,h+=n*d+o*p+i*l+a*c,u((m&=65535)<<16|(v&=65535),(h&=65535)<<16|(b&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(r(t)||(t=f(t)),t.isZero())throw Error("division by zero");var n,o,i;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return v;i=b}else{if(this.eq(T))return t.eq(m)||t.eq(w)?T:t.eq(T)?m:(n=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?m:w:(o=this.sub(t.mul(n)),i=n.add(o.div(t)));if(t.eq(T))return this.unsigned?b:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=y}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:c(2,a-48),p=s(n),d=p.mul(t);d.isNegative()||d.gt(o);)d=(p=s(n-=l,this.unsigned)).mul(t);p.isZero()&&(p=m),i=i.add(p),o=o.sub(d)}return i},S.div=S.divide,S.modulo=function(t){return r(t)||(t=f(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(t){return r(t)||(t=f(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return r(t)||(t=f(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return r(t)||(t=f(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},1446:function(t,e,n){"use strict";var r,o,i,a=n(2100),s=a.Reader,u=a.Writer,c=a.util,l=a.roots.default||(a.roots.default={});l.onnx=((i={}).Version=(r={},(o=Object.create(r))[r[0]="_START_VERSION"]=0,o[r[1]="IR_VERSION_2017_10_10"]=1,o[r[2]="IR_VERSION_2017_10_30"]=2,o[r[3]="IR_VERSION_2017_11_3"]=3,o[r[4]="IR_VERSION_2019_1_22"]=4,o[r[5]="IR_VERSION"]=5,o),i.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.s=c.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=c.emptyArray,t.prototype.ints=c.emptyArray,t.prototype.strings=c.emptyArray,t.prototype.tensors=c.emptyArray,t.prototype.graphs=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&l.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&l.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)l.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)l.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.AttributeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=l.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=l.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(l.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!c.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(c.isInteger(t.i)||t.i&&c.isInteger(t.i.low)&&c.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||c.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(c.isInteger(t.ints[e])||t.ints[e]&&c.isInteger(t.ints[e].low)&&c.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||c.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=l.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=l.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.AttributeProto)return t;var e=new l.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(c.Long?(e.i=c.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?c.base64.decode(t.s,e.s=c.newBuffer(c.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=l.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=l.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)c.Long?(e.ints[n]=c.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new c.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?c.base64.decode(t.strings[n],e.strings[n]=c.newBuffer(c.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=l.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=l.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,c.Long){var r=new c.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=c.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?c.Long.prototype.toString.call(t.i):e.longs===Number?new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?c.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var o=0;o<t.floats.length;++o)n.floats[o]=e.json&&!isFinite(t.floats[o])?String(t.floats[o]):t.floats[o]}if(t.ints&&t.ints.length)for(n.ints=[],o=0;o<t.ints.length;++o)"number"==typeof t.ints[o]?n.ints[o]=e.longs===String?String(t.ints[o]):t.ints[o]:n.ints[o]=e.longs===String?c.Long.prototype.toString.call(t.ints[o]):e.longs===Number?new c.LongBits(t.ints[o].low>>>0,t.ints[o].high>>>0).toNumber():t.ints[o];if(t.strings&&t.strings.length)for(n.strings=[],o=0;o<t.strings.length;++o)n.strings[o]=e.bytes===String?c.base64.encode(t.strings[o],0,t.strings[o].length):e.bytes===Array?Array.prototype.slice.call(t.strings[o]):t.strings[o];if(t.tensors&&t.tensors.length)for(n.tensors=[],o=0;o<t.tensors.length;++o)n.tensors[o]=l.onnx.TensorProto.toObject(t.tensors[o],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],o=0;o<t.graphs.length;++o)n.graphs[o]=l.onnx.GraphProto.toObject(t.graphs[o],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?l.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),i.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&l.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ValueInfoProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=l.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=l.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.ValueInfoProto)return t;var e=new l.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=l.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=c.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)l.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.NodeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!c.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!c.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!c.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=l.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.NodeProto)return t;var e=new l.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=l.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=l.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=c.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&l.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ModelProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=l.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(c.isInteger(t.irVersion)||t.irVersion&&c.isInteger(t.irVersion.low)&&c.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!c.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!c.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(c.isInteger(t.modelVersion)||t.modelVersion&&c.isInteger(t.modelVersion.low)&&c.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.ModelProto)return t;var e=new l.onnx.ModelProto;if(null!=t.irVersion&&(c.Long?(e.irVersion=c.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(c.Long?(e.modelVersion=c.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=l.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",c.Long?(r=new c.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?c.Long.prototype.toString.call(t.irVersion):e.longs===Number?new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?c.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var o=0;o<t.opsetImport.length;++o)n.opsetImport[o]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[o],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],o=0;o<t.metadataProps.length;++o)n.metadataProps[o]=l.onnx.StringStringEntryProto.toObject(t.metadataProps[o],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.StringStringEntryProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!c.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!c.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.StringStringEntryProto)return t;var e=new l.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorAnnotation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!c.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=l.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorAnnotation)return t;var e=new l.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=l.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=c.emptyArray,t.prototype.name="",t.prototype.initializer=c.emptyArray,t.prototype.docString="",t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.valueInfo=c.emptyArray,t.prototype.quantizationAnnotation=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)l.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)l.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)l.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.GraphProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=l.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=l.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.GraphProto)return t;var e=new l.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=l.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=l.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=l.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=l.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=l.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=l.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=l.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=l.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=c.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=c.emptyArray,t.prototype.int32Data=c.emptyArray,t.prototype.stringData=c.emptyArray,t.prototype.int64Data=c.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=c.newBuffer([]),t.prototype.externalData=c.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=c.emptyArray,t.prototype.uint64Data=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&l.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)l.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=l.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(c.isInteger(t.dims[e])||t.dims[e]&&c.isInteger(t.dims[e].low)&&c.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!c.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!c.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||c.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(c.isInteger(t.int64Data[e])||t.int64Data[e]&&c.isInteger(t.int64Data[e].low)&&c.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||c.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(c.isInteger(t.uint64Data[e])||t.uint64Data[e]&&c.isInteger(t.uint64Data[e].low)&&c.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto)return t;var e=new l.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)c.Long?(e.dims[n]=c.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new c.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=l.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?c.base64.decode(t.stringData[n],e.stringData[n]=c.newBuffer(c.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)c.Long?(e.int64Data[n]=c.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new c.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?c.base64.decode(t.rawData,e.rawData=c.newBuffer(c.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=l.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)c.Long?(e.uint64Data[n]=c.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new c.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=c.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?c.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new c.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?c.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new c.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?c.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new c.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=l.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?l.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.end=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto.Segment;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(c.isInteger(t.begin)||t.begin&&c.isInteger(t.begin.low)&&c.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(c.isInteger(t.end)||t.end&&c.isInteger(t.end.low)&&c.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto.Segment)return t;var e=new l.onnx.TensorProto.Segment;return null!=t.begin&&(c.Long?(e.begin=c.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(c.Long?(e.end=c.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;c.Long?(r=new c.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?c.Long.prototype.toString.call(t.begin):e.longs===Number?new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?c.Long.prototype.toString.call(t.end):e.longs===Number?new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),i.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto;t.pos<n;){var o=t.uint32();o>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(l.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=l.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto)return t;var e=new l.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=l.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["dimValue","dimParam"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto.Dimension;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(c.isInteger(t.dimValue)||t.dimValue&&c.isInteger(t.dimValue.low)&&c.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!c.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto.Dimension)return t;var e=new l.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(c.Long?(e.dimValue=c.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?c.Long.prototype.toString.call(t.dimValue):e.longs===Number?new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t}(),i.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["tensorType"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&l.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorType=l.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=l.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto)return t;var e=new l.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=l.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!c.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Tensor)return t;var e=new l.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t}(),i.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.OperatorSetIdProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(c.isInteger(t.version)||t.version&&c.isInteger(t.version.low)&&c.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.OperatorSetIdProto)return t;var e=new l.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(c.Long?(e.version=c.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",c.Long){var r=new c.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?c.Long.prototype.toString.call(t.version):e.longs===Number?new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),i),t.exports=l},2100:function(t,e,n){"use strict";t.exports=n(9482)},9482:function(t,e,n){"use strict";var r=e;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=o,o()},1408:function(t,e,n){"use strict";t.exports=u;var r,o=n(9693),i=o.LongBits,a=o.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},f=function(){return o.Buffer?function(t){return(u.create=function(t){return o.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function p(){var t=new i(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){r=t,u.create=f(),r._configure();var e=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return p.call(this)[e](!1)},uint64:function(){return p.call(this)[e](!0)},sint64:function(){return p.call(this).zzDecode()[e](!1)},fixed64:function(){return h.call(this)[e](!0)},sfixed64:function(){return h.call(this)[e](!1)}})}},593:function(t,e,n){"use strict";t.exports=i;var r=n(1408);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(9693);function i(t){r.call(this,t)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},5054:function(t){"use strict";t.exports={}},5994:function(t,e,n){"use strict";e.Service=n(7948)},7948:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function t(e,n,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(t,s,e,n,o,i);if(s.rpcImpl)try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,n){if(t)return s.emit("error",t,e),a(t);if(null!==n){if(!(n instanceof o))try{n=o[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",n,e),a(null,n)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){a(t)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(r.isString(t)){if(!r.Long)return o.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):i},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;o.fromHash=function(t){return t===a?i:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var r=e;function o(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function i(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=o,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(t,e,n){"use strict";t.exports=f;var r,o=n(9693),i=o.LongBits,a=o.base64,s=o.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function d(t,e,n){e[n]=255&t}function h(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function y(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}f.create=p(),f.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},h.prototype=Object.create(u.prototype),h.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new h((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(g,10,i.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.uint64=function(t){var e=i.from(t);return this._push(g,e.length(),e)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(g,e.length(),e)},f.prototype.bool=function(t){return this._push(d,1,t?1:0)},f.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(t){var e=i.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var b=o.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};f.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(d,1,0);if(o.isString(t)){var n=f.alloc(e=a.length(t));a.decode(t,n,0),t=n}return this.uint32(e)._push(b,e,t)},f.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(d,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},f._configure=function(t){r=t,f.create=p(),r._configure()}},3155:function(t,e,n){"use strict";t.exports=i;var r=n(1173);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(9693);function i(){r.call(this)}function a(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},i.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(a,e,t),this},i._configure()},4154:function(t){"use strict";t.exports='"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=[],d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(e.__embind_initialize_bindings(),n.forEach((a=>{e.executeNotifiedProxyingQueue(a)})),n=[],o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("processProxyingQueue"===r.data.cmd?o?e.executeNotifiedProxyingQueue(r.data.queue):n.push(r.data.queue):r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\n'},1670:function(t){"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:function(){},1296:function(){},1384:function(){},3993:function(){},908:function(){},6953:function(){},9925:function(){},2806:function(){},6449:function(){},2850:function(){},5381:function(){},5686:function(t,e,n){"use strict";n.r(e),n.d(e,{flatbuffers:function(){return r}});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var o=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,o=r.ByteBuffer.allocate(n);return o.setPosition(n-e),o.bytes().set(t.bytes(),n-e),o},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var o=(n+2)*r.SIZEOF_SHORT;this.addInt16(o);var i=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(s)){for(var u=r.SIZEOF_SHORT;u<o;u+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+u)!=this.bb.readInt16(s+u))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e,n){var o=n?r.SIZE_PREFIX_LENGTH:0;if(e){var i=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+o),i.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var a=r.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,r.SIZEOF_INT+o),this.addOffset(t),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,o=t.charCodeAt(n++);(r=o<55296||o>=56320?o:(o<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var i=this.space,a=this.bb.bytes();n<e.length;n++)a[i++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e));return t},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),o="",i=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){var a,s=this.readUint8(t+i++);if(s<192)a=s;else{var u=this.readUint8(t+i++);if(s<224)a=(31&s)<<6|63&u;else{var c=this.readUint8(t+i++);a=s<240?(15&s)<<12|(63&u)<<6|63&c:(7&s)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+i++)}}a<65536?o+=String.fromCharCode(a):(a-=65536,o+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return o},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__}()}));
//# sourceMappingURL=ort-web.es5.min.js.map